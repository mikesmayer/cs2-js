var c=function(e,t,o,r,n,a,i,s,l){"use strict";e="default"in e?e["default"]:e,t="default"in t?t["default"]:t,o="default"in o?o["default"]:o,r="default"in r?r["default"]:r,n="default"in n?n["default"]:n,a="default"in a?a["default"]:a,i="default"in i?i["default"]:i,s="default"in s?s["default"]:s,l="default"in l?l["default"]:l;var c={country:a.model("countries"),state:a.model("states"),contributionDetail:a.model("contribution_details"),contributionActivity:a.model("contribution_activities"),projectDetail:a.model("project_details"),userDetail:a.model("user_details"),balance:a.model("balances"),balanceTransaction:a.model("balance_transactions"),balanceTransfer:a.model("balance_transfers"),user:a.model("users"),userCreditCard:a.model("user_credit_cards"),bankAccount:a.model("bank_accounts"),bank:a.model("banks"),rewardDetail:a.model("reward_details"),projectReminder:a.model("project_reminders"),projectReport:a.model("project_reports"),contributions:a.model("contributions"),directMessage:a.model("direct_messages"),teamTotal:a.model("team_totals"),recommendedProjects:a.model("recommended_projects"),projectAccount:a.model("project_accounts"),projectAccountError:a.model("project_account_errors"),projectContribution:a.model("project_contributions"),projectContributiorsStat:a.model("project_stat_contributors"),projectPostDetail:a.model("project_posts_details"),projectContributionsPerDay:a.model("project_contributions_per_day"),projectContributionsPerLocation:a.model("project_contributions_per_location"),projectContributionsPerRef:a.model("project_contributions_per_ref"),projectVisitorsPerDay:a.model("project_visitors_per_day"),projectTransfer:a.model("project_transfers"),project:a.model("projects"),projectSearch:a.model("rpc/project_search"),category:a.model("categories"),categoryTotals:a.model("category_totals"),categoryFollower:a.model("category_followers"),teamMember:a.model("team_members"),notification:a.model("notifications"),statistic:a.model("statistics"),successfulProject:a.model("successful_projects"),finishedProject:a.model("finished_projects"),userFriend:a.model("user_friends"),userFollow:a.model("user_follows"),followAllFriends:a.model("rpc/follow_all_friends"),contributor:a.model("contributors"),userFollower:a.model("user_followers"),creatorSuggestion:a.model("creator_suggestions"),userContribution:a.model("user_contributions"),shippingFee:a.model("shipping_fees"),deleteProject:a.model("rpc/delete_project"),cancelProject:a.model("rpc/cancel_project"),city:a.model("cities")};c.teamMember.pageSize(40),c.rewardDetail.pageSize(!1),c.project.pageSize(30),c.category.pageSize(50),c.contributionActivity.pageSize(40),c.successfulProject.pageSize(9),c.finishedProject.pageSize(9),c.country.pageSize(!1),c.state.pageSize(!1),c.projectContribution.pageSize(9),c.contributor.pageSize(9),c.recommendedProjects.pageSize(3),c.bank.pageSize(400),c.city.pageSize(200);var d=e.prop({}),u=function(e,t,o){var r=a.filtersVM({user_id:"eq",project_id:"eq",state:"in"});r.user_id(e),r.project_id(t),r.state(o);var n=a.loaderWithToken(c.userContribution.getPageOptions(r.parameters()));return n.load()},p=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-contribution");return!!o&&(d(JSON.parse(o)),e.redraw(!0),d)},m=function(e){return o.contains(["paid","pending_refund","refunded"],e.state)},f=function(e){return m(e)},w=function(e){return"BoletoBancario"===e.payment_method&&e.waiting_payment},b=function(e){return"BoletoBancario"===e.payment_method&&"pending"===e.state&&"online"===e.project_state&&!e.reward_sold_out&&!e.waiting_payment},g=function(e){return"paid"===e.state&&e.reward_id&&"failed"!==e.project_state},h={getCurrentContribution:p,canShowReceipt:f,canGenerateSlip:b,canShowSlip:w,getUserProjectContributions:u,canBeDelivered:g},v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e},j=function(){function e(e,t){var o=[],r=!0,n=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(r=(i=s.next()).done)&&(o.push(i.value),!t||o.length!==t);r=!0);}catch(l){n=!0,a=l}finally{try{!r&&s["return"]&&s["return"]()}finally{if(n)throw a}}return o}return function(t,o){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,o);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)},x={},z=function(e){return window.location.hash===e},C=function(e){var t=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]"),o=new RegExp("[\\?&]"+t+"=([^&#]*)"),r=o.exec(location.search);return null===r?"":decodeURIComponent(r[1].replace(/\+/g," "))},E=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e||t},S=function(){r.locale("pt",{months:"Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_")})},P=function(e){return null!=e},M=function(e,t){return t=t||"DD/MM/YYYY",e?r(e).locale("pt").format(t):"no date"},A=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},T=function(e,t){if(!sessionStorage.getItem(e))return sessionStorage.setItem(e,String(t))},D=function(e,t){return sessionStorage.setItem(e,JSON.stringify(t))},q=function(e){return sessionStorage.getItem(e)?JSON.parse(String(sessionStorage.getItem(e))):null},R=function(e){var t=sessionStorage.getItem(e);return t?(sessionStorage.removeItem(e),t):null},F=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},O=function(t,o){var r=document,n=r.createElement("script");return window.disqus_config=function(){this.page.url=t,this.page.identifier=o},n.src="//catarseflex.disqus.com/embed.js",n.setAttribute("data-timestamp",String(+new Date)),(r.head||r.body).appendChild(n),e("")},I=function(e){var t=/^(([^<>()[\]\.,;:\s@\"]+(\.[^<>()[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()[\]\.,;:\s@\"]+\.)+[^<>()[\]\.,;:\s@\"]{2,})$/i;return t.test(e)},N=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=e.replace(/[^\d]+/g,"");if(""==s)return!1;if(14!=s.length)return!1;if("00000000000000"==s||"11111111111111"==s||"22222222222222"==s||"33333333333333"==s||"44444444444444"==s||"55555555555555"==s||"66666666666666"==s||"77777777777777"==s||"88888888888888"==s||"99999999999999"==s)return!1;t=s.length-2,o=s.substring(0,t),r=s.substring(t),n=0,a=t-7;for(var l=t;l>=1;l--)n+=Number(o.charAt(t-l))*a--,a<2&&(a=9);if(i=n%11<2?0:11-n%11,String(i)!=r.charAt(0))return!1;t+=1,o=s.substring(0,t),n=0,a=t-7;for(var c=t;c>=1;c--)n+=Number(o.charAt(t-c))*a--,a<2&&(a=9);return i=n%11<2?0:11-n%11,String(i)==r.charAt(1)},V=function(e){var t=0,o=void 0;if("00000000000"==e)return!1;for(var r=1;r<=9;r++)t+=parseInt(e.substring(r-1,r))*(11-r);if(o=10*t%11,10!=o&&11!=o||(o=0),o!=parseInt(e.substring(9,10)))return!1;t=0;for(var n=1;n<=10;n++)t+=parseInt(e.substring(n-1,n))*(12-n);return o=10*t%11,10!=o&&11!=o||(o=0),o==parseInt(e.substring(10,11))},B=e.prop([]),L=function(){return B([])},U=function(){e.prop([]);return{submit:function(e,t){return function(){return L(),o.map(e,function(e){"email"===e.rule&&(I(e.prop())||B().push({field:e.prop,message:"E-mail inválido."})),"text"===e.rule&&""===e.prop().trim()&&B().push({field:e.prop,message:"O campo não pode ser vazio."})}),!B().length>0&&t()}},hasError:function(e){return o.reduce(B(),function(t,o){return o.field()===e()||t},!1)}}},Y=function(e,t){var o=r(e,t||"DD/MM/YYYY");return o.isValid()?o:r(e)},H={days:"dias",minutes:"minutos",hours:"horas",seconds:"segundos"},W=function Bs(e){var Bs=H,t=function(){var t=Bs[e.unit||"seconds"];return Number(e.total)<=1?t.slice(0,-1):t};return{unit:t(),total:e.total}},$=function(e,t){return function(r,n,a){if(!o.isNumber(r))return null;var i="\\d(?=(\\d{"+(a||3)+"})+"+(n>0?"\\D":"$")+")",s=r.toFixed(Math.max(0,~~n));return(t?s.replace(".",t):s).replace(new RegExp(i,"g"),"$&"+(e||","))}},J=$(".",","),X=function(t,o){var r=e.prop(t);return r.toggle=function(){return r(r()===o?t:o)},r},K=a.filtersVM({id:"eq"}),G=function(){if(x.currentProject)return x.currentProject;var e=document.getElementById("application"),t=e&&e.getAttribute("data-parameters");return t?x.currentProject=JSON.parse(t):null},Q=function(){if(x.rdToken)return x.rdToken;var e=o.first(document.querySelectorAll("[name=rd-token]"));return e?x.rdToken=e.getAttribute("content"):null},Z=function(){if(x.similityCustomer)return x.similityCustomer;var e=o.first(document.querySelectorAll("[name=simility-customer]"));return e?x.similityCustomer=e.getAttribute("content"):null},ee=function(){if(x.mailchumUrl)return x.mailchumUrl;var e=o.first(document.querySelectorAll("[name=mailchimp-url]"));return e?x.mailchumUrl=e.getAttribute("content"):null},te=function(){if(x.user)return x.user;var e=document.getElementsByTagName("body"),t=o.first(e).getAttribute("data-user");return t?x.user=JSON.parse(t):null},oe=function(){var e=te();return null==e||null==e.user_id?null:e.user_id},re=function(){return!o.isNull(oe())},ne=function(){if(x.apiHost)return x.apiHost;var e=document.getElementById("api-host");return x.apiHost=e&&e.getAttribute("content")},ae=function(e){var t=window.location.pathname.split("/").slice(-1)[0];return e===t},ie=function(e){return e||"/assets/catarse_bootstrap/user.jpg"},se=function(){return e(".u-text-center.u-margintop-30 u-marginbottom-30",[e('img[alt="Loader"][src="https://s3.amazonaws.com/catarse.files/loader.gif"]')])},le=function(){return e("span.badge.badge-success.margin-side-5",t.t("projects.new_feature_badge"))},ce=function(){var e=function(){try{window.FB.XFBML.parse()}catch(e){}};return window.setTimeout(e,500)},de=function(e,t,o){return e>1?e+o:e+t},ue=function(e){var t=document.createElement("div");return t.innerHTML=e,t.textContent||t.innerText||""},pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e=e.replace(/\r\n?/,"\n"),e.length>0&&(e=e.replace(/\n\n+/g,"</p><p>"),e=e.replace(/\n/g,"<br />"),e="<p>"+e+"</p>"),e},me=function(e){return e.maximum_contributions>0&&e.paid_count+e.waiting_payment_count>=e.maximum_contributions},fe=function(e){return e.maximum_contributions-(e.paid_count+e.waiting_payment_count)},we=function(e){var t=document.createElement("a");return t.href=e,t},be=function(){return function(e,t){!t&&window.$&&window.UIHelper&&window.UIHelper.setupResponsiveIframes(n(e))}},ge=function(){return function(e,t){if(!t){var o=window.location.hash.substr(1);o===e.id&&(window.location.hash="",setTimeout(function(){window.location.hash=e.id}))}}},he=function(){return window.location.href="/pt/login",!1},_e=function(e){return window.location.href=e,!1},ve=function(e){var t=0,o=0;do t+=e.offsetTop||0,o+=e.offsetLeft||0,e=e.offsetParent;while(e);return{top:t,left:o}},ye=function(){var e=function(e,t){for(var r=document.getElementsByClassName(t),n=e.parentNode;n&&!o.contains(r,n);)n=n.parentNode;return n&&(n.style.display="none"),n},t=document.getElementById("modal-close");o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")});var r=document.getElementsByClassName("modal-close");o.map(r,function(t){o.isElement(t)&&(t.onclick=function(o){o.preventDefault(),e(t,"modal-backdrop")})})},je=function(){var e=document.getElementsByClassName("icon-close")[0];o.isElement(e)&&(e.onclick=function(t){t.preventDefault(),e.parentElement&&e.parentElement.remove()})},ke=function(e,t){return t=t||{},o.extend({},t,{scope:e})},xe=function(t){var r=o.isFunction(t)?function(){t(),e.redraw()}:e.redraw;window.addEventListener("hashchange",r,!1)},ze=function(){var e=o.first(document.querySelectorAll("[name=csrf-token]"));return e?e.getAttribute("content"):null},Ce=function(){var e=o.first(document.querySelectorAll("[name=csrf-param]"));return e?e.getAttribute("content"):null},Ee=function(e){var t=window.scrollY,o=ve(e).top,r=300,n=(o-t)/r,a=function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1},i=setInterval(function(){var e=a(t/o)*t;window.scrollTo(0,e),t>=o&&clearInterval(i),t+=n},1)},Se=function(){return window.scrollTo(0,0)},Pe=function(){var e=function(e,t){e.onclick=function(){var e=document.getElementById(t);return o.isElement(e)&&Ee(e),!1}};return function(t,o){o||e(t,t.hash.slice(1))}},Me=function(e){var t={online:{cssClass:"text-success",text:"NO AR"},successful:{cssClass:"text-success",text:"FINANCIADO"},failed:{cssClass:"text-error",text:"NÃO FINANCIADO"},waiting_funds:{cssClass:"text-waiting",text:"AGUARDANDO"},rejected:{cssClass:"text-error",text:"RECUSADO"},draft:{cssClass:"",text:"RASCUNHO"},in_analysis:{cssClass:"",text:"EM ANÁLISE"},approved:{cssClass:"text-success",text:"APROVADO"}};return t[e]},Ae=function(e){return function(t,o){if(!o){var r=document.createElement("script");return r.type="text/javascript",r.id="RDIntegration",document.getElementById(r.id)||(document.body.appendChild(r),r.onload=function(){return window.RdIntegration.integrate(Q(),e)},r.src="https://d335luupugsy2.cloudfront.net/js/integration/stable/rd-js-integration.min.js"),!1}}},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Function.prototype;return e?function(){try{e.project||(e.project=G()),e.user||(e.user=te()),i.event(e)}catch(o){}t()}:t},De={},qe=function(e,t){if(!e)return t;var r=o.compact([e.cat,e.act]).join("_");if(!r)throw new Error("Should inform cat or act");return function(){if(!De[r]){De[r]=!0;var o=Te(e,t);o()}}},Re=function(e){return parseFloat(e().replace(".","").replace(",","."))},Fe=function(e){var t=String(e).replace(/[^0-9]|[.,]/g,""),o=t.slice(0,t.length-2),r=t.slice(t.length-2);return o=o.replace(/\B(?=(\d{3})+(?!\d))/g,"."),o+","+r},Oe=function(e){return e.replace(/[0-9]/g,"")},Ie=function(e){return e.replace(/[^0-9]/g,"")},Ne=function(e,t){return function(o){return function(r){return r.length===e&&o!==t?r+t:r}}},Ve=function(e){return function(t){return o.compact(o.map(t,function(t,o){return t in e?null:[o,t]}))}},Be=function Ls(e){return function(t){return function(o,r){if(o>=t.length)return!1;var n=t.charAt(o);return n in e?e[n].test(r):r===n||Ls(e)(t)(o+1,r)}}},Le=function(e){var t=o.map(e,function(e){return Ne(e[0],e[1])});return function(e,r){var n=o.map(t,function(e){return e(r)}),a=o.reduce(n,function(e,t){return o.isFunction(e)?o.compose(t,e):t});return a(e)}},Ue=function(e,t){var r={9:/\d/,A:/[a-zA-Z]/},n=Ve(r),a=Be(r),i=Le(n(e)),s=a(e);return o.reduce(t,function(e,t){return s(e.length,t)&&(e=i(e,t)+t),e},"")},Ye=function(e){return sessionStorage.removeItem(e)},He=e.prop(),We=function(e){He(e)},$e=function(){return He},Je=e.prop(),Xe=function(e){Je(e)},Ke=function(){return Je},Ge=function(e,t){return"/"+e+(t?"?ref="+t:"")},Qe=function(e){e&&!function(){var t=!1;window.addEventListener("scroll",function(o){if(!t&&window.$&&n(document).scrollTop()>.75*n(window).height()){t=!0;var r=Te(e);r()}})}()},Ze={event:Te,oneTimeEvent:qe,windowScroll:Qe},et=function(e){var t=void 0;return t="function"==typeof e?e().permalink:e.permalink,"https://www.catarse.me/"+t},tt=function(){var e=window.location.pathname;return"/pt"==e||"/"==e},ot=function(){var e=window.location.pathname,t=e.indexOf("/insights")>-1,o=e.indexOf("/edit")>-1,r=e.indexOf("/contribution")>-1;return!o&&!t&&!r},rt=function(e){return function(t,o){var r=document.getElementsByTagName("title")[0],n=r.innerText;if(n!==e)return r.innerText=e}},nt=function(){var e=sessionStorage.getItem("reminder");e&&tt()&&(window.location.href="/projects/"+e)},at=function(){if(x.rootUrl)return x.rootUrl;var e=o.first(document.querySelectorAll("[name=root-url]"));return e?x.rootUrl=e.getAttribute("content"):null},it=function(e){return{source:!1,formatting:["p"],formattingAdd:[{tag:"blockquote",title:"Citar","class":"fontsize-base quote",clear:!0},{tag:"p",title:"Cabeçalho 1","class":"fontsize-larger fontweight-semibold",clear:!0},{tag:"p",title:"Cabeçalho 2","class":"fontsize-large",clear:!0}],lang:"pt_br",maxHeight:800,minHeight:300,convertVideoLinks:!0,convertUrlLinks:!0,convertImageLinks:!1,plugins:["video"],imageUpload:"/redactor_rails/pictures?"+e,imageGetJson:"/redactor_rails/pictures",path:"/assets/redactor-rails",css:"style.css"}},st=function(e){return function(t,o){o||!function(){var o=window.$(t),r=ze(),n=Ce(),a="";n&&r&&(a=n+"="+encodeURIComponent(r)),o.redactor(it(a)),o.redactor("code.set",e()),window.$(".redactor-editor").on("blur",function(){return e(o.redactor("code.get"))})}()}},lt=function(t,o){return e("textarea.input_field.redactor.w-input.text-field.bottom.jumbo.positive",{name:t,config:st(o)})},ct=function(e){ze()&&e.setRequestHeader("X-CSRF-Token",ze())},dt=function(t){var o={delivered:e("span.fontsize-smallest.badge.badge-success","Enviada"),received:e("span.fontsize-smallest.badge.badge-success","Recebida"),undelivered:e("span.fontsize-smallest.badge.badge-light","Não enviada"),error:e("span.fontsize-smallest.badge.badge-attention","Erro no envio")};return h.canBeDelivered(t)?o[t.delivery_status]:""},ut=function(e){var t=window.location.href,o=(/^[?#]/.test(t)?t.slice(1):t).split("?");return o.length>1?o[1].split("&").reduce(function(e,t){var o=t.split("="),r=j(o,2),n=r[0],a=r[1];return e[n]=a?decodeURIComponent(a.replace(/\+/g," ")):"",e},{})[e]:null};S(),je(),ye(),nt();var pt={authenticityParam:Ce,authenticityToken:ze,buildLink:Ge,contributionStatusBadge:dt,cumulativeOffset:ve,discuss:O,existy:P,validateEmail:I,validateCpf:V,validateCnpj:N,momentify:M,momentFromString:Y,formatNumber:J,idVM:K,getUser:te,getUserID:oe,getSimilityCustomer:Z,getApiHost:ne,getMailchimpUrl:ee,getCurrentProject:G,getParams:ut,toggleProp:X,loader:se,newFeatureBadge:le,fbParse:ce,pluralize:de,simpleFormat:pe,translatedTime:W,rewardSouldOut:me,rewardRemaning:fe,parseUrl:we,hashMatch:z,redrawHashChange:xe,useAvatarOrDefault:ie,locationActionMatch:ae,navigateToDevise:he,navigateTo:_e,storeAction:T,callStoredAction:R,UIHelper:be,toAnchor:ge,capitalize:F,paramByName:C,i18nScope:ke,RDTracker:Ae,selfOrEmpty:E,animateScrollTo:Ee,scrollTo:Pe,scrollTop:Se,getRandomInt:A,projectStateTextClass:Me,validationErrors:B,validate:U,analytics:Ze,strip:ue,storeObject:D,getStoredObject:q,removeStoredObject:Ye,setProject:We,getProject:$e,setReward:Xe,getReward:Ke,applyMonetaryMask:Fe,noNumbersMask:Oe,numbersOnlyMask:Ie,monetaryToFloat:Re,mask:Ue,projectFullPermalink:et,isProjectPage:ot,setPageTitle:rt,rootUrl:at,redactor:lt,setCsrfToken:ct,userSignedIn:re},mt=postgrest.paginationVM(c.user,"id.desc",{Prefer:"count=exact"}),ft=postgrest.filtersVM({full_text_index:"@@",deactivated_at:"is.null"}),wt=function(e){return(e||"").toString().trim()};ft.deactivated_at(null).order({id:"desc"}),ft.deactivated_at.toFilter=function(){var e=JSON.parse(ft.deactivated_at());return e},ft.full_text_index.toFilter=function(){var e=wt(ft.full_text_index());return e&&s(e)||void 0};var bt={view:function(t,o){var r=o.inputWrapperClass||".w-input.text-field.positive.medium",n=o.btnClass||".btn.btn-large.u-marginbottom-10";return e(".w-row",[e(".w-col.w-col-8",[e("input"+r+'[placeholder="'+o.placeholder+'"][type="text"]',{onchange:e.withAttr("value",o.vm),value:o.vm()})]),e(".w-col.w-col-4",[e("input#filter-btn"+n+'[type="submit"][value="Buscar"]')])])}},gt={controller:function(){return{toggler:pt.toggleProp(!1,!0)}},view:function(t,r){var n=r.filterBuilder,a=(r.data,r.label||""),i=o.findWhere(n,{component:bt});return e("#admin-contributions-filter.w-section.page-header",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-30",a),e(".w-form",[e("form",{onsubmit:r.submit},[i?e.component(i.component,i.data):"",e(".u-marginbottom-20.w-row",e('button.w-col.w-col-12.fontsize-smallest.link-hidden-light[style="background: none; border: none; outline: none; text-align: left;"][type="button"]',{onclick:t.toggler.toggle},"Filtros avançados  >")),t.toggler()?e("#advanced-search.w-row.admin-filters",[o.map(n,function(t){return t.component!==bt?e.component(t.component,t.data):""})]):""])])])])}},ht={controller:function(e){return{displayDetailBox:pt.toggleProp(!1,!0)}},view:function(t,o){var r=o.item;return e(".w-clearfix.card.u-radius.u-marginbottom-20.results-admin-items",[e.component(o.listItem,{item:r,key:o.key}),e("button.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary",{onclick:t.displayDetailBox.toggle}),t.displayDetailBox()?e.component(o.listDetail,{item:r,key:o.key}):""])}},_t={controller:function(e){var t=e.vm.list;!t.collection().length&&t.firstPage&&t.firstPage().then(null,function(t){e.vm.error(t.message)})},view:function(t,o){var r=o.vm.list,n=o.vm.error,a=o.label||"";return e(".w-section.section",[e(".w-container",n()?e(".card.card-error.u-radius.fontweight-bold",n()):[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-9",[e(".fontsize-base",r.isLoading()?"Carregando "+a.toLowerCase()+"...":[e("span.fontweight-semibold",r.total())," "+a.toLowerCase()+" encontrados"])])]),e("#admin-contributions-list.w-container",[r.collection().map(function(t){return e.component(ht,{listItem:o.listItem,listDetail:o.listDetail,item:t,key:t.id})}),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.isLoading()?pt.loader():e("button#load-more.btn.btn-medium.btn-terciary",{onclick:r.nextPage},"Carregar mais")])])])])])])])}},vt={view:function(t,o){var r=o.item;return e(".w-row.admin-user",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e('img.user-avatar[src="'+pt.useAvatarOrDefault(r.profile_img_thumbnail)+'"]')]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/users/'+r.id+'/edit"]',r.name||r.email)]),e(".fontsize-smallest","Usuário: "+r.id),e(".fontsize-smallest.fontcolor-secondary","Email: "+r.email),o.additional_data])])}},yt={view:function(t,o){return e(".w-row",[e(".w-col.w-col-4",[e.component(vt,o)])])}},jt={controller:function(t){var r=t.data,n=e.prop(!1),a=e.prop(!1),i=(e.prop(!1),r.property),s={},l=t.item;r.requestOptions.config=function(e){pt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",pt.authenticityToken())};var c=e.prop(!1),d=function(){return e.request(o.extend({},{data:s},r.requestOptions))},u=e.prop(""),p=e.prop(""),m=function(e){c(!1),p(e.errors[0]),n(!0),a(!0)},f=function(e){c(!1),o.extend(l,e[0]),n(!0),a(!1)},w=function(){return c(!0),s[i]=u(),d().then(f,m),!1},b=function(e,t,o){o.onunload=function(){n(!1),a(!1)}};return{complete:n,error:a,error_message:p,l:c,newPassword:u,submit:w,toggler:pt.toggleProp(!1,!0),unload:b}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error_message())])]:[e('.w-form-done[style="display:block;"]',[e("p","Senha alterada com sucesso.")])]:[e("label",r.innerLabel),e('input.w-input.text-field[type="text"][name="'+r.property+'"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newPassword),value:t.newPassword()}),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},kt={controller:function(t){var o=t.data,r=e.prop(!1),n=e.prop(!1),a=(e.prop(!1),{}),i=t.item,s=o.property,l=o.forceValue||null,c=e.prop(l);pt.idVM.id(i[o.updateKey]);var d=postgrest.loaderWithToken(o.model.patchOptions(pt.idVM.parameters(),a)),u=function(e){_.extend(i,e[0]),r(!0),n(!1)},p=function(){return a[s]=c(),d.load().then(u,function(){r(!0),n(!0)}),!1},m=function(e,t,o){o.onunload=function(){r(!1),n(!1),c(l)}};return{complete:r,error:n,l:d,newValue:c,submit:p,toggler:pt.toggleProp(!1,!0),unload:m}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição. "+r.errorMessage)])]:[e('.w-form-done[style="display:block;"]',[e("p",r.successMessage)])]:[e("label",r.innerLabel),void 0===r.forceValue?e('input.w-input.text-field[type="text"][placeholder="'+r.placeholder+'"]',{onchange:e.withAttr("value",t.newValue),value:t.newValue()}):"",e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},xt={controller:function(t){var o=e.prop([]),r=function(e){var t=c.notification;t.getPageWithToken(postgrest.filtersVM({user_id:"eq",sent_at:"is.null"}).user_id(e.id).sent_at(!0).order({sent_at:"desc"}).parameters()).then(o)};return r(t.user),{notifications:o}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico de notificações"),t.notifications().map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-24",[e(".fontcolor-secondary",pt.momentify(t.sent_at,"DD/MM/YYYY, HH:mm")," - ",e('a[target="blank"][href="/notifications/'+t.relation+"/"+t.id+'"]',t.template_name),t.origin?" - "+t.origin:"")])])})])}},zt={controller:function(){return{actions:{reset:{property:"password",callToAction:"Redefinir",innerLabel:"Nova senha de Usuário:",outerLabel:"Redefinir senha",placeholder:"ex: 123mud@r",model:c.user},reactivate:{property:"deactivated_at",updateKey:"id",callToAction:"Reativar",innerLabel:"Tem certeza que deseja reativar esse usuário?",successMessage:"Usuário reativado com sucesso!",errorMessage:"O usuário não pôde ser reativado!",outerLabel:"Reativar usuário",forceValue:null,model:c.user}}}},view:function(t,r){var n=t.actions,a=r.item,i=(r.details,function(e,t){return o.extend({},e,{requestOptions:{url:"/users/"+t+"/new_password",method:"POST"}})});return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(jt,{data:i(n.reset,a.id),item:a}),a.deactivated_at?e.component(kt,{data:n.reactivate,item:a}):""]),e(".w-row.card.card-terciary.u-radius",[e.component(xt,{user:a})])])}},Ct={view:function(t,r){var n=o.isFunction(r.options)?r.options():r.options;return e("select"+r.classes+'[id="'+r.id+'"]',{onchange:function(e){r.valueProp(e.target.value),r.onchange()},value:r.valueProp()},o.map(n,function(t){return e('option[value="'+t.value+'"]',t.option)}))}},Et={view:function(t,o){var r=o.wrapper_class||".w-col.w-col-3.w-col-small-6";return e(r,[e('label.fontsize-smaller[for="'+o.index+'"]',o.custom_label?e.component(o.custom_label[0],o.custom_label[1]):o.label),e.component(Ct,{id:o.index,onchange:o.onchange,classes:".w-select.text-field.positive",valueProp:o.vm,options:o.options})])}},St={controller:function(){var t=mt,o=ft,r=e.prop(""),n=[{component:bt,data:{vm:o.full_text_index,placeholder:"Busque por nome, e-mail, Ids do usuário..."}},{component:Et,data:{label:"Com o estado",index:"status",name:"deactivated_at",vm:o.deactivated_at,options:[{value:"",option:"Qualquer um"},{value:null,option:"ativo"},{value:!0,option:"desativado"}]}}],a=function(){return t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},submit:a}},view:function(t){var o="Usuários";return[e.component(gt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,label:o,submit:t.submit}),e.component(_t,{vm:t.listVM,label:o,listItem:yt,listDetail:zt})]}},Pt=postgrest.paginationVM(c.contributionDetail,"id.desc",{Prefer:"count=exact"}),Mt=a.filtersVM({full_text_index:"@@",delivery_status:"eq",state:"eq",gateway:"eq",value:"between",created_at:"between"}),At=function(e){return(e||"").toString().trim()};Mt.state(""),Mt.delivery_status(""),Mt.gateway(""),Mt.order({id:"desc"}),Mt.created_at.lte.toFilter=function(){var e=At(Mt.created_at.lte());return e&&pt.momentFromString(e).endOf("day").format("")},Mt.created_at.gte.toFilter=function(){var e=At(Mt.created_at.gte());return e&&pt.momentFromString(e).format()},Mt.full_text_index.toFilter=function(){var e=At(Mt.full_text_index());return e&&s(e)||void 0};var Tt={view:function(t,o){var r=o.item;return e(".w-row.admin-project",[e(".w-col.w-col-3.w-col-small-3.u-marginbottom-10",[e("img.thumb-project.u-radius[src="+r.project_img+"][width=50]")]),e(".w-col.w-col-9.w-col-small-9",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-10",[e('a.alt-link[target="_blank"][href="/'+r.permalink+'"]',r.project_name)]),e(".fontsize-smallest.fontweight-semibold",r.project_state),e(".fontsize-smallest.fontcolor-secondary",pt.momentify(r.project_online_date)+" a "+pt.momentify(r.project_expires_at))])])}},Dt={view:function(t,o){var r=o.item;return e(".w-row.admin-contribution",[e(".fontweight-semibold.lineheight-tighter.u-marginbottom-10.fontsize-small","R$"+r.value),e(".fontsize-smallest.fontcolor-secondary",pt.momentify(r.created_at,"DD/MM/YYYY HH:mm[h]")),e(".fontsize-smallest",["ID do Gateway: ",e('a.alt-link[target="_blank"][href="https://dashboard.pagar.me/#/transactions/'+r.gateway_id+'"]',r.gateway_id)])])}},qt={view:function(t,o){var r=o.item,n={profile_img_thumbnail:r.user_profile_img,id:r.user_id,name:r.user_name,email:r.email},a=e(".fontsize-smallest.fontcolor-secondary","Gateway: "+r.payer_email);return e.component(vt,{item:n,additional_data:a})}},Rt=o.partial(pt.i18nScope,"projects.payment"),Ft={controller:function(t){var o=t.item,r=null,n=void 0,a=void 0,i=void 0;return r=function(){if(o.gateway_data)switch(o.gateway.toLowerCase()){case"moip":return{first_digits:o.gateway_data.cartao_bin,last_digits:o.gateway_data.cartao_final,brand:o.gateway_data.cartao_bandeira};case"pagarme":return{first_digits:o.gateway_data.card_first_digits,last_digits:o.gateway_data.card_last_digits,brand:o.gateway_data.card_brand}}},n=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return e("span#boleto-detail","");case"cartaodecredito":var t=r();return t?e("#creditcard-detail.fontsize-smallest.fontcolor-secondary.lineheight-tight",[t.first_digits+"******"+t.last_digits,e("br"),t.brand+" "+o.installments+"x"]):""}},a=function(){switch(o.payment_method.toLowerCase()){case"boletobancario":return".fa-barcode";case"cartaodecredito":return".fa-credit-card";default:return".fa-question"}},i=function(){switch(o.state){case"paid":return".text-success";case"refunded":return".text-refunded";case"pending":case"pending_refund":return".text-waiting";default:return".text-error"}},{displayPaymentMethod:n,paymentMethodClass:a,stateClass:i}},view:function(o,r){var n=r.item;return e(".w-row.payment-status",[e(".fontsize-smallest.lineheight-looser.fontweight-semibold",[e("span.fa.fa-circle"+o.stateClass())," "+t.t(n.state,Rt())]),e(".fontsize-smallest.fontweight-semibold",[e("span.fa"+o.paymentMethodClass())," ",e('a.link-hidden[href="#"]',n.payment_method)]),e(".fontsize-smallest.fontcolor-secondary.lineheight-tight",[o.displayPaymentMethod()])])}},Ot={controller:function(){return{itemBuilder:[{component:qt,wrapperClass:".w-col.w-col-4"},{component:Tt,wrapperClass:".w-col.w-col-4"},{component:Dt,wrapperClass:".w-col.w-col-2"},{component:Ft,wrapperClass:".w-col.w-col-2"}]}},view:function(t,o){return e(".w-row",_.map(t.itemBuilder,function(t){return e(t.wrapperClass,[e.component(t.component,{item:o.item,key:o.key})])}))}},It={controller:function(t){var r=t.data,n=e.prop(!1),a={},i=e.prop(!1),s=(e.prop(!1),t.item()),l=e.prop(s.description||""),c=(r.getKey,e.prop("")),d={},u={},p=e.prop([]),m=(r.radios,r.getKey),f=t.getKeyValue,w=r.updateKey,b=t.updateKeyValue,g=r.validate,h=r.selectedItem||e.prop();u[w]="eq";var _=postgrest.filtersVM(u);
_[w](b),d[m]="eq";var v=postgrest.filtersVM(d);v[m](f);var y=postgrest.loaderWithToken(r.getModel.getPageOptions(v.parameters())),j=postgrest.loaderWithToken(r.updateModel.patchOptions(_.parameters(),a)),k=function(e){if(e.length>0){var t=o.findWhere(p(),{id:e[0][r.selectKey]});h(t)}else i({message:"Nenhum item atualizado"});n(!0)},x=function(e){var t=r.addEmpty;p(e),o.isUndefined(t)||p().unshift(t)},z=function(){y.load().then(x,i)},C=function(){if(c()){var e=g(p(),c());o.isUndefined(e)?(a[r.selectKey]=c()===-1?null:c(),j.load().then(k,i)):(n(!0),i({message:e}))}return!1},E=function(e,t,o){o.onunload=function(){n(!1),i(!1),c("")}},S=function(t){l(t),e.redraw()};return z(),{complete:n,description:l,setDescription:S,error:i,setLoader:j,getLoader:y,newID:c,submit:C,toggler:pt.toggleProp(!1,!0),unload:E,radios:p}},view:function(t,r){var n=r.data,a=r.item(),i=t.setLoader()||t.getLoader()?"por favor, aguarde...":n.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},n.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p",t.error().message)])]:[e('.w-form-done[style="display:block;"]',[e("p","Recompensa alterada com sucesso!")])]:[t.radios()?o.map(t.radios(),function(o,r){return e(".w-radio",[e("input#r-"+r+'.w-radio-input[type=radio][name="admin-radio"][value="'+o.id+'"]',{checked:o.id===(a[n.selectKey]||a.id),onclick:function(){t.newID(o.id),t.setDescription(o.description)}}),e('label.w-form-label[for="r-'+r+'"]',"R$"+o.minimum_value)])}):pt.loader(),e("strong","Descrição"),e("p",t.description()),e('input.w-button.btn.btn-small[type="submit"][value="'+i+'"]')])]):""])}},Nt={controller:function(t){var r=t.data,n=e.prop(!1),a=e.prop(!1),i=(e.prop(!1),t.item);r.requestOptions.config=function(e){pt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",pt.authenticityToken())};var s=o.compose(r.model.getRowWithToken,pt.idVM.id(i[r.updateKey]).parameters),l=e.prop(!1),c=function(){return s().then(u)},d=function(e){l(!1),n(!0),a(!0)},u=function(e){o.extend(i,e[0]),n(!0),a(!1)},p=function(){return l(!0),e.request(r.requestOptions).then(c,d),!1},m=function(e,t,o){o.onunload=function(){n(!1),a(!1)}};return{l:l,complete:n,error:a,submit:p,toggler:pt.toggleProp(!1,!0),unload:m}},view:function(t,o){var r=o.data,n=t.l()?"por favor, aguarde...":r.callToAction;return e(".w-col.w-col-2",[e("button.btn.btn-small.btn-terciary",{onclick:t.toggler.toggle},r.outerLabel),t.toggler()?e(".dropdown-list.card.u-radius.dropdown-list-medium.zindex-10",{config:t.unload},[e("form.w-form",{onsubmit:t.submit},t.complete()?t.error()?[e('.w-form-error[style="display:block;"]',[e("p","Houve um problema na requisição.")])]:[e('.w-form-done[style="display:block;"]',[e("p","Requisição feita com sucesso.")])]:[e("label",r.innerLabel),e('input.w-button.btn.btn-small[type="submit"][value="'+n+'"]')])]):""])}},Vt={view:function(t,o){var r=o.contribution;return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Detalhes do apoio"),e(".fontsize-smallest.lineheight-looser",["Valor: R$"+pt.formatNumber(r.value,2,3),e("br"),"Taxa: R$"+pt.formatNumber(r.gateway_fee,2,3),e("br"),"Aguardando Confirmação: "+(r.waiting_payment?"Sim":"Não"),e("br"),"Anônimo: "+(r.anonymous?"Sim":"Não"),e("br"),"Id pagamento: "+r.gateway_id,e("br"),"Apoio: "+r.contribution_id,e("br"),"Chave: \n",e("br"),r.key,e("br"),"Meio: "+r.gateway,e("br"),"Operadora: "+(r.gateway_data&&r.gateway_data.acquirer_name),e("br"),r.is_second_slip?[e('a.link-hidden[href="#"]',"Boleto bancário")," ",e("span.badge","2a via")]:""])])}},Bt={controller:function(e){var t=e.contribution,r=o.reduce([{date:t.paid_at,name:"Apoio confirmado"},{date:t.pending_refund_at,name:"Reembolso solicitado"},{date:t.refunded_at,name:"Estorno realizado"},{date:t.created_at,name:"Apoio criado"},{date:t.refused_at,name:"Apoio cancelado"},{date:t.deleted_at,name:"Apoio excluído"},{date:t.chargeback_at,name:"Chargeback"}],function(e,t){return null!==t.date&&void 0!==t.date?(t.originalDate=t.date,t.date=pt.momentify(t.date,"DD/MM/YYYY, HH:mm"),e.concat(t)):e},[]);return{orderedEvents:o.sortBy(r,"originalDate")}},view:function(t){return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Histórico da transação"),t.orderedEvents.map(function(t){return e(".w-row.fontsize-smallest.lineheight-looser.date-event",[e(".w-col.w-col-6",[e(".fontcolor-secondary",t.date)]),e(".w-col.w-col-6",[e("div",t.name)])])})])}},Lt={controller:function(t){var o=void 0,r=function(){var r=e.prop({});if(t.contribution.shipping_fee_id){var n=c.shippingFee.getRowOptions(pt.idVM.id(t.contribution.shipping_fee_id).parameters());o=a.loaderWithToken(n),o.load().then(_.compose(r,_.first))}return r};return{shippingFee:r()}},view:function(t,o){var r=o.reward(),n=o.contribution,a=parseInt(r.paid_count)+parseInt(r.waiting_payment_count),i=t.shippingFee();return e(".w-col.w-col-4",[e(".fontweight-semibold.fontsize-smaller.lineheight-tighter.u-marginbottom-20","Recompensa"),e(".fontsize-smallest.lineheight-looser",r.id?["ID: "+r.id,e("br"),"Local de entrega: "+(i.destination?i.destination+" R$ "+i.value:"Nenhum"),e("br"),"Envio: "+I18n.t("shared.shipping_options."+r.shipping_options),e("br"),"Valor mínimo: R$"+pt.formatNumber(r.minimum_value,2,3),e("br"),e.trust("Disponíveis: "+a+" / "+(r.maximum_contributions||"&infin;")),e("br"),"Aguardando confirmação: "+r.waiting_payment_count,e("br"),"Estimativa da Entrega: "+pt.momentify(r.deliver_at),e("br"),e("div",["Status da Entrega: ",pt.contributionStatusBadge(n)]),"Descrição: "+r.description]:"Apoio sem recompensa")])}},Ut={controller:function(t){var r=void 0,n=function(){var n=c.rewardDetail,i=t.item.reward_id,s=n.getRowOptions(pt.idVM.id(i).parameters()),l=e.prop({});return r=a.loaderWithToken(s),i&&r.load().then(o.compose(l,o.first)),l};return{reward:n(),actions:{transfer:{property:"user_id",updateKey:"id",callToAction:"Transferir",innerLabel:"Id do novo apoiador:",outerLabel:"Transferir Apoio",placeholder:"ex: 129908",successMessage:"Apoio transferido com sucesso!",errorMessage:"O apoio não foi transferido!",model:c.contributionDetail},reward:{getKey:"project_id",updateKey:"contribution_id",selectKey:"reward_id",radios:"rewards",callToAction:"Alterar Recompensa",outerLabel:"Recompensa",getModel:c.rewardDetail,updateModel:c.contributionDetail,selectedItem:n(),addEmpty:{id:-1,minimum_value:10,description:"Sem recompensa"},validate:function(e,r){var n=o.findWhere(e,{id:r});return t.item.value>=n.minimum_value?void 0:"Valor mínimo da recompensa é maior do que o valor da contribuição."}},refund:{updateKey:"id",callToAction:"Reembolso direto",innerLabel:"Tem certeza que deseja reembolsar esse apoio?",outerLabel:"Reembolsar Apoio",model:c.contributionDetail},remove:{property:"state",updateKey:"id",callToAction:"Apagar",innerLabel:"Tem certeza que deseja apagar esse apoio?",outerLabel:"Apagar Apoio",forceValue:"deleted",successMessage:"Apoio removido com sucesso!",errorMessage:"O apoio não foi removido!",model:c.contributionDetail}},l:r}},view:function(t,r){var n=t.actions,a=r.item,i=t.reward,s=function(e,t){return o.extend({},e,{requestOptions:{url:"/admin/contributions/"+t+"/gateway_refund",method:"PUT"}})};return e("#admin-contribution-detail-box",[e(".divider.u-margintop-20.u-marginbottom-20"),e(".w-row.u-marginbottom-30",[e.component(kt,{data:n.transfer,item:a}),t.l()?pt.loader:e.component(It,{data:n.reward,item:i,getKeyValue:a.project_id,updateKeyValue:a.contribution_id}),e.component(Nt,{data:s(n.refund,a.id),item:a}),e.component(kt,{data:n.remove,item:a})]),e(".w-row.card.card-terciary.u-radius",[e.component(Vt,{contribution:a}),e.component(Bt,{contribution:a}),t.l()?pt.loader:e.component(Lt,{reward:i,contribution:a,key:a.key})])])}},Yt={view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}},Ht={view:function(t,o){return e(".w-col.w-col-3.w-col-small-6",[e('label.fontsize-smaller[for="'+o.index+'"]',o.label),e(".w-row",[e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[id="'+o.index+'"][type="text"]',{onchange:e.withAttr("value",o.first),value:o.first()})]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e(".fontsize-smaller.u-text-center.lineheight-looser","e")]),e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5",[e('input.w-input.text-field.positive[type="text"]',{onchange:e.withAttr("value",o.last),value:o.last()})])])])}},Wt={controller:function(){var t=Pt,o=Mt,r=e.prop(""),n=[{component:bt,data:{vm:o.full_text_index,placeholder:"Busque por projeto, email, Ids do usuário e do apoio..."}},{component:Et,data:{label:"Status da entrega",name:"delivery_status",vm:o.delivery_status,options:[{value:"",option:"Qualquer um"},{value:"delivered",option:"delivered"},{value:"undelivered",option:"undelivered"},{value:"error",option:"error"},{value:"received",option:"received"}]}},{component:Et,data:{label:"Com o estado",name:"state",vm:o.state,options:[{value:"",option:"Qualquer um"},{value:"paid",option:"paid"},{value:"refused",option:"refused"},{value:"pending",option:"pending"},{value:"pending_refund",option:"pending_refund"},{value:"refunded",option:"refunded"},{value:"chargeback",option:"chargeback"},{value:"deleted",option:"deleted"}]}},{component:Et,data:{label:"gateway",name:"gateway",vm:o.gateway,options:[{value:"",option:"Qualquer um"},{value:"Pagarme",option:"Pagarme"},{value:"MoIP",option:"MoIP"},{value:"PayPal",option:"PayPal"},{value:"Credits",option:"Créditos"}]}},{component:Yt,data:{label:"Valores entre",first:o.value.gte,last:o.value.lte}},{component:Ht,data:{label:"Período do apoio",first:o.created_at.gte,last:o.created_at.lte}}],a=function(){return r(!1),t.firstPage(o.parameters()).then(null,function(e){r(e.message)}),!1};return{filterVM:o,filterBuilder:n,listVM:{list:t,error:r},data:{label:"Apoios"},submit:a}},view:function(t){return[e.component(gt,{form:t.filterVM.formDescriber,filterBuilder:t.filterBuilder,submit:t.submit}),e.component(_t,{vm:t.listVM,listItem:Ot,listDetail:Ut})]}},$t={controller:function(t){var o=(t.builder,e.prop("")),r=e.prop(!1),n=function(){return!!pt.validateEmail(o())||(r(!0),!1)};return{email:o,submit:n,error:r}},view:function(t,o){var r=t.error?"":".positive.error";return e('form.w-form[id="email-form"][method="post"][action="'+o.builder.customAction+'"]',{onsubmit:t.submit},[e(".w-col.w-col-5",[e("input"+r+'.w-input.text-field.medium[name="EMAIL"][placeholder="Digite seu email"][type="text"]',{config:pt.RDTracker("landing-flex"),onchange:e.withAttr("value",t.email),value:t.email()}),t.error()?e("span.fontsize-smaller.text-error","E-mail inválido"):""]),e(".w-col.w-col-3",[e('input.w-button.btn.btn-large[type="submit"][value="Cadastrar"]')])])}},Jt=e.prop(""),Xt=e.prop([]),Kt=e.prop([]),Gt=e.prop([]),Qt={id:-1,description:"Obrigado. Eu só quero ajudar o projeto.",minimum_value:10},Zt=e.prop(Qt.minimum_value+",00"),eo=e.prop(Qt),to=a.filtersVM({project_id:"eq"}),oo=function(e){return to.project_id(e),a.loaderWithToken(c.rewardDetail.getPageOptions(to.parameters()))},ro=function(e){return oo(e).load().then(Xt)},no=function(e){var t=a.filtersVM({reward_id:"eq"});t.reward_id(e.id);var o=a.loader(c.shippingFee.getPageOptions(t.parameters()));return o.load()},ao=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-contribution");if(o){var r=JSON.parse(o);return eo(r.reward),e.redraw(!0),eo}return!1},io=function(e){return function(){eo()!==e&&(Jt(""),eo(e),Zt(pt.applyMonetaryMask(e.minimum_value+",00")),e.id&&no(e).then(Gt))}},so=o.compose(Zt,pt.applyMonetaryMask),lo=a.loader(c.state.getPageOptions()),co=function(){return lo.load().then(Kt),Kt},uo=function(t,r){var n=e.prop([]),a=o.map(Kt(),function(e){var t=void 0,r=o.findWhere(Gt(),{destination:e.acronym}),n=o.findWhere(Gt(),{destination:"others"});return r?t=r.value:n&&(t=n.value),{name:e.name,value:e.acronym,fee:t}});if("national"===t.shipping_options)n(a);else if("international"===t.shipping_options){var i=void 0,s=o.findWhere(Gt(),{destination:"international"});s&&(i=s.value),n(o.union([{value:"international",name:"Outside Brazil",fee:i}],a))}return n(o.union([{value:"",name:"Selecione Opção",fee:0}],n())),n()},po=function(e){var t=o.findWhere(Gt(),{destination:e()});return!t&&o.findWhere(Kt(),{acronym:e()})&&(t=o.findWhere(Gt(),{destination:"others"})),t},mo=function(e,t,o){return o.is_admin||"draft"===t||"online"===t&&e.paid_count<=0&&e.waiting_payment_count<=0},fo=function(e){return"draft"===e||"online"===e},wo=function(e){return!(o.isNull(e.shipping_options)||"free"===e.shipping_options||"presential"===e.shipping_options)},bo={canEdit:mo,canAdd:fo,error:Jt,getStates:co,getFees:no,fees:Gt,rewards:Xt,applyMask:so,noReward:Qt,fetchRewards:ro,selectReward:io,getSelectedReward:ao,selectedReward:eo,contributionValue:Zt,rewardsLoader:oo,locationOptions:uo,shippingFeeForCurrentReward:po,statesLoader:lo,getValue:Zt,setValue:Zt,hasShippingOptions:wo},go=function(){var e=a.filtersVM,t=e({state:"eq"}).state("online"),o=e({near_me:"eq",open_for_contributions:"eq"}).open_for_contributions("true").near_me(!0),n=e({expires_at:"lte",open_for_contributions:"eq"}).open_for_contributions("true").expires_at(r().add(14,"days").format("YYYY-MM-DD")),i=e({online_date:"gte",open_for_contributions:"eq"}).open_for_contributions("true").online_date(r().subtract(5,"days").format("YYYY-MM-DD")),s=e({score:"gte",open_for_contributions:"eq"}).score("1").open_for_contributions("true"),l=e({open_for_contributions:"eq"}).open_for_contributions("true"),c=e({open_for_contributions:"eq",contributed_by_friends:"eq"}).open_for_contributions("true").contributed_by_friends(!0),d=e({state:"eq"}).state("successful"),u=e({}),p={all:{title:"Todas as Categorias",filter:t,nicename:"No ar",isContextual:!1,keyName:"all"},score:{title:"Todas as Categorias",filter:s,nicename:"Populares",isContextual:!1,keyName:"score"},contributed_by_friends:{title:"Amigos",filter:c,nicename:"Amigos",isContextual:!1,keyName:"contributed_by_friends"},online:{title:"No ar",filter:l,isContextual:!1,keyName:"online"},expiring:{title:"Reta final",filter:n,isContextual:!1,keyName:"expiring"},successful:{title:"Todas as Categorias",filter:d,nicename:"Financiados",isContextual:!1,keyName:"successful"},finished:{title:"Todas as Categorias",filter:u,nicename:"Finalizados",isContextual:!1,keyName:"finished"},recent:{title:"Recentes",filter:i,isContextual:!1,keyName:"recent"},near_me:{title:"Próximos a mim",filter:o,isContextual:!1,keyName:"near_me"}},m=function(e){return _.map(e,function(e){return p[e].isContextual=!0}),p},f=function(){return _.filter(p,function(e){return e.isContextual})},w=function(e){return p[e.keyName].isContextual=!1,p};return{filters:p,setContextFilters:m,getContextFilters:f,removeContextFilter:w}},ho=pt.idVM,_o=e.prop({}),vo=a.filtersVM({project_user_id:"eq"}),yo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3;vo.project_user_id(e).order({project_id:"desc"}),c.project.pageSize(t);var o=a.loaderWithToken(c.project.getPageOptions(vo.parameters()));return o.load()},jo=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=a.filtersVM({user_id:"eq"});o.user_id(e),c.contributor.pageSize(t);var r=a.loaderWithToken(c.contributor.getPageOptions(o.parameters()));return r.load()},ko=function(e){var t=a.filtersVM({user_id:"eq"});t.user_id(e);var o=a.loaderWithToken(c.bankAccount.getPageOptions(t.parameters()));return o.load()},xo=function(e){var t=a.filtersVM({user_id:"eq",without_notification:"eq"});t.user_id(e).without_notification(!0),c.projectReminder;var o=a.loaderWithToken(c.projectReminder.getPageOptions(t.parameters()));return o.load()},zo=function(e){var t=a.filtersVM({user_id:"eq"});t.user_id(e),c.userCreditCard.pageSize(!1);var o=a.loaderWithToken(c.userCreditCard.getPageOptions(t.parameters()));return o.load()},Co=function(t,o){return e.request({method:"GET",config:pt.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/toggle_delivery"})},Eo=function(t,o){return e.request({method:"GET",config:pt.setCsrfToken,url:"/projects/"+t+"/contributions/"+o.contribution_id+"/toggle_anonymous"})},So=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,o=a.filtersVM({user_id:"eq",state:"in"});o.user_id(e).order({created_at:"desc"}).state(["refunded","pending_refund","paid"]),c.userContribution.pageSize(t);var r=a.loaderWithToken(c.userContribution.getPageOptions(o.parameters()));return r.load()},Po=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:_o;ho.id(e);var n=a.loaderWithToken(c.userDetail.getRowOptions(ho.parameters()));return t?n.load().then(o.compose(r,o.first)):n.load()},Mo=function(){return Po(pt.getUserID()),_o},Ao=function(e){var t=e||{name:"no name"};return o.isEmpty(t.public_name)?t.name:t.public_name},To=function(e){var t="https://catarse.me/assets/catarse_bootstrap/user.jpg";return e?e.profile_img_thumbnail||t:t},Do=function(e){return e?e.profile_cover_image||To(e):To(e)},qo=function(t){var r=o.partial(o.sample,o,3),n=e.prop([]),i=e.prop([]),s=pt.getUser(),l=s.user_id,d=function(){return o.reduce(n(),function(e,t){var r=o.isFunction(e)?e():e,n=o.isFunction(t)?t():t;return r&&n},!0)},u=function(){var e=go().filters,t=a.loaderWithToken(c.project.getPageOptions(o.extend({},{order:"score.desc"},e.score.filter.parameters())));n().push(t),t.load().then(o.compose(i,r))},p=function(e){var t=e.project_id,r=a.loaderWithToken(c.project.getPageOptions(a.filtersVM({project_id:"eq"}).project_id(t).parameters()));n().push(r),r.load().then(function(e){i().push(o.first(e))})},m=a.loaderWithToken(c.recommendedProjects.getPageOptions(a.filtersVM({user_id:"eq"}).user_id(l).parameters()));return m.load().then(function(e){e.length>0?o.map(e,p):u()}),{loader:d,collection:i}},Ro={getUserCreatedProjects:yo,getUserCreditCards:zo,toggleDelivery:Co,toggleAnonymous:Eo,getUserProjectReminders:xo,getUserRecommendedProjects:qo,getUserContributedProjects:So,getUserBankAccount:ko,getPublicUserContributedProjects:jo,displayImage:To,displayCover:Do,displayName:Ao,fetchUser:Po,getCurrentUser:Mo},Fo=e.prop(),Oo=e.prop(),Io=e.prop([]),No=a.filtersVM({project_id:"eq"}),Vo=pt.idVM,Bo=function(e){return function(t){return Fo(o.first(t)),e||Ro.fetchUser(Fo().user_id,!0,Oo),Fo}},Lo=function(e,t){No.project_id(e);var o=a.loaderWithToken(c.projectDetail.getRowOptions(No.parameters()));return Yo(e,t),o.load().then(Bo(t))},Uo=function(){Oo({}),bo.rewards([])},Yo=function(e,t){t&&Ro.fetchUser(t,!0,Oo),bo.fetchRewards(e)},Ho=function(){var t=document.getElementById("application"),o=t&&t.getAttribute("data-parameters");if(o){var r=Fo(JSON.parse(o)),n=r.project_id,a=r.project_user_id;return e.redraw(!0),Lo(n,a),Fo()}return!1},Wo=function(t,o){return function(){return Fo(t),Uo(),e.route(pt.buildLink(t.permalink,o),{project_id:t.project_id,project_user_id:t.project_user_id}),!1}},$o=function(){if(Fo()){var e=Fo().project_name||Fo().name;return e?pt.setPageTitle(e):Function.prototype}},Jo=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Fo;Vo.id(e);var n=a.loaderWithToken(c.projectDetail.getRowOptions(Vo.parameters()));return t?n.load().then(o.compose(r,o.first)):n.load()},Xo=function(t,o){return e.request({method:"PUT",url:"/projects/"+t+".json",data:{project:o},config:pt.setCsrfToken})},Ko={userDetails:Oo,getCurrentProject:Ho,projectContributions:Io,currentProject:Fo,rewardDetails:bo.rewards,routeToProject:Wo,setProjectPageTitle:$o,init:Lo,fetchProject:Jo,updateProject:Xo},Go={controller:function(t){var r=t.project,n=e.prop([]),i=a.paginationVM(c.contributor,"user_id.desc",{Prefer:"count=exact"}),s=a.filtersVM({project_id:"eq",is_follow:"eq"}).project_id(r.project_id).is_follow(!0);return i.collection().length||i.firstPage(s.parameters()).then(function(){n(o.sample(i.collection(),2))}),{project:r,listVM:i,friendsSample:n}},view:function(t,r){var n=(t.project,t.listVM.collection().length),a=r.wrapper||".friend-backed-card";return e(a,[e(".friend-facepile",[o.map(t.friendsSample(),function(t){var r=o.isEmpty(t.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":t.data.profile_img_thumbnail;return e("img.user-avatar[src='"+r+"']")})]),e("p.fontsize-smallest.friend-namepile.lineheight-tighter",[e("span.fontweight-semibold",o.map(t.friendsSample(),function(e){return e.data.name.split(" ")[0]}).join(n>2?", ":" e ")),n>2?[" e ",e("span.fontweight-semibold","mais "+(n-t.friendsSample().length))]:"",n>1?" apoiaram":" apoiou"])])}},Qo=o.partial(pt.i18nScope,"projects.card"),Zo={controller:function(t){var r=t.project,n=r.progress.toFixed(2),a=pt.translatedTime(r.remaining_time),i=pt.translatedTime(r.elapsed_time),s=t.type||"small",l=function(){var e={small:{wrapper:".w-col.w-col-4",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb",descriptionWrapper:"",description:".card-project-description.alt",title:".fontweight-semibold.u-text-center-small-only.lineheight-tight.u-marginbottom-10.fontsize-base",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},medium:{wrapper:".w-col.w-col-6",innerWrapper:".card-project.card.u-radius",thumb:".card-project-thumb.medium",descriptionWrapper:"",description:".card-project-description.alt",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".w-hidden-small.w-hidden-tiny.fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".w-hidden-small.w-hidden-tiny.fontcolor-secondary.fontsize-smaller",city:".w-hidden-small.w-hidden-tiny.card-project-author.altt"},big:{wrapper:".card.u-radius.card-project",innerWrapper:".w-row",thumb:".w-col.w-col-8.w-col-medium-6.card-project-thumb.big",descriptionWrapper:".w-col.w-col-4.w-col-medium-6",description:".card-project-description.big",title:".fontsize-large.fontweight-semibold.u-marginbottom-10",author:".fontsize-smallest.fontcolor-secondary.u-marginbottom-20",headline:".fontcolor-secondary.fontsize-smaller",city:".w-hidden"}};return e[s]},c=function(){var e=function(){return"failed"===r.state||"waiting_funds"===r.state?"card-secondary":""};return".card-project-meter."+r.mode+"."+r.state+"."+(n>100?"complete":"incomplete")+"."+e()},d=function(e){return o.contains(["successful","failed","waiting_funds"],e.state)},u=function(t){return t.expires_at?d(t)?[e(".fontsize-smaller.fontweight-loose","Encerrado"),e(".fontsize-smallest.lineheight-tightest",pt.momentify(t.expires_at))]:[e(".fontsize-smaller.fontweight-semibold",a.total+" "+a.unit),e(".fontsize-smallest.lineheight-tightest",a.total>1?"Restantes":"Restante")]:[e(".fontsize-smallest.lineheight-tight",["Iniciado há",e("br"),i.total+" "+i.unit])]};return{cardCopy:u,css:l,type:s,progress:n,remainingTextObj:a,elapsedTextObj:i,isFinished:d,cardMeter:c}},view:function(o,r){var n=r.project,a=n.user?n.user.public_name||n.user.name:n.owner_public_name||n.owner_name,i=n.address?n.address.city+" - "+n.address.state_acronym:n.city_name+" - "+n.state_acronym;return e(o.css().wrapper,[e(o.css().innerWrapper,[e("a"+o.css().thumb+'[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:Ko.routeToProject(n,r.ref),style:{"background-image":"url("+(n.project_img||n.large_image)+")",display:"block"}}),e(o.css().descriptionWrapper,[e(o.css().description,[e(o.css().title,[e('a.link-hidden[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:Ko.routeToProject(n,r.ref)},n.project_name||n.name)]),e(o.css().author,t.t("by",Qo())+" "+a),e(o.css().headline,[e('a.link-hidden[href="/'+n.permalink+"?ref="+r.ref+'"]',{onclick:Ko.routeToProject(n,r.ref)},n.headline)])]),e(o.css().city,[e(".fontsize-smallest.fontcolor-secondary",[e("span.fa.fa-map-marker.fa-1"," "),i])]),e(o.cardMeter(),[o.isFinished(n)?e("div","successful"===n.state&&o.progress<100?t.t("display_status.flex_successful",Qo()):t.t("display_status."+n.state,Qo())):e(".meter",[e(".meter-fill",{style:{width:(o.progress>100?100:o.progress)+"%"}})])]),e(".card-project-stats",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-base.fontweight-semibold",Math.floor(n.progress)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-center-small-only",[e(".fontsize-smaller.fontweight-semibold","R$ "+pt.formatNumber(n.pledged)),e(".fontsize-smallest.lineheight-tightest","Levantados")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.u-text-right",o.cardCopy(n))])])]),r.showFriends&&"big"===o.type?e(".w-col.w-col-4.w-col-medium-6",[e.component(Go,{project:n})]):""]),r.showFriends&&"big"!==o.type?e.component(Go,{project:n}):""])}},er={view:function(t,r){var n=r.collection,a=r.title||n.title,i=r.ref,s=r.showFriends,l=r.wrapper||".w-section.section.u-marginbottom-40";return n.loader()||n.collection().length>0?e(l,[e(".w-container",[o.isUndefined(n.title)&&o.isUndefined(n.hash)?"":e(".w-row.u-marginbottom-30",[e(s?".w-col.w-col-8.w-col-small-6.w-col-tiny-6":".w-col.w-col-10.w-col-small-6.w-col-tiny-6",[e(".fontsize-large.lineheight-looser",a)]),e(s?".w-col.w-col-4.w-col-small-6.w-col-tiny-6":".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e(".w-row",[s?e(".w-col.w-col-6",[e('a.btn.btn-no-border.btn-small.btn-terciary[href="/connect-facebook?ref='+i+'"]',"Encontrar amigos")]):"",e(s?".w-col.w-col-6":".w-col.w-col-12",e('a.btn.btn-small.btn-terciary[href="/explore?ref='+i+"&filter="+n.hash+'"]',{config:e.route},"Ver todos"))])])]),n.loader()?pt.loader():e(".w-row",o.map(n.collection(),function(t){return e.component(Zo,{project:t,ref:i,showFriends:s})}))])]):e("div")}},tr={controller:function(e){return{showAnswer:pt.toggleProp(!1,!0)}},view:function(t,o){return e(".card.qa-card.u-marginbottom-20.u-radius.btn-terciary",[e(".fontsize-base",{onclick:function(){t.showAnswer.toggle(),o.onclick&&o.onclick()}},o.question),t.showAnswer()?e("p.u-margintop-20.fontsize-small",e.trust(o.answer)):""])}},or={controller:function(){var t=e.prop([]),o=e.prop([]),r=(e.prop(),_.partial(_.sample,_,3)),n={customAction:"http://fazum.catarse.me/obrigado-landing-catarse-flex"},i=function(e,t){t||pt.discuss("https://catarse.me/flex","flex_page")},s=a.filtersVM({mode:"eq",state:"eq",recommended:"eq"}),l=a.loaderWithToken(c.statistic.getRowOptions());s.mode("flex").state("online").recommended(!0);var d=a.loader(c.project.getPageOptions(s.parameters()));return l.load().then(t),d.load().then(_.compose(o,r)),{addDisqus:i,builder:n,statsLoader:l,stats:t,projectsLoader:d,projects:{loader:d,collection:o}}},view:function(t,o){var r=_.first(t.stats());return[e(".w-section.hero-full.hero-zelo",[e(".w-container.u-text-center",[e("img.logo-flex-home[src='/assets/logo-flex.png'][width='359']"),e(".w-row",[e(".w-col.fontsize-large.u-marginbottom-60.w-col-push-2.w-col-8","Vamos construir uma nova modalidade de crowdfunding! Cadastre seu email e saiba como inscrever o seu projeto no flex!")]),e(".w-row",[e(".w-col.w-col-2"),e.component($t,{builder:t.builder}),e(".w-col.w-col-2")])])]),[e(".section",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-text-center","Pra quem será?"),e(".fontsize-base.u-text-center.u-marginbottom-60","Iniciaremos a fase de testes com categorias de projetos específicas"),e("div",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e393a01b66e250aca67cb_icon-zelo-com.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Causas")]),e("p.fontsize-base","Flexibilidade para causas de impacto! Estaremos abertos a campanhas de organizações ou pessoas físicas para arrecadação de recursos para causas pessoais, projetos assistenciais, saúde, ajudas humanitárias, proteção aos animais, empreendedorismo socioambiental, ativismo ou qualquer coisa que una as pessoas para fazer o bem.")]),e(".w-col.w-col-6",[e(".u-text-center.u-marginbottom-20",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e3929a0daea230a5f12cd_icon-zelo-pessoal.png'][width='210']"),e(".fontsize-largest.lineheight-loose","Vaquinhas")]),e("p.fontsize-base","Campanhas simples que precisam de flexibilidade para arrecadar dinheiro com pessoas próximas. Estaremos abertos a uma variedade de campanhas pessoais que podem ir desde cobrir custos de estudos a ajudar quem precisa de tratamento médico. De juntar a grana para fazer aquela festa a comprar presentes para alguém com a ajuda da galera. ")])])])])]),e(".w-section.section.bg-greenlime.fontcolor-negative",[e(".w-container",[e(".fontsize-largest.u-margintop-40.u-marginbottom-60.u-text-center","Como funcionará?"),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39c578b284493e2a428a_zelo-money.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Fique com quanto arrecadar"),e("p.u-text-center.fontsize-base","O flex é para impulsionar campanhas onde todo dinheiro é bem vindo! Você fica com tudo que conseguir arrecadar.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39d37c013d4a3ee687d2_icon-reward.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Não precisa de recompensas"),e("p.u-text-center.fontsize-base","No flex oferecer recompensas é opcional. Você escolhe se oferecê-las faz sentido para o seu projeto e campanha.")])]),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39fb01b66e250aca67e3_icon-curad.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Você mesmo publica seu projeto"),e("p.u-text-center.fontsize-base","Todos os projetos inscritos no flex entram no ar. Agilidade e facilidade para você captar recursos através da internet.")]),e(".w-col.w-col-6",[e(".u-text-center",[e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/560e39e77c013d4a3ee687d4_icon-time.png'][width='180']")]),e(".fontsize-large.u-marginbottom-10.u-text-center.fontweight-semibold","Encerre a campanha quando quiser"),e("p.u-text-center.fontsize-base","Não há limite de tempo de captação. Você escolhe  quando encerrar sua campanha e receber os valores arrecadados.")])])])]),e(".w-section.section",[e(".w-container",[e(".w-editable.fontsize-larger.u-margintop-40.u-margin-bottom-40.u-text-center","Conheça alguns dos primeiros projetos flex"),t.projectsLoader()?pt.loader():e.component(er,{collection:t.projects,ref:"ctrse_flex",wrapper:".w-row.u-margintop-40"})])]),e(".w-section.divider"),e(".w-section.section",[e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40","Dúvidas"),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",[e.component(tr,{question:"Quais são as taxas da modalidade flexível? ",answer:"Como no Catarse, enviar um projeto não custa nada! A taxa cobrada no serviço Catarse flex é de 13% sobre o valor arrecadado."}),e.component(tr,{question:"De onde vem o dinheiro do meu projeto?",
answer:"Família, amigos, fãs e membros de comunidades que você faz parte são seus maiores colaboradores. São eles que irão divulgar sua campanha para as pessoas que eles conhecem, e assim o círculo de apoiadores vai aumentando e a sua campanha ganha força."}),e.component(tr,{question:'Qual a diferença entre o flexível e o "tudo ou nada"?',answer:'Atualmente o Catarse utiliza apenas o modelo "tudo ou nada", onde você só fica com o dinheiro se bater a meta de arrecadação dentro do prazo da campanha. O modelo flexível é diferente pois permite que o realizador fique com o que arrecadar, independente de atingir ou não a meta do projeto no prazo da campanha. Não haverá limite de tempo para as campanhas. Nosso sistema flexível será algo novo em relação aos modelos que existem atualmente no mercado.'})]),e(".w-col.w-col-6",[e.component(tr,{question:"Posso inscrever projetos para a modalidade flexível já?",answer:"Sim. Cadastre seu email e saiba como inscrever o seu projeto no flex!"}),e.component(tr,{question:"Por quê vocês querem fazer o Catarse flex?",answer:"Acreditamos que o ambiente do crowdfunding brasileiro ainda tem espaço para muitas ações, testes e experimentações para entender de fato o que as pessoas precisam. Sonhamos com tornar o financiamento coletivo um hábito no Brasil. O Catarse flex é mais um passo nessa direção."}),e.component(tr,{question:"Quando vocês irão lançar o Catarse flex?",answer:"Ainda não sabemos quando abriremos o flex para o público em geral, mas você pode cadastrar seu email nessa página e receber um material especial de como inscrever seu projeto."})])])])]),e(".w-section.section-large.u-text-center.bg-purple",[e(".w-container.fontcolor-negative",[e(".fontsize-largest","Inscreva seu projeto!"),e(".fontsize-base.u-marginbottom-60","Cadastre seu email e saiba como inscrever o seu projeto no flex!"),e(".w-row",[e(".w-col.w-col-2"),e.component($t,{builder:t.builder}),e(".w-col.w-col-2")])])]),e('.w-section.section-one-column.bg-catarse-zelo.section-large[style="min-height: 50vh;"]',[e(".w-container.u-text-center",[e(".w-editable.u-marginbottom-40.fontsize-larger.lineheight-tight.fontcolor-negative","O flex é um experimento e iniciativa do Catarse, maior plataforma de crowdfunding do Brasil."),e(".w-row.u-text-center",t.statsLoader()?pt.loader():[e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",pt.formatNumber(r.total_contributors,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","Pessoas ja apoiaram pelo menos 01 projeto no Catarse")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",pt.formatNumber(r.total_projects_success,0,3)),e("p.start-stats.fontsize-base.fontcolor-negative","Projetos ja foram financiados no Catarse")]),e(".w-col.w-col-4",[e(".fontsize-jumbo.text-success.lineheight-loose",r.total_contributed.toString().slice(0,2)+" milhões"),e("p.start-stats.fontsize-base.fontcolor-negative","Foram investidos em ideias publicadas no Catarse")])])])]),e(".w-section.section.bg-blue-one.fontcolor-negative",[e(".w-container",[e(".fontsize-large.u-text-center.u-marginbottom-20","Recomende o Catarse flex para amigos! "),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f66e05eb6144171d8edb_facebook-xxl.png']"),e('a.w-button.btn.btn-large.btn-fb[href="http://www.facebook.com/sharer/sharer.php?u=https://www.catarse.me/flex?ref=facebook&title='+encodeURIComponent("Conheça o novo Catarse Flex!")+'"][target="_blank"]',"Compartilhar")])]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("div",[e("img.icon-share-mobile[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/53a3f65105eb6144171d8eda_twitter-256.png']"),e('a.w-button.btn.btn-large.btn-tweet[href="https://twitter.com/intent/tweet?text='+encodeURIComponent("Vamos construir uma nova modalidade de crowdfunding para o Catarse! Junte-se a nós, inscreva seu email!")+'https://www.catarse.me/flex?ref=twitter"][target="_blank"]',"Tuitar")])])])]),e(".w-col.w-col-2")])])]),e(".w-section.section-large.bg-greenlime",[e(".w-container",[e("#participe-do-debate.u-text-center",{config:pt.toAnchor()},[e("h1.fontsize-largest.fontcolor-negative","Construa o flex conosco"),e(".fontsize-base.u-marginbottom-60.fontcolor-negative","Inicie uma conversa, pergunte, comente, critique e faça sugestões!")]),e('#disqus_thread.card.u-radius[style="min-height: 50vh;"]',{config:t.addDisqus})])])]]}},rr={controller:function(t){var o=(e.prop(0),e.prop(t.width||280)),r=e.prop(0),n=e.prop(0),a=e.prop(0),i=e.prop({top:0,left:0}),s=pt.toggleProp(0,1),l=function(){s.toggle(),e.redraw()},c=function(e,t){t||i(pt.cumulativeOffset(e))},d=function(e,t){if(!t){var o=e.offsetHeight+e.offsetParent.offsetHeight,a=window.getComputedStyle(e);window.innerWidth<e.offsetWidth+2*parseFloat(a.paddingLeft)+30?(e.style.width=window.innerWidth-30,n(-i().left+15)):i().left+e.offsetWidth/2<=window.innerWidth&&i().left-e.offsetWidth/2>=0?n(-e.offsetWidth/2):i().left+e.offsetWidth/2>window.innerWidth?n(-e.offsetWidth+e.offsetParent.offsetWidth):i().left-e.offsetWidth/2<0&&n(-e.offsetParent.offsetWidth),r(-o)}};return{width:o,top:r,left:n,opacity:a,tooltip:s,toggle:l,setPosition:d,setParentPosition:c}},view:function(t,o){var r=t.width();return e(o.el,{onclick:t.toggle,config:t.setParentPosition,style:{cursor:"pointer"}},t.tooltip()?[e('.tooltip.dark[style="width: '+r+"px; top: "+t.top()+"px; left: "+t.left()+'px;"]',{config:t.setPosition},[e(".fontsize-smallest",o.text)])]:"")}},nr=o.partial(pt.i18nScope,"projects.dashboard_nav"),ar=o.partial(pt.i18nScope,"projects.dashboard_nav_links"),ir={controller:function(e){var t=document.getElementsByTagName("body")[0],r=pt.toggleProp(!0,!1),n=pt.toggleProp(!0,!1),a=pt.toggleProp("body-project open","body-project closed"),i=function(e){return o.isEmpty(e.large_image)?o.isEmpty(e.thumb_image)?"/assets/thumb-project.png":e.thumb_image:e.large_image};return e.project().is_published&&r.toggle(!1),e.hidePublish&&n.toggle(!1),{body:t,editLinksToggle:r,showPublish:n,bodyToggleForNav:a,projectThumb:i}},view:function(r,n){var a=n.project(),i="/projects/"+a.project_id,s=i+"/edit",l="dashboard-nav-link-left "+(a.is_published?"indent":""),c=e("span.fontsize-smallest.fontcolor-secondary"," (opcional)");return r.body.className=r.bodyToggleForNav(),e("#project-nav",[e(".project-nav-wrapper",[e("nav.w-section.dashboard-nav.side",[e('a#dashboard_preview_link.w-inline-block.dashboard-project-name[href="'+(a.is_published?"/"+a.permalink:s+"#preview")+'"]',[e('img.thumb-project-dashboard[src="'+(a?r.projectThumb(a):"/assets/thumb-project.png")+'"][width="114"]'),e(".fontcolor-negative.lineheight-tight.fontsize-small",a.name),e('img.u-margintop-10[src="/assets/catarse_bootstrap/badge-'+a.mode+'-h.png"][width=80]')]),e("#info-links",[e('a#dashboard_home_link[class="dashboard-nav-link-left '+(pt.locationActionMatch("insights")?"selected":"")+'"][href="'+i+'/insights"]',[e("span.fa.fa-bar-chart.fa-lg.fa-fw"),t.t("start_tab",nr())]),a.is_published?[e('a#dashboard_reports_link[class="dashboard-nav-link-left '+(pt.locationActionMatch("contributions_report")?"selected":"")+'"][href="'+i+'/contributions_report"]',[e("span.fa.fa.fa-table.fa-lg.fa-fw"),t.t("reports_tab",nr())]),e('a#dashboard_reports_link[class="dashboard-nav-link-left '+(pt.locationActionMatch("posts")?"selected":"")+'"][href="'+i+'/posts"]',[e("span.fa.fa-bullhorn.fa-fw.fa-lg"),t.t("posts_tab",nr()),a.posts_count>0?e("span.badge",a.posts_count):e("span.badge.badge-attention","Nenhuma")])]:""]),e(".edit-project-div",[a.is_published?e("button#toggle-edit-menu.dashboard-nav-link-left",{onclick:r.editLinksToggle.toggle},[e("span.fa.fa-pencil.fa-fw.fa-lg"),t.t("edit_project",nr())]):"",r.editLinksToggle()?e("#edit-menu-items",[e("#dashboard-links",[!a.is_published||a.is_admin_role?[e('a#basics_link[class="'+l+'"][href="'+s+'#basics"]',t.t(a.mode+".basics_tab",ar())),e('a#goal_link[class="'+l+'"][href="'+s+'#goal"]',t.t(a.mode+".goal_tab",ar()))]:"",e('a#description_link[class="'+l+'"][href="'+s+'#description"]',t.t(a.mode+".description_tab",ar())),e('a#video_link[class="'+l+'"][href="'+s+'#video"]',["Vídeo",e("span.fontsize-smallest.fontcolor-secondary"," (opcional)")]),e('a#budget_link[class="'+l+'"][href="'+s+'#budget"]',t.t(a.mode+".budget_tab",ar())),e('a#card_link[class="'+l+'"][href="'+s+'#card"]',t.t(a.mode+".card_tab",ar())),e('a#dashboard_reward_link[class="'+l+'"][href="'+s+'#reward"]',["Recompensas",c]),e('a#dashboard_user_about_link[class="'+l+'"][href="'+s+'#user_about"]',t.t(a.mode+".about_you_tab",ar())),a.is_published||"draft"===a.state||a.is_admin_role?[e('a#dashboard_user_settings_link[class="'+l+'"][href="'+s+'#user_settings"]',t.t(a.mode+".account_tab",ar()))]:"",a.is_published?"":[e('a#dashboard_preview_link[class="'+l+'"][href="'+s+'#preview"]',[e("span.fa.fa-fw.fa-eye.fa-lg"),t.t(a.mode+".preview_tab",ar())])]])]):"",!a.is_published&&r.showPublish()?[e(".btn-send-draft-fixed","aon"===a.mode?["draft"===a.state?e('a.btn.btn-medium[href="/projects/'+a.project_id+'/validate_publish"]',[t.t("publish",nr()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""]:["draft"===a.state?e('a.btn.btn-medium[href="/flexible_projects/'+a.project_id+'/validate_publish"]',[t.t("publish",nr()),e.trust("&nbsp;&nbsp;"),e("span.fa.fa-chevron-right")]):""])]:["flex"===a.mode&&a.is_published?[e(".btn-send-draft-fixed",o.isNull(a.expires_at)?e('a.w-button.btn.btn-medium.btn-secondary-dark[href="/projects/'+a.project_id+'/edit#announce_expiration"]',t.t("announce_expiration",nr())):"")]:""]])])]),e('a.btn-dashboard href="javascript:void(0);"',{onclick:r.bodyToggleForNav.toggle},[e("span.fa.fa-bars.fa-lg")])])}},sr={view:function(t,o){return e(".modal-backdrop",[e(".modal-dialog-outer",[e(".modal-dialog-inner.modal-dialog-small",[e("a.w-inline-block.fa.fa-lg.modal-close"+(o.hideCloseButton?"":".fa-close")+'[href="javascript:void(0);"]',{onclick:o.displayModal.toggle}),e.component(o.content[0],o.content[1])])])])}},lr={controller:function(e){var t=e.resource,o=function(){return!_.isNull(t.expires_at)&&r().add(8,"days")>=r(t.zone_expires_at)};return{project:t,remainingTextObj:pt.translatedTime(t.remaining_time),elapsedTextObj:pt.translatedTime(t.elapsed_time),isFinalLap:o}},view:function(t){var o=t.project,r=o.progress.toFixed(2),n=pt.projectStateTextClass(o.state),a=t.remainingTextObj,i=t.elapsedTextObj;return e(".project-details-card.card.u-radius.card-terciary.u-marginbottom-20",[e("div",[e(".fontsize-small.fontweight-semibold",[e("span.fontcolor-secondary","Status:")," ",e("span",{"class":n.cssClass},t.isFinalLap()&&o.open_for_contributions?"RETA FINAL":n.text)," "]),o.is_published?[e(".meter.u-margintop-20.u-marginbottom-10",[e(".meter-fill",{style:{width:(r>100?100:r)+"%"}})]),e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","financiado"),e(".fontweight-semibold.fontsize-large.lineheight-tight",r+"%")]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","levantados"),e(".fontweight-semibold.fontsize-large.lineheight-tight",["R$ "+pt.formatNumber(o.pledged,2)])]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","apoios"),e(".fontweight-semibold.fontsize-large.lineheight-tight",o.total_contributions)]),e(".w-col.w-col-3.w-col-small-3.w-col-tiny-6",[_.isNull(o.expires_at)?[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","iniciado há"),e(".fontweight-semibold.fontsize-large.lineheight-tight",i.total+" "+i.unit)]:[e(".fontcolor-secondary.lineheight-tighter.fontsize-small","restam"),e(".fontweight-semibold.fontsize-large.lineheight-tight",a.total+" "+a.unit)]])])]:""])])}},cr={view:function(t,o){return e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-larger.lineheight-tight","Sua campanha está no ar!!! Parabéns por esse primeiro grande passo. Boa sorte nessa jornada ;)")])}},dr={view:function(t,r){var n=r.project(),a=r.visitorsTotal(),i=pt.projectStateTextClass(n.state),s=pt.translatedTime(n.remaining_time),l=pt.translatedTime(n.elapsed_time);return e("",[e(".w-row.u-marginbottom-60.u-margintop-30.u-text-center",[e(".w-col.w-col-2"),e(".w-col.w-col-4",[e(".fontsize-large",[e("span.fontcolor-secondary","Status: "),e("span",{"class":i.cssClass},i.text)])]),e(".w-col.w-col-4",[e(".fontsize-large.fontweight-semibold",[e("span.fa.fa-clock-o"),o.isNull(n.expires_at)?" Iniciado há "+l.total+" "+l.unit:" "+s.total+" "+s.unit+" "+(s.total>1?"restantes":"restante")])]),e(".w-col.w-col-2")]),e(".card.medium.u-marginbottom-60.u-radius.u-text-center",{style:{"white-space":"nowrap"}},[e(".w-row",[e(".w-col.w-col-6",[e(".w-row.u-marginbottom-30.u-margintop-30",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-larger.fontweight-semibold",""+a),"Visitantes"]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".bg-triangle-funnel.fontcolor-secondary.fontsize-base",pt.formatNumber(n.total_contributors/a*100,2)+"%")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4",[e(".fontsize-larger.fontweight-semibold",""+n.total_contributors),"Apoiadores"])])]),e(".w-col.w-col-6",[e(".w-row.u-marginbottom-30.u-margintop-30",[e(".w-col.w-col-9.w-col-small-6.w-col-tiny-6",[e(".fontsize-larger.fontweight-semibold","R$ "+pt.formatNumber(n.pledged,2)),"Arrecadados"]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e(".fontsize-larger.fontweight-semibold",pt.formatNumber(n.progress,2)+"%"),"da Meta"])])])]),e(".fontcolor-secondary.fontsize-smallest.u-margintop-20",["Os dados podem levar até 12 horas para serem atualizados.",e("a.alt-link",{href:"http://suporte.catarse.me/hc/pt-br/articles/214764343#visitante",target:"_blank"},"Saiba mais"),"."])])])}},ur={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=e.prop(!0),i=e.prop(""),s=e.prop(""),l=function(){if("deletar-rascunho"===s()){var l=c.deleteProject.postOptions({_project_id:t.project.project_id});o=a.loaderWithToken(l),o.load().then(function(){r(!0)})["catch"](function(t){n(!1),i("Erro ao deletar projeto. Por favor tente novamente."),e.redraw()})}else n(!1),i('Por favor, corrija os seguintes erros: para deletar definitivamente o projeto você deverá preencher "deletar-rascunho".');return!1};return{deleteProject:l,confirmed:n,deleteSuccess:r,error:i,check:s}},view:function(t,o){return e("div",t.deleteSuccess()?"":e(".modal-dialog-header",e(".fontsize-large.u-text-center",["Confirmar ",e("span.fa.fa-trash","")])),e("form.modal-dialog-content",{onsubmit:t.deleteProject},t.deleteSuccess()?[e(".fontsize-base.u-margintop-30","Projeto deletado com sucesso. Clique no link abaixo para voltar a página inicial."),e("a.btn.btn-inactive.btn-large.u-margintop-30[href='/pt/users/"+pt.getUser().user_id+"/edit#projects']","Voltar")]:[e(".fontsize-base.u-marginbottom-60",["O projeto será deletado permanentemente e todos os dados que você preencheu na edição do rascunho não poderão ser recuperados."]),e(".fontsize-base.u-marginbottom-10",["Confirme escrevendo ","no campo abaixo ",e("span.fontweight-semibold.text-error","deletar-rascunho")]),e(".w-form",e(".text-error.u-marginbottom-10",t.error()),[e("div",e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!t.confirmed()&&"error",placeholder:"deletar-rascunho",onchange:e.withAttr("value",t.check)}))]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[type='submit'][value='Deletar para sempre']"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayDeleteModal.toggle},"Cancelar")]),e(".w-col.w-col-3")]))]))}},pr={controller:function(e){var t=pt.toggleProp(!1,!0);return{displayDeleteModal:t}},view:function(t,o){return e("div",[t.displayDeleteModal()?e.component(sr,{displayModal:t.displayDeleteModal,hideCloseButton:!0,content:[ur,{displayDeleteModal:t.displayDeleteModal,project:o.project}]}):"",e(".before-footer",e(".w-container",e("a.btn.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button[href='javascript:void(0);']",{onclick:t.displayDeleteModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e.trust("&nbsp;"),"Deletar projeto ",e("span.fa.fa-trash","")])))])}},mr={controller:function(t){var o=e.prop(!1),r=e.prop(""),n=function(){return"cancelar-projeto"===r()?(t.displayModal.toggle(),document.getElementById("send-message").style.display="block"):o(!0),!1};return{showNextModal:n,checkError:o,check:r}},view:function(t,o){return e("form.cancel-project-modal.modal-dialog-content",{onsubmit:t.showNextModal},[e(".fontsize-small.u-marginbottom-20",['Após o cancelamento, sua campanha constará na plataforma como "não financiada" e os seus apoiadores serão imediatamente reembolsados. ',e("span.fontweight-semibold","Essa ação não poderá ser desfeita!"),e("br"),e("span.fontweight-semibold")]),e(".fontsize-small.u-marginbottom-10",["Se você tem certeza que deseja cancelar seu projeto, confirme escrevendo ",e("span.fontweight-semibold.text-error","cancelar-projeto "),"no campo abaixo. Em seguida te pediremos para escrever uma mensagem aos seus apoiadores e seu projeto será então cancelado.",e("span.fontweight-semibold.text-error")]),e(".w-form",[e("input.positive.text-field.u-marginbottom-40.w-input[maxlength='256'][type='text']",{"class":!!t.checkError()&&"error",placeholder:"cancelar-projeto",onchange:e.withAttr("value",t.check)})]),e("div",e(".w-row",[e(".w-col.w-col-3"),e(".u-text-center.w-col.w-col-6",[e("input.btn.btn-inactive.btn-large.u-marginbottom-20[type='submit'][value='Próximo passo >']"),e("a.fontsize-small.link-hidden-light[href='#']",{onclick:o.displayModal.toggle},"Cancelar")]),e(".w-col.w-col-3")]))])}},fr={controller:function(e){var t=pt.toggleProp(!1,!0);return{displayCancelModal:t}},view:function(t,o){return e("div",[t.displayCancelModal()?e.component(sr,{displayModal:t.displayCancelModal,content:[mr,{displayModal:t.displayCancelModal}]}):"",e(".w-row.before-footer",e(".w-col.w-col-12",e(".w-container",e("button.btn.btn-cancel.btn-inline.btn-no-border.btn-small.btn-terciary.u-marginbottom-20.u-right.w-button",{onclick:t.displayCancelModal.toggle,style:{transition:"all 0.5s ease 0s"}},[e("span.fa.fa-times-circle",""),e.trust("&nbsp;"),"Cancelar projeto"]))))])}},wr={controller:function(e){var t=o.first(e.collection()),r=o.isUndefined(t)?[]:t.source,n=function(){return[{fillColor:"rgba(126,194,69,0.2)",strokeColor:"rgba(126,194,69,1)",pointColor:"rgba(126,194,69,1)",pointStrokeColor:"#fff",pointHighlightFill:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:o.map(r,function(t){return t[e.dataKey]})}]},a=function(t,a){if(!a){var i=t.getContext("2d");new l(i).Line({labels:e.xAxis?o.map(r,function(t){return e.xAxis(t)}):[],datasets:n()})}};return{renderChart:a,source:r}},view:function(t,r){return e(".card.u-radius.medium.u-marginbottom-30",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",r.label),e(".w-row",[e(".w-col.w-col-12.overflow-auto",[o.isEmpty(t.source)?e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",r.emptyState)):e('canvas[id="chart"][width="860"][height="300"]',{config:t.renderChart})])])])}},br={controller:function(t){var r=e.prop(t.table),n=e.prop(-1),a=function(e,t){var r=n(),a=o.isArray(e[r])&&e[r].length>1?e[r][0]:e[r],i=o.isArray(t[r])&&t[r].length>1?t[r][0]:t[r];return a<i?-1:i<a?1:0},i=function(e){var t=o.first(r()),i=void 0;n()===e?i=o.rest(r()).reverse():(n(e),i=o.rest(r()).sort(a)),r(o.union([t],i))};return i(Math.abs(t.defaultSortIndex)||0),t.defaultSortIndex<0&&i(Math.abs(t.defaultSortIndex)||0),{table:r,sortTable:i}},view:function(t,r){var n=o.first(t.table()),a=o.rest(t.table());return e(".table-outer.u-marginbottom-60",[e(".w-row.table-row.fontweight-semibold.fontsize-smaller.header",o.map(n,function(o,r){var n=function(){return t.sortTable(r)};return e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e('a.link-hidden[href="javascript:void(0);"]',{onclick:n},[o+" ",e("span.fa.fa-sort")])])})),e(".table-inner.fontsize-small",o.map(a,function(t){return e(".w-row.table-row",o.map(t,function(t){return t=o.isArray(t)&&t.length>1?t[1]:t,e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.table-col",[e("div",t)])}))}))])}},gr={view:function(t,o){var r=o.resource;return e("#project-reminder-count.card.u-radius.u-text-center.medium.u-marginbottom-80",[e(".fontsize-large.fontweight-semibold","Total de pessoas que clicaram no botão Lembrar-me"),e(".fontsize-smaller.u-marginbottom-30","Um lembrete por email é enviado 48 horas antes do término da sua campanha"),e(".fontsize-jumbo",r.reminder_count)])}},hr={controller:function(e){var t=e.dataToRedraw||{},r=function(e,r,n){r||o.map(e.children,function(e){var o=t[e.getAttribute("id")];o&&(e[o.action]=o.actionSource)})};return{listenToReplace:r}},view:function(t,o){var r=o.content;return e(".w-container",[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6.w-col-push-3",[e(".u-text-center",[e("img.u-marginbottom-20",{src:r.icon,width:94}),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",r.title),e(".fontsize-base.u-marginbottom-30",{config:t.listenToReplace},e.trust(r.text)),r.cta?e("a.btn.btn-large.btn-inline",{href:r.href,onclick:o.nextStage},r.cta):""])])])])}},_r=o.partial(pt.i18nScope,"projects.successful_onboard.confirm_account"),vr={view:function(o,r){return e(".w-row.bank-transfer-answer",[e(".w-col.w-col-6.w-col-push-3",[e(".w-form.bank-transfer-confirm.card.u-radius",[e("form#successful-onboard-form",[e("a.w-inline-block.u-right.btn.btn-terciary.btn-no-border.btn-inline.fa.fa-close",{href:"#confirm_account",onclick:r.changeToAction("start")}),e("label.field-label.fontweight-semibold.u-marginbottom-20",t.t("accept.title",_r())),e(".fontsize-smaller.u-marginbottom-30",t.t("accept.info",_r())),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[r.acceptAccountLoader()?pt.loader():e("a.w-button.btn.btn-medium",{href:"#accept_account",onclick:r.acceptAccount},t.t("accept.cta",_r()))])])])])])])}},yr=o.partial(pt.i18nScope,"projects.successful_onboard.confirm_account"),jr={controller:function(t){var o={accept:vr},r=e.prop("start"),n=function(){return o[r()]},a=function(e){return function(){return r(e),!1}};return{changeToAction:a,actionStage:n,currentStage:r}},view:function(r,n){var a=n.projectAccount,i=r.actionStage,s=r.currentStage,l="pf"!=a.user_type;return e(".w-container.u-marginbottom-40",[e(".u-text-center",[e(".fontsize-large.fontweight-semibold.u-marginbottom-30",t.t("title",yr()))]),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-6",[e(".fontsize-base.u-marginbottom-30.card.card-terciary",[e("div",[e("span.fontcolor-secondary",t.t("person.label",yr())),t.t("person."+a.user_type+".label",yr())]),e("div",[e("span.fontcolor-secondary",t.t("person."+a.user_type+".name",yr())),a.owner_name]),a.state_inscription&&l?e("div",[e("span.fontcolor-secondary",t.t("person.state_inscription",yr())),a.state_inscription]):"",e("div",[e("span.fontcolor-secondary",t.t("person."+a.user_type+".document",yr())),a.owner_document]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.name",yr())),a.bank_name]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.agency",yr())),""+a.agency+(o.isEmpty(a.agency_digit)?"":"-"+a.agency_digit)]),e("div",[e("span.fontcolor-secondary",t.t("person.bank.account",yr())),a.account+"-"+a.account_digit+" ("+t.t("person.bank.account_type."+a.account_type,yr())+")"])])]),e(".w-col.w-col-6",[e(".fontsize-base.u-marginbottom-30.card.card-terciary",[e("div",[e("span.fontcolor-secondary",t.t("person.address",yr())),a.address_street+", "+a.address_number+" "+(o.isNull(a.address_complement)?"":", "+a.address_complement)]),e("div",[e("span.fontcolor-secondary",t.t("person.neighbourhood",yr())),a.address_neighbourhood]),e("div",[e("span.fontcolor-secondary",t.t("person.city",yr())),a.address_city]),e("div",[e("span.fontcolor-secondary",t.t("person.state",yr())),a.address_state]),e("div",[e("span.fontcolor-secondary",t.t("person.zip_code",yr())),a.address_zip_code])])])]),"start"===s()?e("#confirmation-dialog.w-row.bank-transfer-answer",[e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6.w-hidden-small.w-hidden-tiny"),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e("a#confirm-account.btn.btn-large",{href:"#confirm_account",onclick:r.changeToAction("accept")},"Sim")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6",[e("a#refuse-account.btn.btn-large.btn-terciary",{href:"/projects/"+a.project_id+"/edit#user_settings"},"Não")]),e(".w-col.w-col-3.w-col-small-6.w-col-tiny-6.w-hidden-small.w-hidden-tiny")]):e.component(i(),{projectAccount:a,changeToAction:r.changeToAction,acceptAccount:n.acceptAccount,acceptAccountLoader:n.acceptAccountLoader})])}},kr={view:function(t,o){var r=o.projectTransfer;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Extrato do projeto")]),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-40",["Confira o extrato do seu projeto, já incluindo as taxas e retenções. Se você tiver dúvidas sobre como esse cálculo é feito, ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/202037493-FINANCIADO-Como-ser%C3%A1-feito-o-repasse-do-dinheiro-"][target="__blank"]',"acesse aqui"),"."]),e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+ R$ "+pt.formatNumber(r.pledged,2))]),e(".w-col.w-col-8",[e("div","Arrecadação total ("+r.total_contributions+" apoios)")])]),r.irrf_tax>0?e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-success","+ R$ "+pt.formatNumber(r.irrf_tax,2))]),e(".w-col.w-col-8",[e("div","Retenção IRF (Imposto de Renda na Fonte)")])]):"",e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-4",[e(".text-error","- R$ "+pt.formatNumber(r.catarse_fee,2))]),e(".w-col.w-col-8",[e("div","Taxa do Catarse e meio de pagamento ("+pt.formatNumber(100*r.service_fee,2)+"%) ")])]),e(".divider.u-marginbottom-10"),e(".w-row.fontsize-base.fontweight-semibold",[e(".w-col.w-col-4",[e("div","R$ "+pt.formatNumber(r.total_amount,2))]),e(".w-col.w-col-8",[e("div","Total a ser transferido")])])])])])}},xr=o.partial(pt.i18nScope,"projects.successful_onboard"),zr=function(e,t){return{transfer_limit_date:pt.momentify(e.transfer_limit_date),total_amount:pt.formatNumber(t.total_amount,2),bank_name:e.bank_name,agency:""+e.agency+(e.agency_digit?"-"+e.agency_digit:""),account:""+e.account+(e.account_digit?"-"+e.account_digit:""),user_email:e.user_email}},Cr={content:function(e,r){var n=t.translations[t.currentLocale()].projects.successful_onboard[e],a="finished"===e?{link_news:"/projects/"+o.first(r.account()).project_id+"/posts"}:zr(o.first(r.account()),o.first(r.transfer())),i={};return o.map(n,function(r,n){i=o.extend({},i,y({},n,t.t(e+"."+n,xr(a))))}),i}},Er=(_.partial(pt.i18nScope,"projects.successful_onboard"),{controller:function(t){var o=a.filtersVM({project_id:"eq"}),r=e.prop([]),n=e.prop([]),i=pt.toggleProp(!1,!0),s={start:hr,confirm_account:jr,error_account:hr,pending_transfer:hr,finished:hr},l=e.prop("start"),d=function(){return s[l()]},u=function(){return Cr.content(l(),{account:r,transfer:n,showTaxModal:i})},p=a.loaderWithToken,m=function(e){_.first(r());return a.loaderWithToken(c.projectAccountError.postOptions({project_id:t.project().project_id,reason:e}))},f=a.loaderWithToken(c.projectAccount.postOptions({project_id:t.project().project_id}));o.project_id(t.project().project_id);var w=p(c.projectAccount.getRowOptions(o.parameters()));w.load().then(function(e){r(e),v()});var b=p(c.projectTransfer.getRowOptions(o.parameters()));b.load().then(n);var g=function(e){return l(e),d},h=function(){var e=_.keys(s),t=e[_.indexOf(e,l())+1];return l(t),d},v=function(){if(!w()){var e=_.first(r());if(_.isNull(e))return g("finished")();if(_.isNull(e.transfer_state))return g("start")();if(!_.isNull(e.transfer_state))return"transferred"==e.transfer_state?g("finished")():g("pending_transfer")()}return!1},y=function(){return f.load().then(function(){g("pending_transfer")()}),!1};return{projectAccounts:r,projectTransfers:n,lProjectAccount:w,lProjectTransfer:b,setStage:g,nextStage:h,currentComponent:d,acceptAccount:y,acceptAccountLoader:f,content:u,declineAccountLoader:m,loadCurrentStage:v,showTaxModal:i}},view:function(t,o){var r=_.first(t.projectAccounts()),n=_.first(t.projectTransfers()),a=t.lProjectAccount,i=t.lProjectTransfer;return e(".w-section.section",[t.showTaxModal()?e.component(sr,{displayModal:t.showTaxModal,content:[kr,{projectTransfer:n}]}):"",a()||i()?pt.loader():e.component(t.currentComponent(),{projectTransfer:n,projectAccount:r,setStage:t.setStage,acceptAccount:t.acceptAccount,acceptAccountLoader:t.acceptAccountLoader,nextStage:t.nextStage,content:t.content(),dataToRedraw:{tax_link:{action:"onclick",actionSource:function(){t.showTaxModal.toggle(),e.redraw()}}}})])}}),Sr={controller:function(e){var t=function(){FB&&FB.ui({method:e.messenger?"send":"share",link:e.url,href:e.url})};return{share:t}},view:function(t,o){var r=function(){return o.mobile?"w-hidden-main w-hidden-medium u-marginbottom-20 btn btn-medium btn-fb":o.big?"btn btn-fb btn-large u-marginbottom-20 w-button":o.medium?"btn "+(o.messenger?"btn-messenger":"btn-fb")+" btn-medium u-marginbottom-20 w-button":"btn btn-inline btn-medium btn-terciary u-marginright-20"};return e("button",{"class":r(),onclick:t.share},[e("span.fa",{"class":o.messenger?"fa-comment":"fa-facebook"}),o.messenger?" Messenger":" Facebook"])}},Pr={controller:function(e){return{displayNotification:e.toggleOpt||pt.toggleProp(!0,!1)}},view:function(t,o){return t.displayNotification()?e(".flash.w-clearfix.card.card-notification.u-radius.zindex-20",{"class":o.error?"card-error":""},[e('img.icon-close[src="/assets/catarse_bootstrap/x.png"][width="12"][alt="fechar"]',{onclick:t.displayNotification.toggle}),e(".fontsize-small",o.message)]):e("span")}},Mr={controller:function(t){var o=e.prop(!1),r=function(e){var t=void 0,o=void 0;document.body.createTextRange?(t=document.body.createTextRange(),t.moveToElementText(e),t.select()):window.getSelection&&(o=window.getSelection(),t=document.createRange(),t.selectNodeContents(e),o.removeAllRanges(),o.addRange(t))},n=function(n,a){var i=void 0;a||!function(){var a=n.parentNode.previousSibling.firstChild;a.innerText=t.value,n.onclick=function(){return r(a),i=document.execCommand("copy"),i?(o(!0),e.redraw()):a.blur(),!1}}()};return{setClickHandler:n,showSuccess:o}},view:function(t,o){return e(".clipboard.w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e("textarea.copy-textarea.text-field.w-input",{style:"margin-bottom:0;"},o.value)),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-clipboard.w-button",{config:t.setClickHandler})),t.showSuccess()?e.component(Pr,{message:"Link copiado"}):""])}},Ar={view:function(t,o){var r=o.project;return e(".card.card-secondary.u-marginbottom-20.u-radius.w-clearfix",[e(".fontsize-base.fontweight-semibold.u-marginbottom-30.u-text-center","Convide seus amigos para apoiar sua campanha"),e(".w-row",[e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(Sr,{url:pt.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share_insights",medium:!0})]),e(".w-sub-col.u-marginbottom-20.w-col.w-col-4",[e.component(Sr,{messenger:!0,url:pt.projectFullPermalink(r)+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share_insights",medium:!0})]),e(".w-col.w-col-4",[e(".w-form",[e("form[data-name='Email Form 2'][id='email-form-2'][name='email-form-2']",[e.component(Mr,{value:pt.projectFullPermalink(r)+"?ref=project_link"})])])])])])}},Tr=o.partial(pt.i18nScope,"projects.insights"),Dr={controller:function(r){var n=a.filtersVM({project_id:"eq"
}),i=pt.toggleProp(!1,!0),s=e.prop([]),l=e.prop([]),d=e.prop(0),u=e.prop([]),p=a.loaderWithToken,m=function(){try{var t=e.route.param("project_id");n.project_id(t)}catch(o){n.project_id(r.root.getAttribute("data-id"))}};"true"===pt.paramByName("online_success")&&i.toggle(),m();var f=p(c.projectDetail.getRowOptions(n.parameters()));f.load().then(s);var w=function(e){o.isEmpty(e)||(u(e),d(o.first(e).total))},b=p(c.projectVisitorsPerDay.getRowOptions(n.parameters()));b.load().then(w);var g=p(c.projectContributionsPerDay.getRowOptions(n.parameters()));g.load().then(l);var h=[["Estado","Apoios","R$ apoiados (% do total)"]],_=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"R$ ",pt.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),h.push(o)})},v=p(c.projectContributionsPerLocation.getRowOptions(n.parameters()));v.load().then(_);var y=[[t.t("ref_table.header.origin",Tr()),t.t("ref_table.header.contributions",Tr()),t.t("ref_table.header.amount",Tr())]],j=function(r){return o.isEmpty(r)?[]:o.map(o.first(r).source,function(o){var r=/(ctrse_[\D]*)/,n=r.exec(o.referral_link),a=[];return n&&(o.referral_link="_"===n[0].substr(-1)?n[0].substr(0,n[0].length-1):n[0]),a.push(o.referral_link?t.t("referral."+o.referral_link,Tr({defaultValue:o.referral_link})):t.t("referral.others",Tr())),a.push(o.total),a.push([o.total_amount,[e('input[type="hidden"][value="'+o.total_contributed+'"'),"R$ ",pt.formatNumber(o.total_amount,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+o.total_on_percentage.toFixed(2)+"%)")]]),y.push(a)})},k=p(c.projectContributionsPerRef.getRowOptions(n.parameters()));return k.load().then(j),{l:f,lContributionsPerRef:k,lContributionsPerLocation:v,lContributionsPerDay:g,lVisitorsPerDay:b,displayModal:i,filtersVM:n,projectDetails:s,contributionsPerDay:l,contributionsPerLocationTable:h,contributionsPerRefTable:y,visitorsPerDay:u,visitorsTotal:d}},view:function(r){var n=o.first(r.projectDetails())||{user:{name:"Realizador"}},a=function(o){return e.component(rr,{el:o,text:["Informa de onde vieram os apoios de seu projeto. Saiba como usar essa tabela e planejar melhor suas ações de comunicação ",e('a[href="'+t.t("ref_table.help_url",Tr())+"\"][target='_blank']","aqui.")],width:380})};return r.l()||(n.user.name=n.user.name||"Realizador"),e(".project-insights",r.l()?pt.loader():[n.is_owner_or_admin?e.component(ir,{project:e.prop(n)}):"",r.displayModal()?e.component(sr,{displayModal:r.displayModal,content:[cr]}):"",e(".w-container","successful"===n.state?e.component(Er,{project:e.prop(n)}):[e(".w-row.u-marginbottom-40",[e(".w-col.w-col-8.w-col-push-2",[e(".fontweight-semibold.fontsize-larger.lineheight-looser.u-marginbottom-10.u-text-center.dashboard-header",t.t("campaign_title",Tr())),"online"===n.state?e.component(Ar,{project:n}):"","draft"===n.state?e.component(lr,{resource:n}):"",e("p."+n.state+"-project-text.u-text-center.fontsize-small.lineheight-loose",["flex"===n.mode&&o.isNull(n.expires_at)&&"draft"!==n.state?e("span",[e.trust(t.t("finish_explanation",Tr())),e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/articles/213783503-tudo-sobre-Prazo-da-campanha"][target="_blank"]',t.t("know_more",Tr()))]):e.trust(t.t("campaign."+n.mode+"."+n.state,Tr({username:n.user.name,expires_at:pt.momentify(n.zone_expires_at),sent_to_analysis_at:pt.momentify(n.sent_to_analysis_at)})))])])])]),"draft"===n.state?e.component(pr,{project:n}):"",n.is_published?[e(".divider"),e(".w-section.section-one-column.section.bg-gray.before-footer",[e(".w-container",[e.component(dr,{project:e.prop(n),visitorsTotal:r.visitorsTotal}),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",[t.t("visitors_per_day_label",Tr()),pt.newFeatureBadge()]),r.lVisitorsPerDay()?pt.loader():e.component(wr,{collection:r.visitorsPerDay,dataKey:"visitors",xAxis:function(e){return pt.momentify(e.day)},emptyState:t.t("visitors_per_day_empty",Tr())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?pt.loader():e.component(wr,{collection:r.contributionsPerDay,label:t.t("amount_per_day_label",Tr()),dataKey:"total_amount",xAxis:function(e){return pt.momentify(e.paid_at)},emptyState:t.t("amount_per_day_empty",Tr())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[r.lContributionsPerDay()?pt.loader():e.component(wr,{collection:r.contributionsPerDay,label:t.t("contributions_per_day_label",Tr()),dataKey:"total",xAxis:function(e){return pt.momentify(e.paid_at)},emptyState:t.t("contributions_per_day_empty",Tr())})])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",[t.t("ref_origin_title",Tr())," ",a("span.fontsize-smallest.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary")]),r.lContributionsPerRef()?pt.loader():o.isEmpty(o.rest(r.contributionsPerRefTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_ref_empty",Tr()))))):e.component(br,{table:r.contributionsPerRefTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e(".project-contributions-per-ref",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center",t.t("location_origin_title",Tr())),r.lContributionsPerLocation()?pt.loader():o.isEmpty(o.rest(r.contributionsPerLocationTable))?e(".card.u-radius.medium.u-marginbottom-60",e(".w-row.u-text-center.u-margintop-40.u-marginbottom-40",e(".w-col.w-col-8.w-col-push-2",e("p.fontsize-base",t.t("contributions_per_location_empty",Tr()))))):e.component(br,{table:r.contributionsPerLocationTable,defaultSortIndex:-2})])])]),e(".w-row",[e(".w-col.w-col-12.u-text-center",[e.component(gr,{resource:n})])])])]),"online"!==n.state||!n.is_admin_role&&0!=n.pledged?"":e.component(fr,{project:n})]:""])}},qr={controller:function(t){var o=function(){pt.scrollTop(),t.showPreview(!1)},r=function(r){r.preventDefault();var n={title:t.title(),comment_html:t.comment_html(),reward_id:t.reward_id>=1?t.reward_id:null,recipients:t.reward_id>=1?"reward":"-1"==t.reward_id?"public":"backers"};return e.request({method:"POST",url:"/projects/"+t.project_id+"/posts.json",data:{project_post:n,project:t.project_id},config:pt.setCsrfToken}).then(function(){t.showSuccess(!0),t.comment_html(""),t.title(""),o(),e.redraw()})["catch"](function(o){t.errors("Erro ao enviar mensagem."),t.showError(!0),e.redraw()})};return{sendNotification:r,togglePreview:o}},view:function(t,o){var r=o.comment_html(),n=o.title(),a=o.reward_id>1?e(".fontsize-small.u-marginbottom-30",["A novidade acima será enviada por email para os ",e("span.fontweight-semibold",o.rewardText)," e ficará ",e("span.fontweight-semibold","visível na plataforma somente para esses apoiadores.")]):"-1"===o.reward_id?e(".fontsize-small.u-marginbottom-30",["A novidade acima será  ",e("span.fontweight-semibold","enviada por email para todos")," os apoiadores e ficará ",e("span.fontweight-semibold","visível publicamente "),"na plataforma."]):e(".fontsize-small.u-marginbottom-30",[e("span"," A novidade acima será  "),e("span.fontweight-semibold","enviada por email para todos os apoiadores"),e("span"," e ficará "),e("span.fontweight-semibold","visível somente para esses na plataforma.")]);return e("div",[e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight","Revise sua novidade antes de enviar!")),e(".w-col.w-col-3")]))),e(".section",[e(".w-container",e(".card.u-marginbottom-60.u-radius.w-row",[e(".w-col.w-col-1"),e(".u-marginbottom-30.u-margintop-30.w-col.w-col-10.w-hidden-small.w-hidden-tiny",[e(".fontcolor-secondary.fontsize-small.u-text-center","16/01/2017"),e(".fontsize-larger.fontweight-semibold.u-marginbottom-30.u-text-center",n),e(".fontsize-base",e.trust(r))]),e(".w-col.w-col-1")])),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",a),e(".w-col.w-col-3")]),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e("._w-sub-col.w-col.w-col-4",e("button.btn.btn-large",{onclick:t.sendNotification},[e("span.fa.fa-paper-plane","")," ",e.trust("&nbsp;"),"Enviar"])),e(".w-col.w-col-2",e("button.btn.btn-large.btn-terciary",{onclick:t.togglePreview},"Editar")),e(".w-col.w-col-3")])])])}},Rr={controller:function(t){var r=void 0,n=e.prop(!1),i=e.prop(!1),s=e.prop(!1),l=e.prop(!1),d=e.prop(!1),u=e.prop(),p=a.loaderWithToken,m=e.prop(""),f={title:e.prop(""),comment_html:e.prop(""),reward_id:e.prop("-1")},w=a.filtersVM({project_id:"eq"}),b=function(){var e=String(f.title());return 0===e.length&&l(!0),!l()},g=function(){var e=String(f.comment_html());return 0===e.length&&d(!0),!d()},h=function(){return b()?g()?(pt.scrollTop(),n(!0)):(m("Mensagem não pode ficar em branco."),s(!0)):(m("Título não pode ficar em branco."),s(!0)),!1},_=t.root.getAttribute("data-id"),v=e.prop([]),y=function(e){var t=o.find(bo.rewards(),function(t){return String(t.id)===String(e)});return"Apoiadores da recompensa R$"+t.minimum_value+" - "+(t.description.substring(0,70)+"...")},j=function(e){if("public"===e.recipients)return"Todo mundo (apoiadores e não apoiadores)";if("backers"===e.recipients)return"Todos os apoiadores";var t=o.find(bo.rewards(),function(t){return t.id===e.reward_id});return t?y(t.id):"..."},k=e.prop(-1),x=function(t){return function(){return k(t.id),e.redraw(!0),r(),!1}},z=function(e,t){t||(r=function(){return e.submit()})},C=function(e){return Math.floor(e.open_count/e.delivered_count*100)};c.projectPostDetail.pageSize(!1),w.project_id(_);var E=a.loaderWithToken(c.projectPostDetail.getPageOptions(o.extend(w.parameters(),{order:"created_at.desc"}))),S=p(c.projectDetail.getRowOptions(w.parameters()));return E.load().then(u),bo.fetchRewards(_),S.load().then(v),{listVM:E,l:S,projectPosts:u,showRecipientes:j,fields:f,showPreview:n,togglePreview:h,project_id:_,deletePost:x,rewardText:y,errors:m,showSuccess:i,titleHasError:l,commentHasError:d,showError:s,setPostDeletionForm:z,toDeletePost:k,projectDetails:v,openedPercentage:C}},view:function(t){var r=o.first(t.projectDetails()),n=o.filter(bo.rewards(),function(e){return e.paid_count>0});return r?e(".project-posts",r.is_owner_or_admin?e.component(ir,{project:e.prop(r)}):"",t.showPreview()?e.component(qr,{showError:t.showError,showSuccess:t.showSuccess,errors:t.errors,showPreview:t.showPreview,project_id:t.project_id,comment_html:t.fields.comment_html,title:t.fields.title,reward_id:t.fields.reward_id(),rewardText:t.fields.reward_id()>=1?t.rewardText(t.fields.reward_id()):null}):[t.showSuccess()?e.component(Pr,{message:"Mensagem enviada com sucesso"}):"",t.showError()?e.component(Pr,{message:t.errors(),error:!0}):"",e(".dashboard-header.u-text-center",e(".w-container",e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e(".fontsize-larger.fontweight-semibold.lineheight-tight","Envie uma novidade para seus apoiadores")),e(".w-col.w-col-3")]))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".u-marginbottom-60.u-text-center",e("._w-inline-block.card.fontsize-small.u-radius",[e("span.fa.fa-lightbulb-o","")," Veja ótimo motivos para ",e("a.alt-link[href='https://catarse.attach.io/B1AHAGm1x'][target='_blank']","falar com seus apoiadores agora mesmo!")])),e(".card.card-terciary.medium.u-marginbottom-80.w-form",[e("form",[e("label.field-label.fontweight-semibold","Destinatários"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",t.fields.reward_id)},[e("option[value='-1']",{selected:!0},"Todo mundo (apoiadores e não apoiadores)"),e("option[value='0']","Todos os apoiadores"),o.map(n,function(o){return e("option[value='"+o.id+"']",t.rewardText(o.id))})]),e("label.field-label.fontweight-semibold","Título"),e("input.positive.text-field.w-input[id='post_title'][maxlength='256'][type='text']",{name:"posts[title]",value:t.fields.title(),onfocus:function(){return t.titleHasError(!1)},"class":t.titleHasError()?"error":"",onchange:e.withAttr("value",t.fields.title)}),e("label.field-label.fontweight-semibold","Texto"),e(".preview-container.u-marginbottom-40",{"class":t.commentHasError()?"error":"",onclick:function(){return t.commentHasError(!1)}},pt.redactor("posts[comment_html]",t.fields.comment_html)),e(".u-marginbottom-20.w-row",[e(".w-col.w-col-3"),e("._w-sub-col.w-col.w-col-6",e("button.btn.btn-large",{onclick:t.togglePreview},"Pré-visualizar")),e(".w-col.w-col-3")])])]),e(".fontsize-large.fontweight-semibold.u-marginbottom-40","Novidades já enviadas"),e(".table-outer.u-marginbottom-60",[e(".fontsize-smaller.fontweight-semibold.header.table-row.w-row",[e(".table-col.w-col.w-col-5",e("div","Título")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Enviadas")),e(".table-col.u-text-center.w-col.w-col-3",e("div","Abertas")),e(".table-col.w-col.w-col-1")]),t.projectPosts()?e(".fontsize-small.table-inner",[o.map(t.projectPosts(),function(o){return e(".table-row.w-row",[e(".table-col.w-col.w-col-5",[e("a.alt-link.fontsize-base[href='/projects/"+r.project_id+"/posts/"+o.id+"#posts'][target='_blank']",o.title),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Enviada em: "),pt.momentify(o.created_at,"DD/MM/YYYY, h:mm A")]),e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Destinatários: "),t.showRecipientes(o)])]),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",o.delivered_count)),e(".table-col.u-text-center.w-col.w-col-3",e(".fontsize-base",[o.open_count,e("span.fontcolor-secondary"," ("+t.openedPercentage(o)+"%)")])),e(".table-col.w-col.w-col-1",e("button.btn.btn-no-border.btn-small.btn-terciary.fa.fa-lg.fa-trash",{onclick:t.deletePost(o)}))])}),e("form.w-hidden",{action:"/pt/projects/"+r.project_id+"/posts/"+t.toDeletePost(),method:"POST",config:t.setPostDeletionForm},[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+pt.authenticityToken()+"']")])]):pt.loader()])]),e(".w-col.w-col-1")])))]):pt.loader()}},Fr=_.partial(pt.i18nScope,"pages.jobs"),Or={view:function(o,r){return[e(".w-section.hero-jobs.hero-medium",[e(".w-containe.u-text-center",[e('img.icon-hero[src="/assets/logo-white.png"]'),e(".u-text-center.u-marginbottom-20.fontsize-largest",t.t("title",Fr()))])]),e(".w-section.section",[e(".w-container.u-margintop-40",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2.u-text-center",[e(".fontsize-large.u-marginbottom-30",t.t("info",Fr())),e('a[href="/projects/new"].w-button.btn.btn-large.btn-inline',t.t("cta",Fr()))])])])])]}},Ir={controller:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.prop([]),n=e.prop({});return c.statistic.getRow().then(r),t.socket&&o.isFunction(t.socket.on)&&t.socket.on("new_paid_contributions",function(t){n(JSON.parse(t.payload)),c.statistic.getRow().then(r),e.redraw()}),{pageStatistics:r,notificationData:n}},view:function(t){var r=t.notificationData();return e(".w-section.bg-stats.section.min-height-100",[e(".w-container.u-text-center",o.map(t.pageStatistics(),function(t){return[e('img.u-marginbottom-60[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/55ada5dd11b36a52616d97df_symbol-catarse.png"]'),e(".fontcolor-negative.u-marginbottom-40",[e(".fontsize-megajumbo.fontweight-semibold","R$ "+pt.formatNumber(t.total_contributed,2,3)),e(".fontsize-large","Doados para projetos publicados por aqui")]),e(".fontcolor-negative.u-marginbottom-60",[e(".fontsize-megajumbo.fontweight-semibold",t.total_contributors),e(".fontsize-large","Pessoas já apoiaram pelo menos 1 projeto no Catarse")])]})),o.isEmpty(r)?"":e(".w-container",[e("div",[e(".card.u-radius.u-marginbottom-60.medium",[e(".w-row",[e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb.u-round[src="'+pt.useAvatarOrDefault(r.user_image)+'"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.user_name)])])]),e(".w-col.w-col-4.u-text-center.fontsize-base.u-margintop-20",[e("div","acabou de apoiar o")]),e(".w-col.w-col-4",[e(".w-row",[e(".w-col.w-col-4.w-col-small-4",[e('img.thumb-project.u-radius[src="'+r.project_image+'"][width="75"]')]),e(".w-col.w-col-8.w-col-small-8",[e(".fontsize-large.lineheight-tight",r.project_name)])])])])])])]),e(".u-text-center.fontsize-large.u-marginbottom-10.fontcolor-negative",[e('a.link-hidden.fontcolor-negative[href="https://github.com/catarse"][target="_blank"]',[e("span.fa.fa-github",".")," Open Source com orgulho! "])])])}},Nr=o.partial(pt.i18nScope,"projects.dashboard_contribution_reports"),Vr={view:function(r,n){var a=n.filterBuilder,i=o.findWhere(a,{label:"payment_state"}),s=o.findWhere(a,{label:"reward_filter"}),l=o.findWhere(a,{label:"delivery_filter"}),c=o.findWhere(a,{component:bt});n.filterVM.project_id();return s.data.options=n.mapRewardsToOptions(),e(".w-section.dashboard-header",e(".w-container",[e(".w-container",e(".w-row",e(".w-col.w-col-8.w-col-push-2.u-marginbottom-30.u-text-center",[e(".fontweight-semibold.fontsize-larger.lineheight-looser",t.t("title",Nr())),e(".fontsize-base",t.t("subtitle_html",Nr()))]))),e(".w-form",[e("form",{onsubmit:n.submit},e(".w-row",[e(".w-col.w-col-8",e(".w-row",[e.component(i.component,i.data),e.component(s.component,s.data),e.component(l.component,l.data)])),e(".w-col.w-col-4",e(".u-margintop-20.w-row",[e.component(c.component,c.data)]))]))])]))}},Br={controller:function(e){var t=e.project(),r=function(t){return o.contains(e.selectedContributions(),t.id)},a=function(t){var a=n("input:checkbox").is(":checked");return e.selectedAny(a),r(t)?e.selectedContributions(o.without(e.selectedContributions(),t.id)):e.selectedContributions().push(t.id),!0},i=function(e){var o={online:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},failed:{paid:"text-error.fa-circle-o",refunded:"text-refunded.fa-circle",pending_refund:"text-refunded.fa-circle-o",pending:"text-refunded",refused:"text-refunded"},waiting_funds:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"},successful:{paid:"text-success.fa-circle",refunded:"text-error.fa-circle",pending_refund:"text-error.fa-circle",pending:"text-waiting.fa-circle",refused:"text-error.fa-circle"}};return o[t.state][e]};return{stateClass:i,checked:r,selectContribution:a}},view:function(t,r){var n=r.contribution(),a=r.project(),i=o.isEmpty(n.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":n.profile_img_thumbnail,s=n.reward||{minimum_value:0,description:"Nenhuma recompensa selecionada"};return e(".w-clearfix.card"+(t.checked(n)?".card-alert":""),[e(".w-row",[e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e(".w-inline-block",e(".w-checkbox.w-clearfix","received"!==n.delivery_status&&"failed"!==a.state?e("input.w-checkbox-input[type='checkbox']",{checked:t.checked(n),value:n.id,onclick:function(){return t.selectContribution(n)}}):""))),e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",e(".w-row",[e(".w-col.w-col-1.w-col-tiny-1",[e("img.user-avatar.u-marginbottom-10[src='"+i+"']")]),e(".w-col.w-col-11.w-col-tiny-11",[e(".w-row",[e(".w-col.w-col-3",[e(".fontcolor-secondary.fontsize-mini.fontweight-semibold",pt.momentify(n.created_at,"DD/MM/YYYY, HH:mm")),e(".fontweight-semibold.fontsize-smaller.lineheight-tighter",n.user_name),e(".fontsize-smallest.lineheight-looser",[n.has_another?[e("a.link-hidden-light.badge.badge-light","+1 apoio ")]:"",n.anonymous?e("span.fa.fa-eye-slash.fontcolor-secondary",e('span.fontcolor-secondary[style="font-size:11px;"]'," Apoio não-público")):""]),e(".fontsize-smallest.lineheight-looser",n.email)]),e(".w-col.w-col-3",[e(".lineheight-tighter",[e("span.fa.fontsize-smallest."+t.stateClass(n.state)),"   ",e("span.fontsize-large","R$ "+pt.formatNumber(n.value,2,3))])]),e(".w-col.w-col-3.w-hidden-small.w-hidden-tiny",[e("div","error"===n.delivery_status?e("span.badge.badge-attention.fontsize-smaller","Erro no envio"):"delivered"===n.delivery_status?e("span.badge.badge-success.fontsize-smaller","Enviada"):"received"===n.delivery_status?e("span.fontsize-smaller.badge.badge-success",[e("span.fa.fa-check-circle","")," Recebida"]):""),e(".fontsize-smallest.fontweight-semibold",s.minimum_value?"Recompensa: "+pt.formatNumber(s.minimum_value,2,3):"Recompensa: "),e(".fontsize-smallest",s.description.substring(0,80)+"...")])])])]))])])}},Lr=a.filtersVM({full_text_index:"@@",state:"in",reward_id:"eq",delivery_status:"eq",project_id:"eq"}),Ur=function(e){return(e||"").toString().trim()};Lr.state(""),Lr.order({id:"desc"}),Lr.full_text_index.toFilter=function(){var e=Ur(Lr.full_text_index());return e&&s(e)||void 0},Lr.getAllContributions=function(e){c.projectContribution.pageSize(!1);var t=a.loaderWithToken(c.projectContribution.getPageOptions(e.parameters())).load();return c.projectContribution.pageSize(9),t},Lr.updateStatus=function(t){return e.request({method:"PUT",url:"/projects/"+Lr.project_id()+"/contributions/update_status.json",data:t,config:pt.setCsrfToken})},Lr.withNullParameters=function(){var e=a.filtersVM({full_text_index:"@@",state:"in",reward_id:"is",delivery_status:"eq",project_id:"eq"});return e.full_text_index(Lr.full_text_index()),e.order(Lr.order()),e.state(Lr.state()),e.reward_id(Lr.reward_id()),e.delivery_status(Lr.delivery_status()),e.project_id(Lr.project_id()),e.parameters()};var Yr={view:function(t,o){return e("div",e(".modal-dialog-header",e(".fontsize-large.u-text-center",[e("span.fa.fa-check-circle","")," Recompensas a caminho! Obaaa!!!!"])),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-30",[e("span.fontweight-semibold","Você selecionou "+o.amount+" apoios.")," Após sua confirmação, os apoiadores que efetuaram esses apoios ao seu projeto serão notificados de que suas recompensas serão entregues em breve."]),e(".w-form",[e("form",[e(".fontsize-smaller","Se quiser adicionar alguma informação nessa mensagem, use o espaço abaixo! É um ótimo momento para agradecer a essas pessoas que acreditaram em você!"),e("textarea.height-mini.text-field.w-input[placeholder='Digite sua mensagem (opcional)']",{value:o.message(),onchange:e.withAttr("value",o.message)})])]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center","Você confirma que a recompensa dos apoios selecionados foram enviadas?")),e(".w-col.w-col-1")]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-5",e("a.btn.btn-medium.w-button",{onclick:function(){return o.updateStatus("delivered")}},"Sim!")),e(".w-col.w-col-5",e("a.btn.btn-medium.btn-terciary.w-button",{onclick:o.displayModal.toggle},"Voltar")),e(".w-col.w-col-1")])]))}},Hr={view:function(t,o){return e("div",e(".modal-dialog-header",e(".fontsize-large.u-text-center",[e("span.fa.fa-exclamation-triangle","")," Ops. Erro no envio!"])),e(".modal-dialog-content",[e("p.fontsize-small.u-marginbottom-30",[e("span.fontweight-semibold","Você selecionou "+o.amount+" apoios.")," Após sua confirmação, os apoiadores que efetuaram esses apoios ao seu projeto serão notificados de que houve um problema com o envio de suas recompensas."]),e(".w-form",[e("form",[e(".fontsize-smaller","Se quiser adicionar alguma informação nessa mensagem, use o espaço abaixo (ex: você pode pedir confirmação de endereço de entrega ou explicar motivos do erro)"),e("textarea.height-mini.text-field.w-input[placeholder='Digite sua mensagem (opcional)']",{value:o.message(),onchange:e.withAttr("value",o.message)})])]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-small.fontweight-semibold.u-marginbottom-20.u-text-center","Você confirma que houve um erro no envio das recompensas dos apoios selecionados?")),e(".w-col.w-col-1")]),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-5",e("a.btn.btn-medium.w-button",{onclick:function(){return o.updateStatus("error")}},"Sim!")),e(".w-col.w-col-5",e("a.btn.btn-medium.btn-terciary.w-button",{onclick:o.displayModal.toggle},"Voltar")),e(".w-col.w-col-1")])]))}},Wr={controller:function(t){var r=pt.toggleProp(!1,!0),n=e.prop(!1),a=e.prop(!1),i=e.prop(!1),s=pt.toggleProp(!1,!0),l=pt.toggleProp(!1,!0),c=e.prop([]),d=e.prop(""),u=function(){Lr.getAllContributions(t.filterVM).then(function(e){var t,r=o.filter(e,function(e){return"received"!==e.delivery_status});(t=c()).push.apply(t,k(o.pluck(r,"id"))),n(!o.isEmpty(r))})},p=function(){c([]),n(!1)},m=function(n){var u={contributions:c(),message:d(),delivery_status:n};return"delivered"===n?s.toggle():"error"===n&&l.toggle(),i(!0),r.toggle(),e.redraw(),Lr.updateStatus(u).then(function(){i(!1),a(!0),o.map(o.filter(t.list.collection(),function(e){return o.contains(c(),e.id)}),function(e){return e.delivery_status=n})})["catch"](function(){e.redraw()}),!1};return{showSuccess:a,selectAll:u,unselectAll:p,deliveryMessage:d,displayDeliverModal:s,displayErrorModal:l,updateStatus:m,loading:i,showSelectedMenu:r,selectedAny:n,selectedContributions:c}},view:function(t,r){var n=r.list,a="failed"===r.project().state;return e(".w-section.bg-gray.before-footer.section",t.loading()?pt.loader():[t.displayErrorModal()?e.component(sr,{displayModal:t.displayErrorModal,hideCloseButton:!1,content:[Hr,{project:r.project,displayModal:t.displayErrorModal,amount:t.selectedContributions().length,updateStatus:t.updateStatus,message:t.deliveryMessage}]}):"",t.displayDeliverModal()?e.component(sr,{displayModal:t.displayDeliverModal,hideCloseButton:!1,content:[Yr,{project:r.project,displayModal:t.displayDeliverModal,amount:t.selectedContributions().length,updateStatus:t.updateStatus,message:t.deliveryMessage}]}):"",t.showSuccess()?e.component(Pr,{message:"As informações foram atualizadas"}):"",e(".w-container",[e(".u-marginbottom-40",e(".w-row",[e(".u-text-center-small-only.w-col.w-col-2",e(".fontsize-base.u-marginbottom-10",[e("span.fontweight-semibold",n.isLoading()?"":n.total())," apoios"])),e(".w-col.w-col-6",a?"":[t.selectedAny()?e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.unselectAll},"Desmarcar todos"):e("button.btn.btn-inline.btn-small.btn-terciary.u-marginright-20.w-button",{onclick:t.selectAll},"Selecionar todos"),t.selectedAny()?e(".w-inline-block",[e("button.btn.btn-inline.btn-small.btn-terciary.w-button",{onclick:t.showSelectedMenu.toggle},["Marcar ",e("span.w-hidden-tiny","entrega")," como"]),t.showSelectedMenu()?e(".card.dropdown-list.dropdown-list-medium.u-radius.zindex-10[id='transfer']",[e("a.dropdown-link.fontsize-smaller[href='#']",{onclick:function(){return t.displayDeliverModal.toggle()}},"Enviada"),e("a.dropdown-link.fontsize-smaller[href='#']",{onclick:function(){return t.displayErrorModal.toggle()}},"Erro no envio")]):""]):""]),e(".w-clearfix.w-col.w-col-4",e('a.alt-link.fontsize-small.lineheight-looser.u-right[href="/projects/'+r.project().project_id+'/download_reports"]',[e("span.fa.fa-download","")," Baixar relatórios"]))])),o.map(n.collection(),function(o){var n=e.prop(o);return e.component(Br,{project:r.project,contribution:n,selectedContributions:t.selectedContributions,selectedAny:t.selectedAny})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?pt.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Carregar mais")])])])])])}},$r={controller:function(e){return{modalToggle:pt.toggleProp(!1,!0)}},view:function(t,o){return e("span",[o.text,e.trust("&nbsp;"),e('a.fa.fa-question-circle.fontcolor-secondary[href="#"]',{onclick:t.modalToggle.toggle},""),t.modalToggle()?e.component(sr,{displayModal:t.modalToggle,content:o.content}):""])}},Jr=o.partial(pt.i18nScope,"projects.contributions_report.legend_labels"),Xr={controller:function(e){var o=function(e){return t.t(e,Jr())};return{stages:{online:[{label:o("online.paid.label"),text:o("online.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("online.pending.label"),text:o("online.pending.text"),i_class:".fa.fa-circle.text-waiting"},{label:o("online.refunded.label"),text:o("online.refunded.text"),i_class:".fa.fa-circle.text-error"}],failed:[{label:o("failed.pending_refund.label"),text:o("failed.pending_refund.text"),i_class:".fa.fa-circle-o.text-refunded"},{label:o("failed.refunded.label"),text:o("failed.refunded.text"),i_class:".fa.fa-circle.text-refunded"},{label:o("failed.paid.label"),text:o("failed.paid.text"),i_class:".fa.fa-circle-o.text-error"}],successful:[{label:o("successful.paid.label"),text:o("successful.paid.text"),i_class:".fa.fa-circle.text-success"},{label:o("successful.refunded.label"),text:o("successful.refunded.text"),i_class:".fa.fa-circle.text-error"}]}}},view:function(t,r){var n=o.first(r.project()),a="waiting_funds"==n.state?"online":n.state;return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Status do apoio")]),e(".modal-dialog-content",o.map(t.stages[a],function(t,o){return e(".u-marginbottom-20",[e(".fontsize-small.fontweight-semibold",[e("span"+t.i_class),"  "+t.label]),e(".fontsize-smaller",e.trust(t.text))])}))])}},Kr={view:function(t,o){return e("div",[e(".modal-dialog-header",[e(".fontsize-large.u-text-center","Status da entrega")]),e(".modal-dialog-content",[e(".fontsize-smaller.u-marginbottom-30","Todo apoio tem, por padrão, o status de entrega 'Não enviada'. Para ajudar no seu controle da entrega de recompensas, você pode alterar esses status e filtrar a pesquisa de apoios com os seguintes rótulos:"),e(".u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold",["Não enviada",e.trust("&nbsp;")]),e(".fontsize-smaller","Você ainda não enviou a recompensa para o apoiador.")]),e("div",e("span.fontsize-smaller.badge.badge-success","Enviada")),e(".u-marginbottom-20",e(".fontsize-smaller","Você já enviou a recompensa para o apoiador.")),e(".u-marginbottom-20",[e("div",e("span.fontsize-smaller.badge.badge-attention","Erro no envio")),e(".fontsize-smaller","Você enviou a recompensa, mas houve algum problema com o envio (ex: endereço incorreto).")]),e(".u-marginbottom-20",[e("div",e("span.fontsize-smaller.badge.badge-success",[e("span.fa.fa-check-circle","")," Recebida"])),e(".fontsize-smaller","O apoiador marcou a recompensa como 'Recebida' no seu painel de controle o/")])]),e(".divider.u-marginbottom-10"),e(".fontcolor-secondary.fontsize-smaller.u-marginbottom-30",["Obs: mesmo que a recompensa não seja física (como uma cópia digital, por exemplo), você pode mesmo assim usar o sistema acima!"])])}},Gr={controller:function(t){var r=a.paginationVM(c.projectContribution,"id.desc",{Prefer:"count=exact"}),n=Lr,i=e.prop([{}]),s=e.prop([]),l=e.prop([]),d=function(e){var t=[{value:"",option:"Todos"}],o={online:[{value:"paid",option:"Confirmado"},{value:"pending",option:"Iniciado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}],waiting_funds:[{value:"paid",option:"Confirmado"},{value:"pending",option:"Iniciado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}],failed:[{value:"pending_refund",option:"Reembolso em andamento"},{value:"refunded",option:"Reembolsado"},{value:"paid",option:"Reembolso não iniciado"}],successful:[{value:"paid",option:"Confirmado"},{value:"refunded,chargeback,deleted,pending_refund",option:"Contestado"}]};t=t.concat(o[e]||[]),l(t)},u=function(){return"null"===n.reward_id()?r.firstPage(n.withNullParameters()).then(null):r.firstPage(n.parameters()).then(null),!1;
},p=[{component:bt,data:{inputWrapperClass:".w-input.text-field",btnClass:".btn.btn-medium",vm:n.full_text_index,placeholder:"Busque por nome ou email do apoiador"}},{label:"reward_filter",component:Et,data:{label:"Recompensa selecionada",onchange:u,name:"reward_id",vm:n.reward_id,wrapper_class:".w-sub-col.w-col.w-col-4",options:[]}},{label:"delivery_filter",component:Et,data:{custom_label:[$r,{content:[Kr],text:"Status da entrega"}],onchange:u,name:"delivery_status",vm:n.delivery_status,wrapper_class:".w-col.w-col-4",options:[{value:"",option:"Todos"},{value:"undelivered",option:"Não enviada"},{value:"delivered",option:"Enviada"},{value:"error",option:"Erro no envio"},{value:"received",option:"Recebida"}]}},{label:"payment_state",component:Et,data:{custom_label:[$r,{text:"Status do apoio",content:[Xr,{project:i}]}],name:"state",onchange:u,vm:n.state,wrapper_class:".w-sub-col.w-col.w-col-4",options:l}}];n.project_id(t.root.getAttribute("data-id"));var m=a.loaderWithToken(c.rewardDetail.getPageOptions({project_id:"eq."+n.project_id()})),f=a.loaderWithToken(c.projectDetail.getPageOptions({project_id:"eq."+n.project_id()}));m.load().then(s),f.load().then(function(e){i(e),d(o.first(e).state)});var w=function(){var e=[];return m()||(e=o.map(s(),function(e){return{value:e.id,option:"R$ "+pt.formatNumber(e.minimum_value,2,3)+" - "+e.description.substring(0,20)}})),e.unshift({value:null,option:"Sem recompensa"}),e.unshift({value:"",option:"Todas"}),e};return r.collection().length||r.firstPage(n.parameters()),{listVM:r,filterVM:n,filterBuilder:p,submit:u,lReward:m,lProject:f,rewards:s,project:i,mapRewardsToOptions:w}},view:function(t){var r=t.listVM;return t.lProject()?pt.loader():[e.component(ir,{project:e.prop(o.first(t.project()))}),e.component(Vr,{submit:t.submit,filterBuilder:t.filterBuilder,form:t.filterVM.formDescriber,mapRewardsToOptions:t.mapRewardsToOptions,filterVM:t.filterVM}),e(".divider.u-margintop-30"),e.component(Wr,{submit:t.submit,list:r,filterVM:t.filterVM,project:e.prop(o.first(t.project()))})]}},Qr={controller:function(e){return Ko.init(e.project_id,e.project_user_id),Ko},view:function(t){var o=t.currentProject;return o().is_owner_or_admin?e.component(ir,{project:o}):""}},Zr={view:function(t){var o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=o.action||"/pt/explore?ref=ctrse_explore_pgsearch",n=o.method||"GET";return e("#search.w-container.w-hidden-main.w-hidden-medium",[e(".w-row",[e(".w-col.w-col-10.u-marginbottom-20",[e(".w-form",[e("form#email-form",{action:r,method:n},[e(".w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e('input[type="text"][name="pg_search"][placeholder="Busque projetos"]#pg_search_inside.w-input.text-field.negative.prefix')]),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("button.w-inline-block.btn.btn-dark.btn-attached.postfix",[e('img.header-lupa[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/54e44178b2135fce2b6cd235_lupa.png"]')])])])])])])])])}},en={view:function(t,o){var r=o.category;return e(".w-col.w-col-2.w-col-small-6.w-col-tiny-6",[e("a.w-inline-block.btn-category[href='#by_category_id/"+r.id+"']",[e("div",[r.name,e("span.badge.explore",r.online_projects)])])])}},tn={controller:function(e){return{largeBg:function(){return!o.isUndefined(e)&&(!o.isUndefined(e.largeBg)&&e.largeBg)}()}},view:function(t,o){return e(".w-section.section"+(t.largeBg?".bg-backs-carrosel.section-large":""),[e(".w-container",[e(".card.card-big",[e(".w-row",[e(".w-col.w-col-8",[e(".fontsize-largest.u-marginbottom-20","Encontre projetos incríveis junto com seus amigos"),e(".fontsize-small","O universo do Catarse junto com a sua rede do Facebook te farão descobrir projetos incríveis!")]),e(".w-col.w-col-4",[e('a.w-button.btn.btn-fb.btn-large.u-margintop-30.u-marginbottom-10[href="/connect-facebook"]',"Conecte seu facebook"),e(".fontsize-smallest.fontcolor-secondary.u-text-center","Nós nunca postaremos nada no facebook sem sua permissão")])])])])])}},on=o.partial(pt.i18nScope,"pages.explore"),rn={controller:function(r){var n=a.filtersVM,i=go(),s=i.filters,l=pt.paramByName("filter")||"all",d="all",u=e.prop(s[l]),p=function(e){u(s[e]),S()},m=function(){u(s[l]),i.setContextFilters(["finished","all","contributed_by_friends"])},f=pt.getUser()||{},w=f.has_fb_auth,b=function(t){return e.component(rr,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},g=function(){var t="",o="",r=!1;return"all"===u().keyName?(r=!0,t="Ordenados por popularidade ",o="O nosso fator popularidade é uma mistura da seleção do time do Catarse com um valor que é calculado pela velocidade de arrecadação do projeto"):"finished"===u().keyName?(r=!0,t="Ordenados por R$ alcançado ",o="Os projetos com maior meta de arrecadação alcançada ficam no topo"):"contributed_by_friends"===u().keyName&&(r=!0,t="Projetos apoiados por amigos ",o="Projetos apoiados por amigos"),r?e(".fontsize-smaller.fontcolor-secondary",[t,b(o)]):""},h=e.prop(!1),_=e.prop([]),v=e.prop(),y=function(e){return o.find(_(),function(t){return t.id===parseInt(e)})},j=o.compose(y,v),k=function(){return c.category.getPageWithToken(n({}).order({name:"asc"}).parameters()).then(_)},x=t.translations[t.currentLocale()].projects.index.explore_categories,z=function(e){return!o.isUndefined(x[e])},C=function(e){return o.size(o.filter(e,function(e){return e.score>=1}))>=3},E=e.prop({collection:e.prop([]),isLoading:function(){return!0},isLastPage:function(){return!0}}),S=function(){var t=window.location.hash.match(/\#([^\/]*)\/?(\d+)?/),r=t&&t[2]&&y(t[2]),i=function(){var e=n({category_id:"eq"});return t&&t[1]&&s[t[1]]||r&&{title:r.name,filter:e.category_id(r.id)}},l=i()||u(),d=pt.paramByName("pg_search"),p=function(){var t=a.loaderWithToken(c.projectSearch.postOptions({query:d})),o={collection:e.prop([]),isLoading:t,isLastPage:function(){return!0},nextPage:function(){return!1}};return t.load().then(o.collection),o},m=function(){var e=a.paginationVM(c.project),t=o.extend({},u().filter.parameters(),l.filter.order({open_for_contributions:"desc",state_order:"asc",state:"desc",score:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e},f=function(){var e=a.paginationVM(c.finishedProject),t=o.extend({},u().filter.parameters(),l.filter.order({state_order:"asc",state:"desc",pledged:"desc"}).parameters());return e.firstPage(t),e};o.isString(d)&&d.length>0&&null===t?(h(!0),P("Busca "+d),E(p())):"finished"===u().keyName?(h(!1),E(f())):(h(!1),P(l.title),E(o.isNull(t)||"finished"!=t[1]?m():f())),v(r&&r.id),M(t||o.isString(d)&&d.length>0?!1:!0)},P=e.prop(),M=pt.toggleProp(!1,!0);return window.addEventListener("hashchange",function(){m(),S(),e.redraw()},!1),m(),c.project.pageSize(9),k().then(S),r.filter&&u(s[r.filter]),u()||u(s[l]),{categories:_,changeFilter:p,fallbackFilter:d,projects:E,category:j,title:P,hint:g,filtersMap:s,currentFilter:u,projectFiltersVM:i,toggleCategories:M,isSearch:h,hasFBAuth:w,checkForMinScoredProjects:C,categoryId:v,hasSpecialFooter:z,externalLinkCategories:x}},view:function(r,n){var a=r.categoryId,i=r.projects().collection(),s=i.length,l=r.currentFilter().keyName,c="contributed_by_friends"===l,d=r.hasSpecialFooter(a()),u=[];return r.projects().isLoading()||!o.isEmpty(i)||r.isSearch()||c&&!r.hasFBAuth||(r.projectFiltersVM.removeContextFilter(r.currentFilter()),r.changeFilter(r.fallbackFilter)),e("#explore",{config:pt.setPageTitle(t.t("header_html",on()))},[e(".w-section.hero-search",[e.component(Zr),e(".w-container.u-marginbottom-10",[e(".u-text-center.u-marginbottom-40",[e('a#explore-open.link-hidden-white.fontweight-light.fontsize-larger[href="javascript:void(0);"]',{onclick:function(){return r.toggleCategories.toggle()}},["Explore projetos incríveis ",e("span#explore-btn.fa.fa-angle-down"+(r.toggleCategories()?".opened":""),"")])]),e("#categories.category-slider"+(r.toggleCategories()?".opened":""),[e(".w-row.u-marginbottom-30",[o.map(r.categories(),function(t){return e.component(en,{category:t})})])])])]),e(".w-section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-9.w-col-small-8.w-col-tiny-8",[e(".fontsize-larger",r.title()),r.hint()]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-4",r.isSearch()?"":e("select.w-select.text-field.positive",{onchange:e.withAttr("value",r.changeFilter)},o.map(r.projectFiltersVM.getContextFilters(),function(t,o){var n=r.currentFilter()===t;return e('option[value="'+t.keyName+'"]',{selected:n},t.nicename)})))])])]),c&&o.isEmpty(i)?r.hasFBAuth?"":e.component(tn):"",e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-row",o.map(i,function(t,n){var a="small",d="ctrse_explore";return r.isSearch()?d="ctrse_explore_pgsearch":c?d="ctrse_explore_friends":"all"===l&&t.score>=1&&(0===n?(a="big",d="ctrse_explore_featured_big",u=[s-1,s-2]):1===n||2===n?r.checkForMinScoredProjects(i)?(a="medium",d="ctrse_explore_featured_medium",u=[]):(a="big",d="ctrse_explore_featured_big",u=[s-1]):d="ctrse_explore_featured"),o.indexOf(u,n)>-1&&!r.projects().isLastPage()?"":e.component(Zo,{project:t,ref:d,type:a,showFriends:c})})),r.projects().isLoading()?pt.loader():o.isEmpty(i)&&r.hasFBAuth?e(".fontsize-base.w-col.w-col-12","Nenhum projeto para mostrar."):""])])]),e(".w-section.u-marginbottom-80",[e(".w-container",[e(".w-row",[e(".w-col.w-col-2.w-col-push-5",[r.projects().isLastPage()||r.projects().isLoading()||o.isEmpty(i)?"":e("a.btn.btn-medium.btn-terciary[href='#loadMore']",{onclick:function(){return r.projects().nextPage(),!1}},"Carregar mais")])])])]),e(".w-section.section-large.before-footer.u-margintop-80.bg-gray.divider",[e(".w-container.u-text-center",[e("img.u-marginbottom-20.icon-hero",{src:d?r.externalLinkCategories[a()].icon:"https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/56f4414d3a0fcc0124ec9a24_icon-launch-explore.png"}),e("h2.fontsize-larger.u-marginbottom-60",d?r.externalLinkCategories[a()].title:"Lance sua campanha no Catarse!"),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[d?e("a.w-button.btn.btn-large",{href:r.externalLinkCategories[a()].link+"?ref=ctrse_explore"},r.externalLinkCategories[a()].cta):e("a.w-button.btn.btn-large",{href:"/start?ref=ctrse_explore"},"Aprenda como")])])])])])}},nn=function(){var e=t.translations[t.currentLocale()].projects.home,o=e.banners;return{banners:o}},an={controller:function(t){var o=void 0,r=e.prop(0),n=e.prop(1600),a=t.sliderTime||6500,i=function(){r(r()>0?r()-1:t.slides.length-1)},s=function(){r(r()<t.slides.length-1?r()+1:0)},l=function(){o=setInterval(function(){s(),e.redraw()},a)},c=function(){clearInterval(o),l()},d=function(t,r,a){r||(n(Math.max(document.documentElement.clientWidth,window.innerWidth||0)),e.redraw()),a.onunload=function(){return clearInterval(o)}};return l(),{config:d,selectedSlideIdx:r,translationSize:n,decrementSlide:i,incrementSlide:s,resetSliderTimer:c}},view:function(t,r){var n=r.slideClass||"",a=r.wrapperClass||"",i=r.effect||"slide",s=function(e,o){e(o),t.resetSliderTimer(),r.onchange&&r.onchange()},l=function(e,o){var r="transform: "+o+"; -webkit-transform: "+o+"; -ms-transform:"+o,n=e===t.selectedSlideIdx()?"opacity: 1; visibility: visible;":"opacity: 0; visibility: hidden;";return"fade"===i?n:r};return e(".w-slider."+a,{config:t.config},[e(".fontsize-larger",r.title),e(".w-slider-mask",[o.map(r.slides,function(o,r){var a=(r-t.selectedSlideIdx())*t.translationSize(),i="translate3d("+a+"px, 0, 0)";return e(".slide.w-slide."+n,{style:l(r,i)+" "+o.customStyle},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8.w-col-push-2",o.content)])])])}),e("#slide-prev.w-slider-arrow-left.w-hidden-small.w-hidden-tiny",{onclick:function(){return s(t.decrementSlide)}},[e(".w-icon-slider-left.fa.fa-lg.fa-angle-left.fontcolor-terciary")]),e("#slide-next.w-slider-arrow-right.w-hidden-small.w-hidden-tiny",{onclick:function(){return s(t.incrementSlide)}},[e(".w-icon-slider-right.fa.fa-lg.fa-angle-right.fontcolor-terciary")]),e(".w-slider-nav.w-slider-nav-invert.w-round.slide-nav",o(r.slides.length).times(function(o){return e(".slide-bullet.w-slider-dot"+(t.selectedSlideIdx()===o?".w-active":""),{onclick:function(){return s(t.selectedSlideIdx,o)}})}))])])}},sn={getBlogPosts:function(){var t=e.deferred(),r=o.first(document.getElementsByTagName("body")).getAttribute("data-blog");return r?t.resolve(JSON.parse(r)):e.request({method:"GET",url:"/posts"}).then(t.resolve)["catch"](t.reject),t.promise}},ln={controller:function(t){var o=e.prop([]),r=e.prop(!1);return sn.getBlogPosts().then(o)["catch"](r),{posts:o,error:r}},view:function(t,r){return e("section.section-large.bg-gray.before-footer[id='blog']",e(".w-container",[e(".u-text-center",[e("a[href='http://blog.catarse.me'][target='blank']",e("img.u-marginbottom-10[alt='Icon blog'][src='/assets/icon-blog.png']")),e(".fontsize-large.u-marginbottom-60.text-success",e("a.link-hidden-success[href='http://blog.catarse.me'][target='__blank']","Blog do Catarse"))]),e(".w-row",o.map(t.posts(),function(t){return e(".w-col.w-col-4.col-blog-post",[e('a.link-hidden.fontweight-semibold.fontsize-base.u-marginbottom-10[href="'+t[1][1]+"\"][target='__blank']",t[0][1]),e(".fontsize-smaller.fontcolor-secondary.u-margintop-10",e.trust(pt.strip(t[6][1].substr(0,130))+"..."))])})),t.error()?e(".w-row",e(".w-col.w-col-12.u-text-center","Erro ao carregar posts...")):""]))}},cn=o.partial(pt.i18nScope,"projects.home"),dn={controller:function(t){var r=o.partial(o.sample,o,6),n=a.loaderWithToken,i=c.project,s=go().filters,l=a.filtersVM({user_id:"eq"}),d=a.paginationVM(c.userFriend,"user_id.desc",{Prefer:"count=exact"}),u=pt.getUser()||{},p=u.has_fb_auth,m=nn();i.pageSize(20),l.user_id(u.user_id),p&&!d.collection().length&&d.firstPage(l.parameters());var f=o.map(["score","contributed_by_friends"],function(t){var a=s[t],l=n(i.getPageOptions(o.extend({},{order:"score.desc"},a.filter.parameters()))),c=e.prop([]);return l.load().then(o.compose(c,r)),{title:a.nicename,hash:"score"===t?"all":t,collection:c,loader:l,showFriends:"contributed_by_friends"===t}});return{collections:f,slidesContent:m.banners,hasFBAuth:p}},view:function(r){var n=function(){return o.map(r.slidesContent,function(t){var o="background-image: url("+t.image+");",r=e(".w-container.u-text-center",[e(".w-row.u-marginbottom-40",[e("h1.fontcolor-negative.fontsize-megajumbo.u-marginbottom-20",e.trust(t.title)),e("h2.fontcolor-negative.fontsize-large",e.trust(t.subtitle))]),e("a.btn.btn-large.u-marginbottom-10.btn-inline",{href:t.link},t.cta)]);return{content:r,customStyle:o}})};return e("#projects-home-component",{config:pt.setPageTitle(t.t("header_html",cn()))},[e.component(an,{slides:n(),effect:"fade",slideClass:"hero-slide start",wrapperClass:"hero-full hero-full-slide",sliderTime:1e4}),o.map(r.collections,function(t){return e.component(er,{collection:t,title:t.title,ref:"home_"+("all"===t.hash?"score":t.hash),showFriends:t.showFriends})}),r.hasFBAuth?"":e.component(tn,{largeBg:!0}),e.component(ln)])}},un={controller:function(){return{displayEmbed:pt.toggleProp(!1,!0)}},view:function(t,o){return e(".pop-share",{style:"display: block;"},[e(".w-hidden-main.w-hidden-medium.w-clearfix",[e("a.btn.btn-small.btn-terciary.btn-inline.u-right",{onclick:o.displayShareBox.toggle},"Fechar"),e(".fontsize-small.fontweight-semibold.u-marginbottom-30","Compartilhe este projeto")]),e(".w-widget.w-widget-twitter.w-hidden-small.w-hidden-tiny.share-block",[e('iframe[allowtransparency="true"][width="120px"][height="22px"][frameborder="0"][scrolling="no"][src="//platform.twitter.com/widgets/tweet_button.8d007ddfc184e6776be76fe9e5e52d69.en.html#_=1442425984936&count=horizontal&dnt=false&id=twitter-widget-1&lang=en&original_referer=https%3A%2F%2Fwww.catarse.me%2Fpt%2F'+o.project().permalink+"&size=m&text=Confira%20o%20projeto%20"+o.project().name+"%20no%20%40catarse&type=share&url=https%3A%2F%2Fwww.catarse.me%2Fpt%2F"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share&via=catarse"]')]),e('a.w-hidden-small.widget-embed.w-hidden-tiny.fontsize-small.link-hidden.fontcolor-secondary[href="js:void(0);"]',{onclick:t.displayEmbed.toggle},"< embed >"),t.displayEmbed()?e(".embed-expanded.u-margintop-30",[e(".fontsize-small.fontweight-semibold.u-marginbottom-20","Insira um widget em seu site"),e(".w-form",[e('input.w-input[type="text"][value="<iframe frameborder="0" height="340px" src="https://www.catarse.me/pt/projects/'+o.project().project_id+'/embed" width="300px" scrolling="no"></iframe>"]')]),e(".card-embed",[e('iframe[frameborder="0"][height="350px"][src="/projects/'+o.project().project_id+'/embed"][width="300px"][scrolling="no"]')])]):"",o.project().permalink?e.component(Sr,{mobile:!0,url:"https://www.catarse.me/"+o.project().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",e('a.w-hidden-main.w-hidden-medium.btn.btn-medium.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+o.project().name+"%20https://www.catarse.me/"+o.project().permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Tweet"]),e('a.w-hidden-main.w-hidden-medium.btn.btn-medium[data-action="share/whatsapp/share"]',{href:"whatsapp://send?text="+encodeURIComponent("https://www.catarse.me/"+o.project().permalink+"/?ref=whatsapp&utm_source=whatsapp&utm_medium=social&utm_campaign=project_share")},[e("span.fa.fa-whatsapp")," Whatsapp"])])}},pn={view:function(t,r){var n=r.project,a=n().address||{state_acronym:"",city:""};return o.isNull(a)?"":e('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light.u-marginbottom-10[href="/pt/explore?pg_search='+a.state_acronym+'"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_location_link",lbl:a.city+" "+a.state_acronym,project:n()})},[e("span.fa.fa-map-marker")," "+a.city+", "+a.state_acronym])}},mn={view:function(t,o){var r=o.project;return r?e('a.btn.btn-inline.btn-small.btn-transparent.link-hidden-light[href="/pt/explore#by_category_id/'+r().category_id+'"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_category_link",lbl:r().category_name,project:r()})},[e("span.fa.fa-tag")," ",r().category_name]):""}},fn={controller:function(){return{displayShareBox:pt.toggleProp(!1,!0)}},view:function(t,o){var r=o.project;return e("#project-highlight",[r().video_embed_url?e(".w-embed.w-video.project-video",{style:"min-height: 240px;"},[e('iframe.embedly-embed[itemprop="video"][src="'+r().video_embed_url+'"][frameborder="0"][allowFullScreen]')]):e(".project-image",{style:"background-image:url('"+(r().original_image||r().project_img)+"');"}),e(".w-hidden-small.w-hidden-tiny",[e.component(pn,{project:r}),e.component(mn,{project:r})]),e(".project-blurb",r().headline),e(".project-share.w-hidden-small.w-hidden-tiny",e(".u-marginbottom-30.u-text-center-small-only",[e(".w-inline-block.fontcolor-secondary.fontsize-smaller.u-marginright-20","Compartilhar:"),r().permalink?e.component(Sr,{url:"https://www.catarse.me/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share"}):"",r().permalink?e.component(Sr,{messenger:!0,url:"https://www.catarse.me/"+r().permalink+"?ref=facebook&utm_source=facebook.com&utm_medium=messenger&utm_campaign=project_share"}):"",e("button#more-share.btn.btn-inline.btn-medium.btn-terciary",{style:{transition:"all 0.5s ease 0s"},onclick:t.displayShareBox.toggle},["···"," Mais"]),t.displayShareBox()?e(un,{project:r,displayShareBox:t.displayShareBox}):""]))])}},wn={view:function(t,r){var n=r.project(),a=n.mode,i="aon"===a?"/assets/aon-badge.png":"/assets/flex-badge.png",s="aon"===a?"Campanha Tudo-ou-nada ":"Campanha Flexível ",l=o.isNull(n.goal)?"não definida":pt.formatNumber(n.goal),c=function(t){return e.component(rr,{el:t,text:"aon"===a?"Somente receberá os recursos se atingir ou ultrapassar a meta até o dia "+pt.momentify(n.zone_expires_at,"DD/MM/YYYY")+".":"O realizador receberá todos os recursos quando encerrar a campanha, mesmo que não tenha atingido esta meta.",width:280})};return e("#"+a+".w-row",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[o.isEmpty(n)?"":e('img[src="'+i+"\"][width='30']")]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontsize-base.fontweight-semibold","Meta R$ "+pt.selfOrEmpty(l,"--")),e(".w-inline-block.fontsize-smallest._w-inline-block",[o.isEmpty(n)?"":s,c("span.w-inline-block.tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary")])])])}},bn={controller:function(t){var o=e.prop(!1),r=t.project,n=a.filtersVM({project_id:"eq"}),i="reminder",s=e.prop(!1),l=function(){if(!pt.getUser())return pt.storeAction(i,r().project_id),pt.navigateToDevise();var t=r().in_reminder?c.projectReminder.deleteOptions(n.parameters()):c.projectReminder.postOptions({project_id:r().project_id});o=a.loaderWithToken(t),o.load().then(function(){r().in_reminder=!r().in_reminder,r().in_reminder?(s(!0),setTimeout(function(){s(!1),e.redraw()},5e3)):s(!1)})};return pt.callStoredAction(i)==r().project_id&&l(),n.project_id(r().project_id),{l:o,submitReminder:l,popNotification:s}},view:function(t,o){var r="button"===o.type?"":".u-text-center.u-marginbottom-30",n="button"===o.type?"w-button btn btn-terciary btn-no-border":"btn-link link-hidden fontsize-large",a=(o.hideTextOnMobile||!1,o.project),i=pt.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:a()},t.submitReminder);return e("#project-reminder"+r,[e("a.btn.btn-small.btn-terciary.w-hidden-main.w-hidden-medium[data-ix='popshare'][href='#']",{onclick:i},a().in_reminder?[e("span.fa.fa-heart")," Lembrete ativo"]:[e("span.fa.fa-heart-o")," Lembrar-me"]),e('button[class="w-hidden-small w-hidden-tiny '+n+" "+(a().in_reminder?"link-hidden-success":"fontcolor-secondary")+' fontweight-semibold"]',{onclick:i},[t.l()?pt.loader():e(a().in_reminder?"span.fa.fa-heart":"span.fa.fa-heart-o")]),t.popNotification()?e.component(Pr,{message:"Ok! Vamos te mandar um lembrete por e-mail 48 horas antes do fim da campanha"}):""])}},gn={controller:function(t){var o=e.prop(!1),r=e.prop(!1),n=t,i=e.prop(!1),s=pt.getUser()||{name:"",email:""},l=e.prop(Ro.displayName(s)),d=e.prop(s.email),u=e.prop(""),p=function(){if(o())return!1;i(!0),u(u().split("\n").join("<br />"));var e=pt.getCurrentProject(),t=c.directMessage.postOptions({from_name:l(),from_email:d(),user_id:pt.getUser().user_id,content:u(),project_id:e?e.project_id:null,to_user_id:n().id});return o=a.loaderWithToken(t),o.load().then(r(!0)),i(!1),!1};return{sendMessage:p,submitDisabled:i,sendSuccess:r,userDetails:t,from_name:l,from_email:d,content:u,l:o}},view:function(t,r){var n=e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large","Sua mensagem foi enviada com sucesso para "+t.userDetails().name+". Você vai receber uma cópia no seu email e pode seguir a conversa por lá!")]),a=[e(".modal-dialog-content",[e(".w-form",[e("form",{onsubmit:pt.validate().submit([{prop:t.from_name,rule:"text"},{prop:t.from_email,rule:"email"},{prop:t.content,rule:"text"}],t.sendMessage)},[e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.fontsize-smaller","Seu nome"),e("input.w-input.text-field[value='"+t.from_name()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_name),"class":pt.validate().hasError(t.from_name)?"error":""})]),e(".w-col.w-col-6",[e("label.fontsize-smaller","Seu email"),e("input.w-input.text-field[value='"+t.from_email()+"'][type='text'][required='required']",{onchange:e.withAttr("value",t.from_email),"class":pt.validate().hasError(t.from_email)?"error":""})])]),e("label","Mensagem"),e("textarea.w-input.text-field.height-small[required='required']",{onchange:e.withAttr("value",t.content),"class":pt.validate().hasError(t.content)?"error":""}),e(".u-marginbottom-10.fontsize-smallest.fontcolor-terciary","Você receberá uma cópia desta mensagem em seu email."),e(".w-row",pt.validationErrors().length?o.map(pt.validationErrors(),function(t){return e("span.fontsize-smallest.text-error",[e("span.fa.fa-exclamation-triangle")," "+t.message,e("br")])}):""),e(".modal-dialog-nav-bottom",e(".w-row",e(".w-col.w-col-6.w-col-push-3",t.l()?pt.loader():e('input.w-button.btn.btn-large[type="submit"][value="Enviar mensagem"]',{disabled:t.submitDisabled()}))))])])])];return e("div",[e(".modal-dialog-header",e(".fontsize-large.u-text-center","Enviar mensagem")),t.sendSuccess()?n:a])}},hn={controller:function(t){var o=e.prop(t.following||!1),r=a.filtersVM({follow_id:"eq"}),n=e.prop(!1),i=e.prop(!1),s=c.userFollow.postOptions({follow_id:t.follow_id}),l=function(){return r.follow_id(t.follow_id),c.userFollow.deleteOptions(r.parameters())}(),d=function(){var e=a.loaderWithToken(s);n(!0),e.load().then(function(){o(!0),n(!1)})},u=function(){var e=a.loaderWithToken(l);n(!0),e.load().then(function(){o(!1),n(!1)})};return{following:o,follow:d,unfollow:u,loading:n,hover:i}},view:function(t,o){if(pt.userSignedIn()&&pt.getUserID()!=o.follow_id){var r=o.disabledClass||".w-button.btn.btn-medium.btn-terciary.u-margintop-20",n=o.enabledClass||".w-button.btn.btn-medium.u-margintop-20";return t.loading()?pt.loader():t.following()?e("a"+n,{onclick:t.unfollow,onmouseover:function(){return t.hover(!0)},onmouseout:function(){return t.hover(!1)}},t.hover()?"Deixar de seguir":"Seguindo"):e("a"+r,{onclick:t.follow},"Seguir")}return e("")}},_n={controller:function(t){var o=t.project||e.prop({}),r=pt.toggleProp(!1,!0),n="message",a=function(){return pt.getUser()?void r(!0):(pt.storeAction(n,o().project_id),pt.navigateToDevise())};return pt.callStoredAction(n)==o().project_id&&r(!0),{displayModal:r,sendMessage:a}},view:function(t,r){var n=r.project,a=[gn,r.userDetails],i=r.userDetails();return e("#user-card",o.isEmpty(i)?"carregando...":e(".u-marginbottom-30.u-text-center-small-only",[t.displayModal()?e.component(sr,{displayModal:t.displayModal,content:a}):"",e(".w-row",[e(".w-col.w-col-4",[e('img.thumb.u-marginbottom-30.u-round[width="100"][itemprop="image"][src="'+Ro.displayImage(i)+'"]')]),e(".w-col.w-col-8",[e('.fontsize-small.link-hidden.fontweight-semibold.u-marginbottom-10.lineheight-tight[itemprop="name"]',[e('a.link-hidden[href="/users/'+i.id+'"]',{config:e.route,onclick:function(){e.route("/users/"+i.id,{user_id:i.id}),pt.analytics.event({cat:"project_view",act:"project_creator_link",lbl:i.id,project:n()})}},Ro.displayName(i))]),e(".fontsize-smallest",[pt.pluralize(i.total_published_projects," criado"," criados"),e.trust("&nbsp;&nbsp;|&nbsp;&nbsp;"),pt.pluralize(i.total_contributed_projects," apoiado"," apoiados")]),e("ul.w-hidden-tiny.w-hidden-small.w-list-unstyled.fontsize-smaller.fontweight-semibold.u-margintop-20.u-marginbottom-20",[o.isEmpty(i.facebook_link)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+i.facebook_link+'"][target="_blank"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_creator_fb",lbl:i.facebook_link,project:n()})},"Perfil no Facebook")]),o.isEmpty(i.twitter_username)?"":e("li",[e('a.link-hidden[itemprop="url"][href="https://twitter.com/'+i.twitter_username+'"][target="_blank"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_creator_twitter",lbl:i.twitter_username,project:n()})},"Perfil no Twitter")]),o.map(i.links,function(t){var r=pt.parseUrl(t.link);return o.isEmpty(r.hostname)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+t.link+'"][target="_blank"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_creator_otherlinks",lbl:t.link,project:n()})},r.hostname)])})]),o.isEmpty(i)?"":[e(hn,{enabledClass:"a.w-button.btn.btn-terciary.btn-small..u-marginbottom-10",disabledClass:"a.w-button.btn.btn-terciary.btn-small.u-marginbottom-10",follow_id:i.id,following:i.following_this_user}),e("a.w-button.btn.btn-terciary.btn-small[href='javascript:void(0);']",{onclick:pt.analytics.event({cat:"project_view",act:"project_creator_sendmsg",lbl:i.id,project:n()},t.sendMessage)},"Contato")],r.project().is_admin_role?e("p",i.email):""])])]))}},vn=o.partial(pt.i18nScope,"projects.project_sidebar"),yn={controller:function(e){var t=e.project,o=function(e,o){o||!function(){var o=void 0,r=0,n=0,a=0,i=t().pledged/t().progress,s=t().total_contributors/t().progress,l=document.getElementById("progressBar"),c=document.getElementById("pledged"),d=document.getElementById("contributors"),u=function(){r<=parseInt(t().progress)?(l.style.width=r+"%",c.innerText="R$ "+pt.formatNumber(n),d.innerText=parseInt(a)+" pessoas",e.innerText=r+"%",n+=i,a+=s,r+=1):clearInterval(o)},p=function(){o=setInterval(u,28)};setTimeout(function(){p()},1800)}()};return{animateProgress:o,displayShareBox:pt.toggleProp(!1,!0)}},view:function(r,n){var a=n.project,i=a().elapsed_time,s=a().remaining_time,l=function(){var e={waiting_funds:"card-waiting",successful:"card-success",failed:"card-error",draft:"card-dark",in_analysis:"card-dark",approved:"card-dark"};return e[a().state]?"card u-radius zindex-10 "+e[a().state]:""},c=function(){var e={approved:t.t("display_status.approved",vn()),online:pt.existy(a().zone_expires_at)&&a().open_for_contributions?t.t("display_status.online",vn({date:pt.momentify(a().zone_expires_at)})):"",failed:t.t("display_status.failed",vn({date:pt.momentify(a().zone_expires_at),goal:a().goal})),rejected:t.t("display_status.rejected",vn()),in_analysis:t.t("display_status.in_analysis",vn()),successful:t.t("display_status.successful",vn({date:pt.momentify(a().zone_expires_at)})),waiting_funds:t.t("display_status.waiting_funds",vn()),draft:t.t("display_status.draft",vn())};return e[a().state]};return e("#project-sidebar.aside",[e(".project-stats",[e(".project-stats-inner",[e(".project-stats-info",[e(".u-marginbottom-20",[e("#pledged.fontsize-largest.fontweight-semibold.u-text-center-small-only","R$ "+(a().pledged?pt.formatNumber(a().pledged):"0")),e(".fontsize-small.u-text-center-small-only",[t.t("contributors_call",vn()),e("span#contributors.fontweight-semibold",t.t("contributors_count",vn({count:a().total_contributors}))),!a().expires_at&&i?" em "+t.t("datetime.distance_in_words.x_"+i.unit,{count:i.total},vn()):""])]),e(".meter",[e("#progressBar.meter-fill",{style:{width:a().progress+"%"}})]),e(".w-row.u-margintop-10",[e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[e(".fontsize-small.fontweight-semibold.lineheight-tighter",(a().progress?parseInt(a().progress):"0")+"%")]),e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6.w-clearfix",[e(".u-right.fontsize-small.lineheight-tighter",s&&s.total?[e("span.fontweight-semibold",s.total),t.t("remaining_time."+s.unit,vn({count:s.total}))]:"")])])]),e(".w-row",[e.component(wn,{project:a})])]),a().open_for_contributions?e(".back-project-btn-div",[e(".back-project--btn-row",[e('a#contribute_project_form.btn.btn-large.u-marginbottom-20[href="javascript:void(0);"]',{onclick:pt.analytics.event({cat:"contribution_create",act:"contribution_button_click",project:a()},function(){return pt.navigateTo("/projects/"+a().project_id+"/contributions/new")})},t.t("submit",vn()))]),e(".back-project-btn-row-right",e.component(bn,{project:a,type:"link"}))]):"",e(".friend-backed-card.project-page",[!o.isUndefined(a())&&a().contributed_by_friends?e.component(Go,{project:a(),wrapper:"div"}):""]),e('div[class="fontsize-smaller u-marginbottom-30 '+l()+'"]',c())]),e(".project-share.w-hidden-main.w-hidden-medium",[e.component(pn,{project:a}),e.component(mn,{project:a}),e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-inline.btn-medium.btn-terciary",{onclick:r.displayShareBox.toggle},"Compartilhar este projeto")),r.displayShareBox()?e(un,{project:a,displayShareBox:r.displayShareBox}):""]),e(".user-c",e.component(_n,{userDetails:n.userDetails,project:a}))])}},jn={view:function(t,r){var n=r.project;return o.isUndefined(n())?e("div",""):e(".w-section.page-header.u-text-center",[e(".w-container",[e('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',pt.selfOrEmpty(n().name||n().project_name)),e('h2.fontsize-base.lineheight-looser[itemprop="author"]',["por ",n().user?Ro.displayName(n().user):n().owner_public_name?n().owner_name:""]),r.children])]);
}},kn={controller:function(){var e=function(e,t){Ro.toggleDelivery(e,t).then(function(){var e=t.reward_sent_at?"delivered":"undelivered";t.delivery_status="received"===t.delivery_status?e:"received"})};return{toggleDelivery:e}},view:function(t,o){var r=o.contribution;return h.canBeDelivered(r)?e(".u-text-center.w-col.w-col-1",{onclick:function(){return t.toggleDelivery(r.project_id,r)}},[e(".fontsize-smallest",e("a.checkbox-big"+("received"===r.delivery_status?".checkbox--selected.fa.fa-check.fa-lg":""),"")),e(".fontcolor-secondary.fontsize-smallest.lineheight-looser","Recebi!")]):e("")}},xn={controller:function(e){var t=e.contribution,r=e.rewardDetails,n=o.findWhere(r(),{id:t.reward_id});return{contribution:t,chosenReward:n}},view:function(t,r){var n=r.contribution;return e(".user-contribution-detail",[e(".w-col.w-col-3",[e(".fontsize-smallest.lineheight-tight.fontweight-semibold.u-marginbottom-10","Valor do apoio:"),e(".fontsize-large","R$"+n.value)]),e(".w-col.w-col-3",e.component(Ft,{item:n})),e(".w-col.w-col-5",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10","Recompensa:"),e(".fontsize-smallest.lineheight-tight.u-marginbottom-20",o.isUndefined(t.chosenReward)?"Nenhuma recompensa selecionada.":t.chosenReward.description),e(".fontsize-smallest.lineheight-looser",o.isUndefined(t.chosenReward)?"":[e("span.fontweight-semibold","Estimativa de entrega: "),pt.momentify(t.chosenReward.deliver_at,"MMM/YYYY")]),h.canBeDelivered(n)?e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Status da entrega: "),pt.contributionStatusBadge(n)]):""]),e(kn,{contribution:n,wrapperClass:""})])}},zn={controller:function(e){var t=e.project,r=pt.getUser();return pt.isProjectPage()&&r&&!o.isUndefined(t())&&h.getUserProjectContributions(r.user_id,t().project_id,["paid","refunded","pending_refund"]).then(e.projectContributions),{projectContributions:e.projectContributions,showContributions:pt.toggleProp(!1,!0)}},view:function(t,r){var n=r.project,a=r.rewardDetails,i=o.isEmpty(t.projectContributions())?"":e(".card.card-terciary.u-radius.u-margintop-20",[e(".fontsize-small.u-text-center",[e("span.fa.fa-thumbs-up")," Você é apoiador deste projeto! ",e("a.alt-link[href='javascript:void(0);']",{onclick:t.showContributions.toggle},"Detalhes")]),t.showContributions()?e(".card.u-margintop-20",e(".w-row",o.map(t.projectContributions(),function(t){return e.component(xn,{contribution:t,rewardDetails:a})}))):""]);return o.isUndefined(n())?e(""):e("#project-header",[e(".w-section.section-product."+n().mode),e(jn,{project:n,children:i}),e(".w-section.project-main",[e(".w-container",[e(".w-row.project-main",[e(".w-col.w-col-8.project-highlight",e.component(fn,{project:n})),e(".w-col.w-col-4",e.component(yn,{project:n,userDetails:r.userDetails}))])])])])}},Cn={controller:function(t){var o=e.prop(!1),r=e.prop(-1),n=function(t){return function(){var n=t.getBoundingClientRect();window.scrollY<=r()&&(r(-1),o(!1),e.redraw()),(n.top<0||window.scrollY>r()&&r()>0)&&(o()||(r(window.scrollY),o(!0),e.redraw()))}},a=function(e,t){if(!t){var o=n(e);window.addEventListener("scroll",o)}};return{navDisplay:a,isFixed:o}},view:function(t,r){var n=r.project,a=r.rewardDetails,i=!t.isFixed()||n().is_owner_or_admin?".w-section.project-nav":".w-section.project-nav.project-nav-fixed";return e("nav-wrapper",n()?[e(i,{config:t.navDisplay},[e(".w-container",[e(".w-row",[e(".w-col.w-col-8",[o.isEmpty(a())?e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf '+(pt.hashMatch("#contribution_suggestions")?"selected":"")+'"][href="/'+n().permalink+'#contribution_suggestions"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_contribsuggestions_view",project:n()})},"Valores Sugeridos"):e('a[id="rewards-link"][class="w-hidden-main w-hidden-medium dashboard-nav-link mf  '+(pt.hashMatch("#rewards")?"selected":"")+'"][href="/'+n().permalink+'#rewards"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_rewards_view",project:n()})},"Recompensas"),e('a[id="about-link"][class="dashboard-nav-link mf '+(pt.hashMatch("#about")||pt.hashMatch("")?"selected":"")+'"][href="#about"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_about_view",project:n()})},"Sobre"),e('a[id="posts-link"][class="dashboard-nav-link mf '+(pt.hashMatch("#posts")?"selected":"")+'"][href="/'+n().permalink+'#posts"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_posts_view",project:n()})},["Novidades ",e("span.badge",n()?n().posts_count:"")]),e('a[id="contributions-link"][class="w-hidden-small w-hidden-tiny dashboard-nav-link mf '+(pt.hashMatch("#contributions")?"selected":"")+'"][href="#contributions"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_contributions_view",project:n()})},["Apoiadores ",e("span.badge.w-hidden-small.w-hidden-tiny",n()?n().total_contributors:"-")]),e('a[id="comments-link"][class="dashboard-nav-link mf '+(pt.hashMatch("#comments")?"selected":"")+'"][href="#comments"]',{style:"float: left;",onclick:pt.analytics.event({cat:"project_view",act:"project_comments_view",project:n()})},["Comentários ",n()?e('fb:comments-count[href="http://www.catarse.me/'+n().permalink+'"][class="badge project-fb-comment w-hidden-small w-hidden-tiny"][style="display: inline"]',e.trust("&nbsp;")):"-"])]),n()?e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",n().open_for_contributions?[e(".w-row.project-nav-back-button",[e(".w-col.w-col-6.w-col-medium-8",[e('a.w-button.btn[href="/projects/'+n().project_id+'/contributions/new"]',{onclick:pt.analytics.event({cat:"contribution_create",act:"contribution_floatingbtn_click",project:n()})},"Apoiar ‍este projeto")]),e(".w-col.w-col-6.w-col-medium-4",{onclick:pt.analytics.event({cat:"project_view",act:"project_floatingreminder_click",project:n()})},[e.component(bn,{project:n,type:"button",hideTextOnMobile:!0})])])]:""):""])])]),t.isFixed()&&!n().is_owner_or_admin?e(".w-section.project-nav"):""]:"")}},En=o.partial(pt.i18nScope,"projects.contributions"),Sn={controller:function(){var t="selectedReward",o=bo,r=e.prop(0),n=e.prop(""),a=function(e){return r(r()===e?0:e),!1},i=function(e,t){return!t&&e.focus()},s=function(e){n(e);var t=o.shippingFeeForCurrentReward(n)?Number(o.shippingFeeForCurrentReward(n).value):0,r=Number(o.selectedReward().minimum_value);o.applyMask(t+r+",00")},l=function(){var e=pt.monetaryToFloat(o.contributionValue),t=bo.hasShippingOptions(o.selectedReward())?o.shippingFeeForCurrentReward(n):{value:0};return!n()&&bo.hasShippingOptions(o.selectedReward())?o.error("Por favor, selecione uma opção de frete válida."):e<o.selectedReward().minimum_value+t.value?o.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+o.selectedReward().minimum_value+" + frete R$"+pt.formatNumber(t.value)):(o.error(""),pt.navigateTo("/projects/"+Ko.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+o.selectedReward().id+"&contribution%5Bvalue%5D="+e+"&contribution%5Bshipping_fee_id%5D="+t.id)),!1},c=function(e){return o.selectedReward().id===e.id},d=function(e){return r()===e.id};if(pt.getStoredObject(t)){var u=pt.getStoredObject(t),p=u.value,m=u.reward;pt.removeStoredObject(t),o.selectedReward(m),o.contributionValue(pt.applyMonetaryMask(p+",00")),l()}return o.getStates(),{setInput:i,submitContribution:l,toggleDescriptionExtended:a,isRewardOpened:c,isRewardDescriptionExtended:d,selectDestination:s,selectedDestination:n,error:o.error,applyMask:o.applyMask,selectReward:o.selectReward,locationOptions:o.locationOptions,contributionValue:o.contributionValue}},view:function(r,n){var a=n.project()||{open_for_contributions:!1};return e("#rewards.reward.u-marginbottom-30",o.map(o.sortBy(n.rewardDetails(),function(e){return Number(e.row_order)}),function(n){return e('div[class="'+(pt.rewardSouldOut(n)?"card-gone":"card-reward "+(a.open_for_contributions?"clickable":""))+' card card-secondary u-marginbottom-10"]',{onclick:pt.analytics.event({cat:"contribution_create",act:"contribution_reward_click",lbl:n.minimum_value,project:a,extraData:{reward_id:n.id,reward_value:n.minimum_value}},r.selectReward(n)),config:r.isRewardOpened(n)?pt.scrollTo():Function.prototype},[n.minimum_value>=100?e(".tag-circle-installment",[e(".fontsize-smallest.fontweight-semibold.lineheight-tightest","3x"),e(".fontsize-mini.lineheight-tightest","s/ juros")]):"",e(".u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","Para R$ "+pt.formatNumber(n.minimum_value)+" ou mais")]),e(".fontsize-smaller.u-margintop-20.reward-description",{"class":r.isRewardOpened(n)?"opened "+(r.isRewardDescriptionExtended(n)?"extended":""):""},e.trust(pt.simpleFormat(pt.strip(n.description)))),r.isRewardOpened(n)?e('a[href="javascript:void(0);"].alt-link.fontsize-smallest.gray.link-more.u-marginbottom-20',{onclick:function(){return r.toggleDescriptionExtended(n.id)}},[r.isRewardDescriptionExtended(n)?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.isRewardDescriptionExtended(n)?"reversed":""})]):"",e(".u-marginbottom-20.w-row",[e(".w-col.w-col-6",o.isEmpty(n.deliver_at)?"":[e(".fontcolor-secondary.fontsize-smallest",e("span","Entrega prevista:")),e(".fontsize-smallest",pt.momentify(n.deliver_at,"MMM/YYYY"))]),e(".w-col.w-col-6",bo.hasShippingOptions(n)||"presential"===n.shipping_options?[e(".fontcolor-secondary.fontsize-smallest",e("span","Envio:")),e(".fontsize-smallest",t.t("shipping_options."+n.shipping_options,En()))]:"")]),n.maximum_contributions>0?[pt.rewardSouldOut(n)?e(".u-margintop-10",[e("span.badge.badge-gone.fontsize-smaller","Esgotada")]):e(".u-margintop-10",[e("span.badge.badge-attention.fontsize-smaller",[e("span.fontweight-bold","Limitada"),a.open_for_contributions?" ("+pt.rewardRemaning(n)+" de "+n.maximum_contributions+" disponíveis)":""])])]:"",e(".fontcolor-secondary.fontsize-smallest.fontweight-semibold",pt.pluralize(n.paid_count," apoio"," apoios")),n.waiting_payment_count>0?e(".maximum_contributions.in_time_to_confirm.clearfix",[e(".pending.fontsize-smallest.fontcolor-secondary",pt.pluralize(n.waiting_payment_count," apoio em prazo de confirmação"," apoios em prazo de confirmação."))]):"",a.open_for_contributions&&!pt.rewardSouldOut(n)?[r.isRewardOpened(n)?e(".w-form",[e("form.u-margintop-30",{onsubmit:r.submitContribution},[e(".divider.u-marginbottom-20"),bo.hasShippingOptions(n)?e("div",[e(".fontcolor-secondary.u-marginbottom-10","Local de entrega"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",r.selectDestination),value:r.selectedDestination()},o.map(r.locationOptions(n,r.selectedDestination),function(t){return e('option[value="'+t.value+'"]',{selected:t.value===r.selectedDestination()},[t.name+" ",""!=t.value?"+R$"+t.fee:null])}))]):"",e(".fontcolor-secondary.u-marginbottom-10","Valor do apoio"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e('input.w-input.back-reward-input-reward[type="tel"]',{config:r.setInput,onkeyup:e.withAttr("value",r.applyMask),value:r.contributionValue()}))]),e('input.w-button.btn.btn-medium[type="submit"][value="Continuar >"]'),r.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+r.error()]):""])]):""]:""])}))}},Pn={view:function(t,r){var n=r.project(),a=function(e){return"/projects/"+n.project_id+"/contributions/new?amount="+e},i=[10,25,50,100];return e("#suggestions",o.map(i,function(t){return n?e('a[href="'+a(t)+'"].card-reward.card-big.card-secondary.u-marginbottom-20',[e(".fontsize-larger","R$ "+t)]):""}))}},Mn={controller:function(t){var r=e.prop([]),n=a.paginationVM(c.contributor),i=a.filtersVM({project_id:"eq"}),s=a.filtersVM({project_id:"eq"}),l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[[]],r=0;return o.map(e,function(e,o){t[r].length>=3&&(r+=1,t[r]=[]),t[r].push(e)}),t},d=e.prop({});s.project_id(t.project().project_id),i.project_id(t.project().project_id),n.collection().length||n.firstPage(s.parameters());var u=a.loader(c.projectContributionsPerDay.getRowOptions(i.parameters()));u.load().then(r);var p=[["Estado","Apoios","R$ apoiados (% do total)"]],m=function(t){return o.isEmpty(t)?[]:o.map(o.first(t).source,function(t){var o=[];return o.push(t.state_acronym||"Outro/other"),o.push(t.total_contributions),o.push([t.total_contributed,[e('input[type="hidden"][value="'+t.total_contributed+'"'),"R$ ",pt.formatNumber(t.total_contributed,2,3),e("span.w-hidden-small.w-hidden-tiny"," ("+t.total_on_percentage.toFixed(2)+"%)")]]),p.push(o)})},f=a.loader(c.projectContributionsPerLocation.getRowOptions(i.parameters()));f.load().then(m);var w=a.loader(c.projectContributiorsStat.getRowOptions(i.parameters()));return w.load().then(function(e){return d(o.first(e))}),{listVM:n,filterVM:s,groupedCollection:l,lContributionsStats:w,contributionsPerLocationTable:p,lContributionsPerLocation:f,contributionsPerDay:r,lContributionsPerDay:u,contributionsStats:d}},view:function(t,r){var n=t.listVM,a=t.contributionsStats(),i=t.groupedCollection(n.collection());return e("#project_contributions",e("#contributions_top",[e(".section.w-section",e(".w-container",e(".w-row",t.lContributionsStats()?pt.loader():o.isEmpty(a)?"":[e(".u-marginbottom-20.u-text-center-small-only.w-col.w-col-6",[e(".fontsize-megajumbo",a.total),e(".fontsize-large","pessoas apoiam este projeto")]),e(".w-col.w-col-6",e(".card.card-terciary.u-radius",e(".w-row",[e(".u-marginbottom-20.w-col.w-col-6.w-col-small-6",[e(".fontweight-semibold.u-marginbottom-10","Apoiadores novos"),e(".fontsize-largest.u-marginbottom-10",Math.floor(a.new_percent)+"%"),e(".fontsize-smallest","apoiadores que nunca tinham apoiado um projeto no Catarse")]),e(".w-col.w-col-6.w-col-small-6",[e(".divider.u-marginbottom-20.w-hidden-main.w-hidden-medium.w-hidden-small"),e(".fontweight-semibold.u-marginbottom-10","Apoiadores recorrentes"),e(".fontsize-largest.u-marginbottom-10",Math.ceil(a.returning_percent)+"%"),e(".fontsize-smallest","apoiadores que já tinham apoiado um projeto no Catarse")])])))]))),e(".divider.w-section"),e(".section.w-section",e(".w-container",[e(".fontsize-large.fontweight-semibold.u-marginbottom-40.u-text-center","Apoiadores"),e(".project-contributions.w-clearfix",o.map(i,function(t,n){return e(".w-row",o.map(t,function(t){return e(".project-contribution-item.w-col.w-col-4",[e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e('a[href="/users/'+t.user_id+'"][style="display: block;"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_backer_link",lbl:t.user_id,project:r.project()})},[e('img.thumb.u-marginbottom-10.u-round[src="'+(o.isEmpty(t.data.profile_img_thumbnail)?"/assets/catarse_bootstrap/user.jpg":t.data.profile_img_thumbnail)+'"]')]),e('a.fontsize-base.fontweight-semibold.lineheigh-tight.link-hidden-dark[href="/users/'+t.user_id+'"]',{onclick:pt.analytics.event({cat:"project_view",act:"project_backer_link",lbl:t.user_id,project:r.project()})},Ro.displayName(t.data)),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",pt.selfOrEmpty(t.data.city)+", "+pt.selfOrEmpty(t.data.state)),e(".fontsize-smaller",[e("span.fontweight-semibold",t.data.total_contributed_projects)," apoiados  |  ",e("span.fontweight-semibold",t.data.total_published_projects)," criado"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",[e(hn,{follow_id:t.user_id,following:t.is_follow})]),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])])])}))})),e(".w-row.u-marginbottom-40.u-margintop-20",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?pt.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Carregar mais")])])]))]),e(".before-footer.bg-gray.section.w-section",e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-12.u-text-center",{style:{"min-height":"300px"}},[t.lContributionsPerDay()?pt.loader():e.component(wr,{collection:t.contributionsPerDay,label:"R$ arrecadados por dia",dataKey:"total_amount",xAxis:function(e){return pt.momentify(e.paid_at)},emptyState:"Apoios não contabilizados"})])]),e(".w-row",e(".w-col.w-col-12.u-text-center",[e(".fontweight-semibold.u-marginbottom-10.fontsize-large.u-text-center","De onde vem os apoios"),t.lContributionsPerLocation()?pt.loader():o.isEmpty(o.rest(t.contributionsPerLocationTable))?"":e.component(br,{table:t.contributionsPerLocationTable,defaultSortIndex:-2})]))])))}},An={controller:function(t){var o=pt.toggleProp(!1,!0),r=e.prop(!1),n=e.prop(!1),i=pt.getUser()||{},s=e.prop(i.email),l=e.prop(""),d=e.prop(""),u=e.prop(!1),p="report",m=Ko.currentProject(),f=m&&pt.callStoredAction(p)==m.project_id,w=function(){return _.isEmpty(i)?(pt.storeAction(p,m.project_id),pt.navigateToDevise()):void o.toggle()},b=function(){n(!0);var e=c.projectReport.postOptions({email:s(),details:l(),reason:d(),project_id:m.project_id});return u=a.loaderWithToken(e),u.load().then(r(!0)),n(!1),!1},g=function(e,t){!t&&f&&pt.animateScrollTo(e)};return!_.isEmpty(i)&&f&&o(!0),{checkScroll:g,checkLogin:w,displayForm:o,sendSuccess:r,submitDisabled:n,sendReport:b,user:i,email:s,details:l,reason:d}},view:function(t,o){t.user;return e(".card.card-terciary.u-radius",[e(".fontsize-small.u-marginbottom-20",["Este projeto desrespeita",e.trust("&nbsp;"),e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638'][target='_blank']","nossas regras? ")]),t.sendSuccess()?e(".w-form",e("p","Obrigado! A sua denúncia foi recebida.")):[e(".a.w-button.btn.btn-medium.btn-terciary.btn-inline[href='javascript:void(0);']",{onclick:t.checkLogin},"Denunciar este projeto"),t.displayForm()?e("#report-form.u-margintop-30",e(".w-form",e("form",{onsubmit:t.sendReport,config:t.checkScroll},[e(".fontsize-small.fontweight-semibold.u-marginbottom-10","Por que você está denunciando este projeto?"),e("select.w-select.text-field.positive[required='required']",{onchange:e.withAttr("value",t.reason)},[e("option[value='']","Selecione um motivo"),e("option[value='Violação de propriedade intelectual']","Violação de propriedade intelectual"),e("option[value='Calúnia, injúria, difamação ou discriminação']","Calúnia, injúria, difamação ou discriminação"),e("option[value='Escopo de projeto proibido']","Escopo de projeto proibido"),e("option[value='Recompensas proibidas']","Recompensas proibidas"),e("option[value='Cenas de sexo explícitas e gratuitas']","Cenas de sexo explícitas e gratuitas"),e("option[value='Abuso de SPAM']","Abuso de SPAM"),e("option[value='Outros']","Outros")]),e("textarea.w-input.text-field.positive.u-marginbottom-30",{placeholder:"Por favor, dê mais detalhes que nos ajudem a identificar o problema",onchange:e.withAttr("value",t.details)}),e("input.w-button.btn.btn-medium.btn-inline.btn-dark[type='submit'][value='Enviar denúncia']",{disabled:t.submitDisabled()})]))):""]])}},Tn={view:function(t,n){var a=n.project()||{},i=function(){var e=r(a.zone_online_date).diff(r(a.zone_expires_at)),t=r.duration(e);return-Math.ceil(t.asDays())},s=function(){return a.is_published&&pt.existy(a.zone_expires_at)?e(".funding-period",[e(".fontsize-small.fontweight-semibold.u-text-center-small-only","Período de campanha"),e(".fontsize-small.u-text-center-small-only",pt.momentify(a.zone_online_date)+" - "+pt.momentify(a.zone_expires_at)+" ("+i()+" dias)")]):""};return e("#project-about",[e(".project-about.w-col.w-col-8",{config:pt.UIHelper()},[e("p.fontsize-base",[e("strong","O projeto")]),e('.fontsize-base[itemprop="about"]',e.trust(pt.selfOrEmpty(a.about_html,"..."))),a.budget?[e("p.fontsize-base.fontweight-semibold","Orçamento"),e("p.fontsize-base",e.trust(a.budget))]:"",e.component(An)]),e(".w-col.w-col-4.w-hidden-small.w-hidden-tiny",o.isEmpty(n.rewardDetails())?[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Sugestões de apoio"),e.component(Pn,{project:n.project}),s()]:[e(".fontsize-base.fontweight-semibold.u-marginbottom-30","Recompensas"),e.component(Sn,{project:n.project,rewardDetails:n.rewardDetails}),s()])])}},Dn={controller:function(){var e=function(e,t){return function(e,t){t||pt.fbParse()}};return{loadComments:e}},view:function(t,o){var r=o.project();return e(".w-row",[e(".w-col.w-col-7",e('.fb-comments[data-href="http://www.catarse.me/'+r.permalink+'"][data-num-posts=50][data-width="610"]',{config:t.loadComments()})),e(".w-col.w-col-5",e.component(An))])}},qn=o.partial(pt.i18nScope,"projects.posts"),Rn={controller:function(e){var t=a.paginationVM(c.projectPostDetail),r=a.filtersVM({project_id:"eq",id:"eq"}),n=function(e,t){t||pt.animateScrollTo(e)};return r.project_id(e.project().project_id),o.isNumber(e.post_id)&&r.id(e.post_id),t.collection().length||t.firstPage(r.parameters()),{listVM:t,filterVM:r,scrollTo:n}},view:function(r,n){var a=r.listVM,i=n.project()||{};return e("#posts.project-posts.w-section",{config:r.scrollTo},[e(".w-container.u-margintop-20",[i.is_owner_or_admin?[a.isLoading()?"":o.isEmpty(a.collection())?e(".w-hidden-small.w-hidden-tiny",[e(".fontsize-base.u-marginbottom-30.u-margintop-20","Toda novidade publicada no Catarse é enviada diretamente para o email de quem já apoiou seu projeto e também fica disponível para visualização no site. Você pode optar por deixá-la pública, ou visível somente para seus apoiadores aqui nesta aba.")]):"",e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4.w-col-push-4",[e("a.btn.btn-edit.btn-small[href='/pt/projects/"+i.project_id+"/posts']","Escrever novidade")])])]:"",o.map(a.collection(),function(t){return e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".post",[e(".u-marginbottom-60 .w-clearfix",[e(".fontsize-small.fontcolor-secondary.u-text-center",pt.momentify(t.created_at)),e("p.fontweight-semibold.fontsize-larger.u-text-center.u-marginbottom-30",[e('a.link-hidden[href="/projects/'+t.project_id+"/posts/"+t.id+'#posts"]',t.title)]),o.isEmpty(t.comment_html)?e(".fontsize-base","Post exclusivo para apoiadores."):e(".fontsize-base",e.trust(t.comment_html))]),e(".divider.u-marginbottom-60")])]),e(".w-col.w-col-1")])}),e(".w-row",[o.isUndefined(n.post_id)?a.isLoading()?e(".w-col.w-col-2.w-col-push-5",pt.loader()):0===a.collection().length&&0===n.projectContributions().length?i.is_owner_or_admin?"":e(".w-col.w-col-10.w-col-push-1",e("p.fontsize-base",e.trust(t.t("empty",qn({project_user_name:n.userDetails().name,project_id:i.project_id}))))):e(".w-col.w-col-2.w-col-push-5",a.isLastPage()?0===a.collection().length?"Nenhuma novidade.":"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:a.nextPage},"Carregar mais")):""])])])}},Fn={controller:function(t){var r=e.prop(window.location.hash),n=function(n){var a={project:n,post_id:t.post_id},i={"#rewards":e(".w-col.w-col-12",e.component(Sn,o.extend({},{rewardDetails:t.rewardDetails},a))),"#contribution_suggestions":e.component(Pn,a),"#contributions":e.component(Mn,a),"#about":e.component(Tn,o.extend({},{rewardDetails:t.rewardDetails},a)),"#comments":e.component(Dn,a),"#posts":e.component(Rn,o.extend({},{projectContributions:t.projectContributions,userDetails:t.userDetails},a))};return o.isNumber(t.post_id)&&!window.location.hash&&(window.location.hash="posts"),r(window.location.hash),o.isEmpty(r())||"#_=_"===r()||"#preview"===r()?i["#about"]:i[r()]};return pt.redrawHashChange(),{displayTabContent:n,hash:r}},view:function(t,o){return e('section.section[itemtype="http://schema.org/CreativeWork"]',[e(""+("#contributions"!==t.hash()?".w-container":".about-tab-content"),[e(".w-row",o.project()?t.displayTabContent(o.project):pt.loader())])])}},On={controller:function(e){var t=e.project_id,r=e.project_user_id;t&&!o.isNaN(Number(t))?Ko.init(t,r):Ko.getCurrentProject();try{pt.analytics.windowScroll({cat:"project_view",act:"project_page_scroll",project:t?{id:t,user_id:r}:null}),pt.analytics.event({cat:"project_view",act:"project_page_view",project:t?{id:t,user_id:r}:null}).call()}catch(n){console.error(n)}return Ko},view:function(t,o){var r=t.currentProject;return e(".project-show",{config:t.setProjectPageTitle()},[e.component(zn,{project:r,rewardDetails:t.rewardDetails,userDetails:t.userDetails,projectContributions:t.projectContributions}),e.component(Cn,{project:r,rewardDetails:t.rewardDetails}),e.component(Fn,{project:r,post_id:o.post_id,rewardDetails:t.rewardDetails,userDetails:t.userDetails,projectContributions:t.projectContributions}),r()&&r().is_owner_or_admin?e.component(ir,{project:r}):""])}},In=o.partial(pt.i18nScope,"projects.contributions.edit.errors"),Nn=o.partial(pt.i18nScope,"projects.contributions.edit_international.errors"),Vn=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"aon",i=e.prop({}),s=e.prop(!1),l=e.prop(!1),d=function(e){pt.authenticityToken()&&e.setRequestHeader("X-CSRF-Token",pt.authenticityToken())},u={completeName:e.prop(""),anonymous:e.prop(),countries:e.prop(),userCountryId:e.prop(),zipCode:e.prop(""),street:e.prop(""),number:e.prop(""),addressComplement:e.prop(""),neighbourhood:e.prop(""),city:e.prop(""),states:e.prop([]),userState:e.prop(),ownerDocument:e.prop(""),phone:e.prop(""),errors:e.prop([])},p={name:e.prop(""),number:e.prop(""),expMonth:e.prop(""),expYear:e.prop(""),save:e.prop(!1),cvv:e.prop(""),errors:e.prop([]),cardOwnerDocument:e.prop("")},m=function(e){var t=o.first(e),r=t.address.country_id||o.findWhere(u.countries(),{name:"Brasil"}).id;u.completeName(t.name),u.city(t.address.city),u.zipCode(t.address.zipcode),u.street(t.address.street),u.number(t.address.number),u.addressComplement(t.address.complement),u.userState(t.address.state),u.userCountryId(r),u.ownerDocument(t.owner_document),u.phone(t.address.phonenumber),u.neighbourhood(t.address.neighbourhood),p.cardOwnerDocument(t.owner_document)},f=function(){return[[null,"Mês"],[1,"01 - Janeiro"],[2,"02 - Fevereiro"],[3,"03 - Março"],[4,"04 - Abril"],[5,"05 - Maio"],[6,"06 - Junho"],[7,"07 - Julho"],[8,"08 - Agosto"],[9,"09 - Setembro"],[10,"10 - Outubro"],[11,"11 - Novembro"],[12,"12 - Dezembro"]]},w=function(){for(var e=r().year(),t=["Ano"],o=e;o<=e+25;o++)t.push(o);return t},b=function(){return!o.isEmpty(u.countries())&&u.userCountryId()!=o.findWhere(u.countries(),{name:"Brasil"}).id},g=function(e){return b()?Nn(e):In(e)},h=function(){return b()?{locale:"en"}:{locale:"pt"}},_=function(){return t.translations[t.currentLocale()].projects.faq[n]},v=pt.getUser()||{},y=a.loader(c.country.getPageOptions()),j=a.loader(c.state.getPageOptions()),k=function(e){return o.map(e,function(e){var r=u[e]();pt.existy(r)&&!o.isEmpty(String(r).trim())||u.errors().push({field:e,message:t.t("validation.empty_field",g())})})},x=function(){var e=u.ownerDocument(),t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=pt.validateCnpj(e),r="CNPJ inválido."):(o=pt.validateCpf(t),r="CPF inválido."),o||u.errors().push({field:"ownerDocument",message:r})},z=function(){(o.isEmpty(u.userState())||"null"===u.userState())&&u.errors().push({field:"userState",message:t.t("validation.state",g())})},C=function(){var e=u.phone(),o=String(e).replace(/[\(|\)|\-|\s]*/g,""),r={field:"phone",message:t.t("validation.phone",g())};if(o.length<10)u.errors().push(r);else{var n=Number(o.charAt(2));n>=2&&n<=9||u.errors().push(r)}},E=function(){return u.errors([]),k(["completeName","zipCode","street","userState","city","userCountryId"]),b()||(k(["phone","number","neighbourhood","ownerDocument","userState"]),z(),x(),C()),o.isEmpty(u.errors())},S=function(t){var o=e.prop();return e.request({method:"GET",config:d,url:"/payment/pagarme/"+t+"/slip_data"}).then(o),o},P=function(o,r,n,a,i){e.request({method:"post",url:"/payment/pagarme/"+o+"/pay_slip.json",dataType:"json"}).then(function(s){"failed"==s.payment_status?n(t.t("submission.slip_submission",g())):s.boleto_url&&(i(!0),window.location.href="/projects/"+r+"/contributions/"+o),a(!1),e.redraw()})["catch"](function(o){n(t.t("submission.slip_submission",g())),a(!1),i(!1),e.redraw()})},M=function(o,r,n,a,i){n(!1),e.redraw(),E()?I(o,r).then(function(){P(o,r,n,a,i)})["catch"](function(){a(!1),n(t.t("submission.slip_validation",g())),e.redraw()}):(a(!1),n(t.t("submission.slip_validation",g())),e.redraw())},A=e.prop([]),T=function(t){var r={id:-1};return e.request({method:"GET",config:d,url:"/users/"+t+"/credit_cards"}).then(function(e){return o.isArray(e)?e.push(r):e=[],A(e)})},D=function(e){if(window.SimilityScript&&pt.getSimilityCustomer()){var t=pt.getUser()||{},o={customer_id:pt.getSimilityCustomer(),session_id:e,user_id:t.user_id},r=new window.SimilityScript(o);r.execute()}},q=function(t,o){return D(o),e.request({method:"POST",url:"/payment/pagarme/"+o+"/pay_credit_card",data:t,config:d})},R=function(e,t,o){var r={card_id:e.card_key,payment_card_installments:t};return q(r,o)},F=function(){var e=new window.PagarMe.creditCard;return e.cardHolderName=p.name(),e.cardExpirationMonth=p.expMonth(),e.cardExpirationYear=p.expYear(),e.cardNumber=p.number(),e.cardCVV=p.cvv(),e},O=function(r,n){var a=e.deferred();return e.request({method:"GET",url:"/payment/pagarme/"+r+"/get_encryption_key",config:d}).then(function(e){window.PagarMe.encryption_key=e.key;var i=F(),s=i.fieldErrors();o.keys(s).length>0?a.reject({message:t.t("submission.card_invalid",g())}):i.generateHash(function(e){var t={card_hash:e,save_card:p.save().toString(),payment_card_installments:n};q(t,r).then(a.resolve)["catch"](a.reject)})})["catch"](function(e){o.isEmpty(e.message)?a.reject({message:t.t("submission.encryption_error",g())}):a.reject(e)}),a.promise},I=function(t,o){var r={anonymous:u.anonymous(),country_id:u.userCountryId(),payer_name:u.completeName(),payer_document:u.ownerDocument(),address_street:u.street(),address_number:u.number(),address_complement:u.addressComplement(),address_neighbourhood:u.neighbourhood(),address_zip_code:u.zipCode(),address_city:u.city(),address_state:u.userState(),address_phone_number:u.phone(),card_owner_document:p.cardOwnerDocument()};return e.request({method:"PUT",url:"/projects/"+o+"/contributions/"+t+".json",data:{contribution:r},config:d})},N=function(o,r,n){return function(a){if("failed"===a.payment_status){var i=a.message||t.t("submission.payment_failed",g());l(!1),s(t.t("submission.error",g({message:i}))),e.redraw(),o.reject()}else window.location.href="/projects/"+r+"/contributions/"+n}},V=function(o){return function(r){var n=r.message||t.t("submission.payment_failed",g());l(!1),s(t.t("submission.error",g({message:n}))),e.redraw(),o.reject()}},B=function(e,t,o,r,n){return function(){return t().id&&t().id!==-1?R(t(),n(),o).then(N(e,r,o))["catch"](V(e)):O(o,n).then(N(e,r,o))["catch"](V(e))}},L=function(t,o,r,n){var a=e.deferred();return E()?(l(!0),s(!1),e.redraw(),I(r,n).then(B(a,t,r,n,o))["catch"](function(){l(!1),a.reject()})):(l(!1),a.reject()),a.promise},U=function(e){return function(){var t=(u.errors(),o.findWhere(u.errors(),{field:e})),r=o.compose(u.errors,o.without);return r(u.errors(),t)}},Y=function(e){return function(){var t=(u.errors(),o.findWhere(p.errors(),{field:e})),r=o.compose(p.errors,o.without);return r(p.errors(),t)}},H=e.prop([{value:10,number:1}]),W=function(t){return e.request({method:"GET",url:"/payment/pagarme/"+t+"/get_installment",config:pt.setCsrfToken}).then(H)},$=o.partial(pt.mask,"9999 9999 9999 9999"),J=o.compose(p.number,$);return y.load().then(function(e){var t=u.userCountryId()||o.findWhere(e,{name:"Brasil"}).id;u.countries(o.sortBy(e,"name_en")),u.userCountryId(t)}),j.load().then(function(e){u.states().push({acronym:null,name:"Estado"}),o.map(e,function(e){return u.states().push(e)})}),Ro.fetchUser(v.user_id,!1).then(m),{fields:u,validate:E,isInternational:b,resetFieldError:U,getSlipPaymentDate:S,paySlip:M,installments:H,getInstallments:W,savedCreditCards:A,getSavedCreditCards:T,applyCreditCardMask:J,creditCardFields:p,resetCreditCardFieldError:Y,expMonthOptions:f,expYearOptions:w,sendPayment:L,submissionError:s,isLoading:l,pagarme:i,locale:h,
faq:_,similityExecute:D}},Bn=o.partial(pt.i18nScope,"projects.contributions"),Ln={controller:function(t){var r=function(e,t){return t?null:e.focus()},n=function(e){return e.id===bo.selectedReward().id},a=e.prop(""),i=pt.getParams("reward_id"),s=function(e){var t=pt.monetaryToFloat(bo.contributionValue),o=bo.hasShippingOptions(bo.selectedReward())?bo.shippingFeeForCurrentReward(a):{value:0};return!a()&&bo.hasShippingOptions(bo.selectedReward())?bo.error("Por favor, selecione uma opção de frete válida."):t<bo.selectedReward().minimum_value+o.value?bo.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+bo.selectedReward().minimum_value+" + frete R$"+pt.formatNumber(o.value)):(bo.error(""),pt.navigateTo("/projects/"+Ko.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+bo.selectedReward().id+"&contribution%5Bvalue%5D="+t+"&contribution%5Bshipping_fee_id%5D="+o.id)),!1},l=function(e){a(e);var t=bo.shippingFeeForCurrentReward(a)?Number(bo.shippingFeeForCurrentReward(a).value):0,o=Number(bo.selectedReward().minimum_value);bo.applyMask(t+o+",00")},c=function(e){return o.isEmpty(e)?{id:null,description:"Obrigado. Eu só quero ajudar o projeto.",minimum_value:10,shipping_options:null,row_order:-999999}:e};return t.reward.id===Number(i)&&bo.selectReward(t.reward).call(),bo.getStates(),{normalReward:c,isSelected:n,setInput:r,submitContribution:s,selectDestination:l,selectedDestination:a,locationOptions:bo.locationOptions,states:bo.getStates(),selectReward:bo.selectReward,error:bo.error,applyMask:bo.applyMask,contributionValue:bo.contributionValue}},view:function(r,n){var a=r.normalReward(n.reward);return e("span.radio.w-radio.w-clearfix.back-reward-radio-reward",{"class":r.isSelected(a)?"selected":"",onclick:r.selectReward(a)},e('label[for="contribution_reward_id_'+a.id+'"]',[e('input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id="contribution_reward_id_'+a.id+'"][type="radio"][value="'+a.id+'"]',{checked:r.isSelected(a),name:"contribution[reward_id]"}),e('label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for="contribution_reward_'+a.id+'"]',"R$ "+pt.formatNumber(a.minimum_value)+" ou mais"),r.isSelected(a)?e(".w-row.back-reward-money",[bo.hasShippingOptions(a)?e(".w-sub-col.w-col.w-col-4",[e(".fontcolor-secondary.u-marginbottom-10","Local de entrega"),e("select.positive.text-field.w-select",{onchange:e.withAttr("value",r.selectDestination)},o.map(r.locationOptions(a,r.selectedDestination),function(t){return e('option[value="'+t.value+'"]',[t.name+" ",""!=t.value?"+R$"+t.fee:null])}))]):"",e(".w-sub-col.w-col.w-clearfix",{"class":bo.hasShippingOptions(a)?"w-col-4":"w-col-8"},[e(".fontcolor-secondary.u-marginbottom-10","Valor do apoio"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.medium.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.back-reward-input-reward.medium.w-input",{autocomplete:"off",min:a.minimum_value,placeholder:a.minimum_value,type:"tel",config:r.setInput,onkeyup:e.withAttr("value",r.applyMask),value:r.contributionValue()}))]),e(".fontsize-smaller.text-error.u-marginbottom-20.w-hidden",[e("span.fa.fa-exclamation-triangle")," O valor do apoio está incorreto"])]),e(".submit-form.w-col.w-col-4",e("button.btn.btn-medium.u-margintop-30",{onclick:r.submitContribution},["Continuar  ",e("span.fa.fa-chevron-right")]))]):"",r.error().length>0&&r.isSelected(a)?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+r.error()]):"",e(".back-reward-reward-description",[e(".fontsize-smaller.u-marginbottom-10",a.description),e(".u-marginbottom-20.w-row",[a.deliver_at?e(".w-col.w-col-6",[e(".fontsize-smallest.fontcolor-secondary","Entrega Prevista:"),e(".fontsize-smallest",pt.momentify(a.deliver_at,"MMM/YYYY"))]):"",bo.hasShippingOptions(a)||"presential"===a.shipping_options?e(".w-col.w-col-6",[e(".fontsize-smallest.fontcolor-secondary","Envio:"),e(".fontsize-smallest",t.t("shipping_options."+a.shipping_options,Bn()))]):""])])]))}},Un=_.partial(pt.i18nScope,"projects.faq"),Yn={controller:function(o){var r=o.mode,n=o.faq.questions,a=e.prop(-1),i=e.prop({name:"..."}),s=function(){return o.vm.isInternational()?"international."+r:""+r},l=function(e){return function(){return a(e===a()?-1:e)}},c=function(){var e={};return _.each(n,function(o,r){_.extend(e,y({},r+1,{question:t.t(s()+".questions."+r+".question",Un()),answer:t.t(s()+".questions."+r+".answer",Un({userLink:"/users/"+i().id,userName:i().name}))}))}),e};return Ro.fetchUser(o.projectUserId,!1).then(function(e){return i(_.first(e))}),{scopedQuestions:c,selectQuestion:l,selectedQuestion:a,tKey:s}},view:function(o,r){return e(".faq-box.w-hidden-small.w-hidden-tiny.card.u-radius",[e(".w-row.u-marginbottom-30",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("img[width='30']",{src:"aon"===r.mode?"/assets/aon-badge.png":"/assets/flex-badge.png"})),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e(".w-inline-block.fontsize-smallest.w-inline-block.fontcolor-secondary",t.t(o.tKey()+".description",Un())))]),e(".u-marginbottom-20.fontsize-small.fontweight-semibold",t.t(""+(r.vm.isInternational()?"international_title":"title"),Un())),e("ul.w-list-unstyled",_.map(o.scopedQuestions(),function(t,r){return[e("li#faq_question_"+r+".fontsize-smaller.alt-link.list-question",{onclick:o.selectQuestion(r)},e("span",[e("span.faq-box-arrow")," "+t.question])),e("li.list-answer",{"class":o.selectedQuestion()===r?"list-answer-opened":""},e("p#faq_answer_"+r+".fontsize-smaller",e.trust(t.answer)))]}))])}},Hn={controller:function(){var e=function(){return o.union([{id:null,description:"Obrigado. Eu só quero ajudar o projeto.",minimum_value:10,shipping_options:null,row_order:-9999999}],Ko.rewardDetails())},t=function(){var e=pt.monetaryToFloat(bo.contributionValue);return e<bo.selectedReward().minimum_value?bo.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+bo.selectedReward().minimum_value):(bo.error(""),pt.navigateTo("/projects/"+Ko.currentProject().project_id+"/contributions/fallback_create?contribution%5Breward_id%5D="+bo.selectedReward().id+"&contribution%5Bvalue%5D="+e)),!1};return Ko.getCurrentProject(),{paymentVM:Vn(Ko.currentProject().mode),project:Ko.currentProject,submitContribution:t,sortedRewards:function(){return o.sortBy(e(),function(e){return Number(e.row_order)})}}},view:function(t){var r=t.project;return e("#contribution-new",r&&!o.isUndefined(r())?[e(".w-section.section-product."+r().mode),e(jn,{project:r}),e(".w-section.header-cont-new",e(".w-container",e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only","Escolha a recompensa e em seguida o valor do apoio"))),e(".section",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e('form.simple_form.new_contribution[accept-charset="UTF-8"][action="/pt/projects/'+r().id+'/contributions/fallback_create"][id="contribution_form"][method="get"][novalidate="novalidate"]',{onsubmit:t.submitContribution},[e('input[name="utf8"][type="hidden"][value="✓"]'),o.map(t.sortedRewards(),function(t){return e(Ln,{reward:t})})]))),e(".w-col.w-col-4",e.component(Yn,{mode:r().mode,vm:t.paymentVM,faq:t.paymentVM.faq(),projectUserId:r().user.id}))])))]:"")}},Wn={view:function(t,o){var r=o.user,n=o.hideDetails,a=Ro.displayImage(r),i=Ro.displayCover(r);return e(".hero-"+(n?"small":"half"),[e(".w-container.content-hero-profile",e(".w-row.u-text-center",e(".w-col.w-col-8.w-col-push-2",[n?"":e(".u-marginbottom-20",e(".avatar_wrapper",e("img.thumb.big.u-round[alt='User'][src='"+a+"']"))),e(".fontsize-larger.fontweight-semibold.u-marginbottom-20",Ro.displayName(r)),n?"":e(".w-hidden-small.w-hidden-tiny.u-marginbottom-40.fontsize-base",["Chegou junto em "+pt.momentify(r.created_at,"MMMM [de] YYYY"),e("br"),0===r.total_contributed_projects?"Ainda não apoiou projetos":"Apoiou "+pt.pluralize(r.total_contributed_projects," projeto"," projetos"),r.total_published_projects>0?" e já criou "+pt.pluralize(r.total_published_projects," projeto"," projetos"):""])]))),e(".hero-profile",{style:"background-image:url('"+i+"');"})])}},$n={view:function(t,o){return e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle",e("span"," "+o.message))}},Jn={view:function(t,o){var r=o.collection,n=o.cssClass;return e(".w-col.w-col-2"+n,[r.isLoading()?pt.loader():r.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:r.nextPage},"Carregar mais")])}},Xn={controller:function(t){var o=t.userId,r=t.showDraft||!1,n=e.prop(!1),i=a.paginationVM(c.project),s=e.prop(!0),l=a.filtersVM({project_user_id:"eq",state:"in"}),d=["online","waiting_funds","successful","failed"];return r&&d.push("draft"),l.state(d).project_user_id(o).order({updated_at:"desc"}),c.project.pageSize(9),i.firstPage(l.parameters()).then(function(){s(!1)})["catch"](function(t){n(!0),s(!1),e.redraw()}),{projects:i,loader:s,error:n}},view:function(t,r){var n=t.projects.collection();return e(".content[id='created-tab']",t.error()?e.component($n,{message:"Erro ao carregar os projetos."}):t.loader()?pt.loader():[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","O que você está esperando para tirar seu projeto do papel aqui no Catarse?"),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/start']","Comece agora!")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(Zo,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(Jn,{collection:t.projects,cssClass:".w-col-push-5"})])])}},Kn={controller:function(t){var r=e.prop(),n=t.userId,i=a.paginationVM(c.project),s=e.prop(!1),l=e.prop(!0),d=a.filtersVM({project_id:"in"});return Ro.getPublicUserContributedProjects(n,null).then(function(e){r(e),o.isEmpty(r())?l(!1):(d.project_id(o.pluck(r(),"project_id")).order({online_date:"desc"}),c.project.pageSize(9),i.firstPage(d.parameters()).then(function(){l(!1)}))})["catch"](function(t){s(!0),l(!1),e.redraw()}),{projects:i,error:s,loader:l}},view:function(t,r){var n=t.projects.collection();return t.error()?e.component($n,{message:"Erro ao carregar os projetos."}):t.loader()?pt.loader():e(".content[id='contributed-tab']",[o.isEmpty(n)?e(".w-container",e(".u-margintop-30.u-text-center.w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30","Ora, ora... você ainda não apoiou nenhum projeto no Catarse!"),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/explore']","Que tal apoiar agora?")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):o.map(n,function(t){return e.component(Zo,{project:t,ref:"user_contributed",showFriends:!1})}),o.isEmpty(n)?"":e(".w-row.u-marginbottom-40.u-margintop-30",[e(Jn,{collection:t.projects,cssClass:".w-col-push-5"})])])}},Gn={controller:function(t){var o=e.prop({}),r=t.userId;return Ro.fetchUser(r,!0,o),{userDetails:o,displayModal:pt.toggleProp(!1,!0)}},view:function(t){var r=t.userDetails(),n=[gn,t.userDetails],a=Ro.displayImage(r);return e("#user-card",e(".card.card-user.u-radius.u-marginbottom-30[itemprop='author']",[e(".w-row",[e(".w-col.w-col-4.w.col-small-4.w-col-tiny-4.w-clearfix",e("img.thumb.u-round[itemprop='image'][src='"+a+"'][width='100']")),e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e(".fontsize-small.fontweight-semibold.lineheight-tighter[itemprop='name']",e('a.link-hidden[href="/users/'+r.id+'"]',Ro.displayName(r))),e(".fontsize-smallest.lineheight-looser[itemprop='address']",r.address_city),e(".fontsize-smallest",pt.pluralize(r.total_published_projects," projeto"," projetos")+" criados"),e(".fontsize-smallest","apoiou "+pt.pluralize(r.total_contributed_projects," projeto"," projetos"))])]),e(".project-author-contacts",[e("ul.w-list-unstyled.fontsize-smaller.fontweight-semibold",[o.isEmpty(r.facebook_link)?"":e("li",[e('a.link-hidden[itemprop="url"][href="'+r.facebook_link+'"][target="_blank"]',"Perfil no Facebook")]),o.isEmpty(r.twitter_username)?"":e("li",[e('a.link-hidden[itemprop="url"][href="https://twitter.com/'+r.twitter_username+'"][target="_blank"]',"Perfil no Twitter")]),o.map(r.links,function(t){return e("li",[e('a.link-hidden[itemprop="url"][href="'+t.link+'"][target="_blank"]',t.link)])})])]),t.displayModal()?e.component(sr,{displayModal:t.displayModal,content:n}):"",e(hn,{follow_id:r.id,following:r.follwing_this_user,enabledClass:".btn.btn-medium.btn-message.u-marginbottom-10",disabledClass:".btn.btn-medium.btn-message.u-marginbottom-10"}),o.isEmpty(r.email)?"":e("a.btn.btn-medium.btn-message[href='javascript:void(0);']",{onclick:t.displayModal.toggle},"Enviar mensagem")]))}},Qn={controller:function(t){var o=e.prop({}),r=e.prop(!0),n=e.prop(!1),a=t.userId;return Ro.fetchUser(a,!0,o).then(function(){r(!1)})["catch"](function(t){n(!0),r(!1),e.redraw()}),{userDetails:o,error:n,loader:r}},view:function(t,o){var r=t.userDetails();return t.error()?e.component($n,{message:"Erro ao carregar dados."}):t.loader()?pt.loader():e(".content[id='about-tab']",e(".w-container[id='about-content']",e(".w-row",[e(".w-col.w-col-8",e(".fontsize-base",r.about_html?e.trust(r.about_html):"")),e(".w-col.w-col-4",r.id?e.component(Gn,{userId:r.id}):pt.loader)])))}},Zn={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],a=e.prop(window.location.hash),i=function(t){var r={"#created":e.component(Xn,{userId:t.id}),"#contributed":e.component(Kn,{userId:t.id}),"#about":e.component(Qn,{userId:t.id})};return a(window.location.hash),o.isEmpty(a())||"#_=_"===a()?t.total_published_projects>0?(a("#created"),r["#created"]):t.total_contributed_projects>0?(a("#contributed"),r["#contributed"]):(a("#about"),r["#about"]):r[a()]};return pt.redrawHashChange(),Ro.fetchUser(n,!0,r),{displayTabContent:i,hash:a,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e.component(Wn,{user:n}),e("nav.project-nav.u-text-center.u-marginbottom-30.profile",{style:{"z-index":"10",position:"relative"}},e(".w-container[data-anchor='created']",[o.isEmpty(n)?pt.loader():n.is_owner_or_admin?e("a.dashboard-nav-link.dashboard[href='/pt/users/"+n.id+"/edit']",{config:e.route,onclick:function(){e.route("/users/edit/"+n.id,{user_id:n.id})}},[e("span.fa.fa-cog"),e.trust("&nbsp;")," Editar perfil"]):"",e("a[data-target='#contributed-tab'][href='#contributed'][id='contributed_link'][class='dashboard-nav-link "+("#contributed"===t.hash()?"selected":"")+"']",["Apoiados ",e.trust("&nbsp;"),e("span.badge",n.total_contributed_projects)]),e("a[data-target='#created-tab'][href='#created'][id='created_link'][class='dashboard-nav-link "+("#created"===t.hash()?"selected":"")+"']",["Criados ",e.trust("&nbsp;"),e("span.badge",n.total_published_projects)]),e("a[data-target='#about-tab'][href='#about'][id='about_link'][class='dashboard-nav-link "+("#about"===t.hash()?"selected":"")+"']","Sobre")])),e("section.section",e(".w-container",e(".w-row",n.id?t.displayTabContent(n):pt.loader())))])}},ea=function(){var t=e.prop([]),r=e.prop(!1),n=e.prop(""),a=function(e,r,n){return o.reduce(t(),function(t,o){return o[0]===e?o[r]:t},n)},i=function(e,r){var n=o.map(t(),function(t){return t[0]===e?[t[0],t[1],r]:t});t(n)},s=function(e){return a(e,2,!1)},l=function(e){return a(e,1,"")},c=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";Array.isArray(e)?o.map(e,function(e){return e.push(!1),console.log("Will push: ",e),t().push(e)}):t().push([e,r,!1])};return c.fields=t,c.setSubmissionError=n,c.hasSubmissionError=function(){return r()===!0},c.displaySubmissionError=function(){return r()?e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(n()))):null},c.submissionError=function(e){return o.isUndefined(e)?c.displaySubmissionError():void r(e)},c.hasError=s,c.inlineError=function(t,r){return o.isUndefined(r)?s(t)?e($n,{message:l(t)}):null:void i(t,r)},c.resetFieldErrors=function(){return o.map(t(),function(e){return e[2]=!1})},c.resetErrors=function(){c.resetFieldErrors(),r(!1)},c},ta=(ea(),{password:e.prop(""),current_password:e.prop(""),uploaded_image:e.prop(""),cover_image:e.prop(""),email:e.prop(""),permalink:e.prop(""),public_name:e.prop(""),facebook_link:e.prop(""),twitter:e.prop(""),links:e.prop([]),about_html:e.prop(""),email_confirmation:e.prop("")}),oa=function(e){var t=void 0;try{t=JSON.parse(e)}catch(o){t={}}return o},ra={fields:ta,mapRailsErrors:oa},na={controller:function(t){var r=ra.mapRailsErrors(t.rails_errors),n=void 0,a=t.user||{},i={password:e.prop(""),current_password:e.prop(""),uploaded_image:e.prop(Ro.displayImage(a)),cover_image:e.prop(a.profile_cover_image||""),email:e.prop(""),permalink:e.prop(a.permalink||""),public_name:e.prop(a.public_name||""),facebook_link:e.prop(a.facebook_link||""),twitter:e.prop(a.twitter_username||""),links:e.prop(a.links||[]),about_html:e.prop(a.about_html||""),email_confirmation:e.prop("")},s=e.prop(!1),l=e.prop(!1),c=pt.toggleProp(!1,!0),d=e.prop(!1),u=e.prop(!1),p=e.prop(),m=e.prop(!1),f=e.prop(!1),w=e.prop([]),b=function(){p(w().join("<br/>"))},g=function(){Ro.fetchUser(t.userId,!1).then(function(e){var t=o.first(e);i.uploaded_image(Ro.displayImage(t)),i.cover_image(t.profile_cover_image),i.permalink(t.permalink),i.public_name(t.public_name),i.facebook_link(t.facebook_link),i.twitter(t.twitter_username),i.links(t.links),i.about_html(t.about_html)})},h=function(){var r=window.document.getElementById("user_uploaded_image"),n=window.document.getElementById("user_cover_image"),s=new FormData;if(r.files[0]||!t.hideCoverImg&&n.files[0])return s.append("uploaded_image",r.files[0]),t.hideCoverImg||s.append("cover_image",n.files[0]),f(!0),e.redraw(),e.request({method:"POST",url:"/users/"+a.id+"/upload_image.json",data:s,config:pt.setCsrfToken,serialize:function(e){return e}}).then(function(e){i.uploaded_image(e.uploaded_image),i.cover_image(e.cover_image),f(!1)})["catch"](function(e){o.isArray(e.errors)?w(w().concat(e.errors)):p("Erro ao atualizar informações."),b(),u(!0),f(!1)})},_=function(){var o={current_password:i.current_password(),password:i.password(),email:i.email(),permalink:i.permalink(),public_name:i.public_name(),facebook_link:i.facebook_link(),twitter:i.twitter(),about_html:i.about_html(),links_attributes:k()};return t.publishingUserAbout&&(o.publishing_user_about=!0),m(!0),h(),e.request({method:"PUT",url:"/users/"+a.id+".json",data:{user:o},config:pt.setCsrfToken}).then(function(){d(!0),g(),m(!1),e.redraw()})["catch"](function(t){r&&r.resetFieldErrors(),r=ra.mapRailsErrors(t.errors_json),p("Erro ao atualizar informações."),u(!0),m(!1),e.redraw()})},v=[],y=function(){return i.links().push({link:""})},j=function(e,t){return function(){return i.links()[t]._destroy=!0,!1}},k=function(){return o.reduce(i.links(),function(e,t,o){return e[o.toString()]=t,e},{})},x=function(){return l(i.email()!==i.email_confirmation()),!l()},z=function(){var e=String(i.password());return e.length>0&&e.length<=5&&s(!0),!s()},C=function(e,t){t||(n=function(){return e.submit()})},E=function(){return window.confirm("Tem certeza que deseja desativar a sua conta?")&&n(),!1},S=function(e){return e.preventDefault(),x()?z()?_():(p("Nova senha está incorreta."),u(!0)):(p("Confirmação de email está incorreta."),u(!0)),!1};return setTimeout(e.redraw,0),{removeLinks:v,removeLink:j,addLink:y,fields:i,loading:m,showSuccess:d,showError:u,errors:p,uploading:f,onSubmit:S,emailHasError:l,showEmailForm:c,validateEmailConfirmation:x,passwordHasError:s,validatePassword:z,deleteAccount:E,setDeleteForm:C,parsedErrors:r}},view:function(t,r){var n=r.user||{},a=t.fields;return e("#about-tab.content",[!t.showSuccess()||t.loading()||t.uploading()?"":e.component(Pr,{message:"As suas informações foram atualizadas"}),!t.showError()||t.loading()||t.uploading()?"":e.component(Pr,{message:e.trust(t.errors()),error:!0}),e("form.simple_form.w-form",{onsubmit:t.onSubmit},[e('input[name="utf8"][type="hidden"][value="✓"]'),e('input[name="_method"][type="hidden"][value="patch"]'),e('input[name="authenticity_token"][type="hidden"][value='+pt.authenticityToken()+"]"),e("div",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[n.is_admin?e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","Endereço do seu perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","Seu perfil público pode ter uma URL personalizada. Escolha uma fácil de guardar!    ")]),e(".w-col.w-col-7",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",e('input.string.optional.w-input.text-field.text-field.positive.prefix[id="user_permalink"][type="text"]',{name:"user[permalink]",value:a.permalink(),onchange:e.withAttr("value",a.permalink)})),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.text-field.postfix.no-hover",e(".fontcolor-secondary.fontsize-smaller","  .catarse.me"))]))]):"",e(".w-row.u-marginbottom-30.card.card-terciary",[e(".fontsize-base.fontweight-semibold","Email"),e(".fontsize-small.u-marginbottom-30","Mantenha esse email atualizado pois ele é o canal de comunicação entre você, a equipe do Catarse e a equipe dos projetos que você apoiou. "),e(".fontsize-base.u-marginbottom-40",[e("span.fontweight-semibold.card.u-radius",n.email),e("a.alt-link.fontsize-small.u-marginleft-10[href='javascript:void(0);'][id='update_email']",{onclick:function(){t.showEmailForm.toggle()}},"Alterar email")]),e((t.showEmailForm()?"":".w-hidden")+".u-marginbottom-20.w-row[id='email_update_form']",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold","Novo email"),e("input.w-input.text-field.positive[id='new_email'][name='new_email'][type='email']",{"class":t.emailHasError()?"error":"",value:a.email(),onfocus:function(){return t.emailHasError(!1)},onchange:e.withAttr("value",a.email)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold","Confirmar novo email"),e("input.string.required.w-input.text-field.w-input.text-field.positive[id='new_email_confirmation'][name='user[email]'][type='text']",{"class":t.emailHasError()?"error":"",value:a.email_confirmation(),onfocus:function(){return t.emailHasError(!1)},onblur:t.validateEmailConfirmation,onchange:e.withAttr("value",a.email_confirmation)})]),t.emailHasError()?e($n,{message:"Confirmação de email está incorreta."}):""])]),e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Nome no perfil público"),e("label.field-label.fontsize-smallest.fontcolor-secondary","Esse é o nome que os usuários irão ver no seu perfil.")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[id="user_public_name"][type="text"]',{name:"user[public_name]","class":!!t.parsedErrors.hasError("public_name")&&"error",value:a.public_name(),onchange:e.withAttr("value",a.public_name)}),t.parsedErrors.inlineError("public_name"))]),e(".w-form",[e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Imagem do perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Essa imagem será utilizada como a miniatura de seu perfil (PNG, JPG tamanho 280 x 280)")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_uploaded_image.field_with_hint",[e("label.field-label"),e("span.hint",e('img[alt="Avatar do Usuario"][src="'+a.uploaded_image()+'"]')),e('input.file.optional.w-input.text-field[id="user_uploaded_image"][type="file"]',{name:"user[uploaded_image]","class":!!t.parsedErrors.hasError("uploaded_image")&&"error"}),t.parsedErrors.inlineError("uploaded_image")]))]),r.hideCoverImg?"":e(".w-row.u-marginbottom-30.card.card-terciary",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Imagem de capa do perfil"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Essa imagem será utilizada como fundo do cabeçalho do seu perfil público (PNG ou JPG). Caso você não envie nenhum imagem aqui, utilizaremos sua imagem de perfil como alternativa.")]),e(".w-col.w-col-4.w-sub-col",e(".input.file.optional.user_cover_image",[e("label.field-label"),e("span.hint",n.profile_cover_image?e("img",{src:a.cover_image()}):""),e('input.file.optional.w-input.text-field[id="user_cover_image"][type="file"]',{name:"user[cover_image]"})]))])]),e(".w-row",e(".w-col",e(".card.card-terciary.u-marginbottom-30",[e("label.field-label.fontweight-semibold","Sobre"),e("label.field-label.fontsize-smallest.fontcolor-secondary.u-marginbottom-20","Fale sobre você e tente fornecer as informações mais relevantes para que visitantes possam te conhecer melhor. "),e(".w-form",e(".preview-container.u-marginbottom-40",{"class":!!t.parsedErrors.hasError("about_html")&&"error"},pt.redactor("user[about_html]",a.about_html)),t.parsedErrors.inlineError("about_html"))]))),e(".w-form.card.card-terciary.u-marginbottom-30",[e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Perfil do facebook"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Cole o link do seu perfil")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{name:"user[facebook_link]",value:a.facebook_link(),onchange:e.withAttr("value",a.facebook_link)}))]),e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold","  Perfil do twitter"),e("label.field-label.fontsize-smallest.fontcolor-secondary","  Cole o link do seu perfil")]),e(".w-col.w-col-7",e('input.string.optional.w-input.text-field.positive[type="text"]',{name:"user[twitter]",value:a.twitter(),onchange:e.withAttr("value",a.twitter)}))])]),e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".w-col.w-col-5.w-sub-col",[e('label.field-label.fontweight-semibold[for="name-8"]'," Presença na internet"),e('label.field-label.fontsize-smallest.fontcolor-secondary[for="name-8"]'," Inclua links que ajudem outros usuários a te conhecer melhor. ")]),e(".w-col.w-col-7",[e(".w-row",[a.links()&&a.links().length<=0?"":e(".link",o.map(a.links(),function(o,r){var n=o._destroy;return e("div",{key:r,"class":n?"w-hidden":"none"},[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e('input.string.w-input.text-field.w-input.text-field][type="text"][value="'+o.link+'"]',{"class":""===o.link?"positive":"optional",name:"user[links_attributes]["+r+"][link]",onchange:e.withAttr("value",function(e){return a.links()[r].link=e})})),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",[e("a.btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border",{onclick:t.removeLink(o.id,r)})])])}))]),e(".w-row",[e(".w-col.w-col-6.w-col-push-6",e("a.btn.btn-small.btn-terciary",{onclick:t.addLink},e("span.translation_missing","Add Link")))])])])),r.hidePasswordChange?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontsize-base.fontweight-semibold","Alterar minha senha"),e(".fontsize-small.u-marginbottom-20","Para que a senha seja alterada você precisa confirmar a sua senha atual."),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold"," Senha atual"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_current_password'][name='user[current_password]'][type='password']",{value:a.current_password(),onchange:e.withAttr("value",a.current_password)})]),e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold"," Nova senha"),e("input.password.optional.w-input.text-field.w-input.text-field.positive[id='user_password'][name='user[password]'][type='password']",{"class":t.passwordHasError()?"error":"",value:a.password(),onfocus:function(){return t.passwordHasError(!1)},onblur:t.validatePassword,onchange:e.withAttr("value",a.password)}),t.passwordHasError()?e($n,{message:"A sua nova senha deve ter no mínimo 6 caracteres."}):""])])])),r.hideDisableAcc||n.total_published_projects>0?"":e(".w-form.card.card-terciary.u-marginbottom-30",e(".w-row.u-marginbottom-10",[e(".fontweight-semibold.fontsize-smaller","Desativar minha conta"),e(".fontsize-smallest","Todos os seus apoios serão convertidos em apoios anônimos, seus dados não serão mais visíveis, você sairá automaticamente do sistema e sua conta será desativada permanentemente."),e("a.alt-link.fontsize-smaller[href='/pt/users/"+n.id+"'][rel='nofollow']",{onclick:t.deleteAccount},"Desativar minha conta no Catarse"),e("form.w-hidden",{action:"/pt/users/"+n.id,method:"post",config:t.setDeleteForm},[e("input[name='authenticity_token'][type='hidden'][value='"+pt.authenticityToken()+"']"),e("input[name='_method'][type='hidden'][value='delete']")])]))])))),e("div",e(".w-container"+(r.useFloatBtn?".w-section.save-draft-btn-section":""),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",[e('input[id="anchor"][name="anchor"][type="hidden"][value="about_me"]'),t.loading()||t.uploading()?pt.loader():e('input.btn.btn.btn-large[name="commit"][type="submit"][value="Salvar"]',{onclick:t.onSubmit})]),e(".w-col.w-col-4")])))])])}},aa=o.partial(pt.i18nScope,"payment.state"),ia={controller:function(){var e=function(e,t){Ro.toggleDelivery(e,t).then(function(){var e=t.reward_sent_at?"delivered":"undelivered";t.delivery_status="received"==t.delivery_status?e:"received"})};return{toggleAnonymous:Ro.toggleAnonymous,toggleDelivery:e}},view:function(r,n){var a=n.collection,i=n.pagination,s=n.title;return o.isEmpty(a)?e("div",""):e(".section-one-column.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",s),e(".w-row.w-hidden-small.w-hidden-tiny.card.card-secondary",[e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold","Projetos que apoiei")),e(".w-col.w-col-2",e(".fontsize-small.fontweight-semibold","Valor do apoio")),e(".w-col.w-col-3",e(".fontsize-small.fontweight-semibold","Status do apoio")),e(".w-col.w-col-4",e(".fontsize-small.fontweight-semibold","Recompensa"))]),o.map(a,function(o){return e(".w-row.card",[e(".w-col.w-col-3",e(".w-row",[e(".w-col.w-col-4.u-marginbottom-10",e("a[href='/"+o.permalink+"']",e("img.thumb-project.u-radius[alt='"+o.project_name+"'][src='"+o.project_image+"'][width='50']"))),e(".w-col.w-col-8",e(".fontsize-small.fontweight-semibold",e("a.alt-link[href='/"+o.permalink+"']",o.project_name)))])),e(".w-col.w-col-2.u-marginbottom-10",e(".fontsize-base.inline-block",[e("span.w-hidden-main.w-hidden-medium.fontweight-semibold","Valor do apoio")," R$ "+o.value])),e(".w-col.w-col-3.u-marginbottom-10",[e(".w-hidden-main.w-hidden-medium.fontsize-smallest.fontweight-semibold","Status"),e(".fontsize-smaller.fontweight-semibold",[e(".lineheight-tighter"),e("span.fa.fa-circle.fontsize-smallest."+("paid"===o.state?"text-success":"pending"===o.state?"text-waiting":"text-error"),e.trust("&nbsp;")),t.t(o.state,aa({date:pt.momentify(o[o.state+"_at"])}))]),e(".fontsize-smallest",o.installments>1?o.installments+" x R$ "+o.installment_value+" ":"","BoletoBancario"===o.payment_method?"Boleto Bancário":"Cartão de Crédito"),h.canShowReceipt(o)?e("a.btn.btn-inline.btn-small.u-margintop-10.btn-terciary[href='https://www.catarse.me/pt/projects/"+o.project_id+"/contributions/"+o.contribution_id+"/receipt'][target='__blank']","Ver recibo"):"",h.canShowSlip(o)?e("a.btn.btn-inline.btn-small.u-margintop-10[href='"+o.gateway_data.boleto_url+"'][target='__blank']","Imprimir boleto"):"",h.canGenerateSlip(o)?e("a.btn.btn-inline.btn-small.u-margintop-10[href='https://www.catarse.me/pt/projects/"+o.project_id+"/contributions/"+o.contribution_id+"/second_slip'][target='__blank']","Gerar 2a via"):"",e(".w-checkbox.fontsize-smallest.fontcolor-secondary.u-margintop-10",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']"+(o.anonymous?"[checked='checked']":"")+"[value='1']",{onclick:function(){
return r.toggleAnonymous(o.project_id,o)}}),e("label.w-form-label","Quero que meu apoio não seja público")])]),e(".w-col.w-col-3",e(".fontsize-smallest",[e("span.w-hidden-main.w-hidden-medium.fontweight-semibold","Recompensa"),o.reward_id?e.trust(pt.simpleFormat(o.reward_description)):" Não selecionou recompensa"]),o.deliver_at?e(".fontsize-smallest.lineheight-looser",[e("span.fontweight-semibold","Estimativa de entrega: "),pt.momentify(o.deliver_at,"MMMM/YYYY")]):"",h.canBeDelivered(o)?e(".fontsize-smallest",[e("span.fontweight-semibold","Status da entrega:"),e.trust("&nbsp;"),pt.contributionStatusBadge(o)]):""),e(kn,{contribution:o})])}),e(".w-row.u-marginbottom-40.u-margintop-30",[e(Jn,{collection:i,cssClass:".w-col-push-5"})])])}},sa={controller:function(t){var o=t.userId,r=a.paginationVM(c.userContribution),n=a.paginationVM(c.userContribution),i=a.paginationVM(c.userContribution),s=e.prop(!1),l=e.prop(!0),d=function(){s(!0),l(!1),e.redraw()},u=a.filtersVM({user_id:"eq",state:"in",project_state:"in"});return c.userContribution.pageSize(9),u.user_id(o).order({created_at:"desc"}).state(["refunded","pending_refund","paid","refused","pending"]),u.project_state(["online","waiting_funds"]),r.firstPage(u.parameters()).then(function(){l(!1)})["catch"](d),u.project_state(["failed"]),i.firstPage(u.parameters()).then(function(){l(!1)})["catch"](d),u.project_state(["successful"]).state(["paid","refunded","pending_refund"]),n.firstPage(u.parameters()).then(function(){l(!1)})["catch"](d),{onlinePages:r,successfulPages:n,failedPages:i,error:s,loader:l}},view:function(t,r){var n=t.onlinePages.collection(),a=t.successfulPages.collection(),i=t.failedPages.collection();return e(".content[id='private-contributed-tab']",t.error()?e.component($n,{message:"Erro ao carregar os projetos."}):t.loader()?pt.loader():o.isEmpty(n)&&o.isEmpty(a)&&o.isEmpty(i)?e(".w-container",e(".w-row.u-margintop-30.u-text-center",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".fontsize-large.u-marginbottom-30",["Você ainda não apoiou nenhum projeto no",e.trust("&nbsp;"),"Catarse..."]),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",e("a.btn.btn-large[href='/pt/explore']",{config:e.route,onclick:function(){e.route("/explore")}},"Apoie agora!")),e(".w-col.w-col-3")])]),e(".w-col.w-col-3")])):[e.component(ia,{title:"Projetos em andamento",collection:n,pagination:t.onlinePages}),e.component(ia,{title:"Projetos bem-sucedidos",collection:a,pagination:t.successfulPages}),e.component(ia,{title:"Projetos não-financiados",collection:i,pagination:t.failedPages})])}},la={view:function(t,o){var r=o.project,n=o.user;return e(".card.card-terciary.u-radius.u-marginbottom-40",[e(".w-row",[e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2.w-hidden-tiny",[e('img.thumb.u-margintop-10.u-round[src="'+pt.useAvatarOrDefault(n.profile_img_thumbnail)+'"][width="100"]')]),e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",[e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",[r?"Dados do apoiador ":"Dados do usuário ",e('a.alt-link[href="/not-my-account'+(r?"?project_id="+r.project_id:"")+'"]',"Não é você?")]),e(".fontsize-base.fontweight-semibold",n.name),e("label.field-label","CPF/CNPJ: "+n.owner_document)])])])}},ca=(ea(),{owner_document:e.prop(""),country_id:e.prop(""),street:e.prop(""),number:e.prop(""),city:e.prop(""),zipcode:e.prop(""),complement:e.prop(""),neighbourhood:e.prop(""),state:e.prop(""),phonenumber:e.prop(""),name:e.prop(""),agency:e.prop(""),bank_id:e.prop(""),agency_digit:e.prop(""),account:e.prop(""),account_digit:e.prop(""),bank_account_id:e.prop(""),state_inscription:e.prop(""),birth_date:e.prop(""),account_type:e.prop(""),bank_account_type:e.prop("")}),da=function(e){var t=void 0;try{t=JSON.parse(e)}catch(r){t={}}var n=function(e,n){var a=o.first(o.compact(o.map(n,function(e){return o.first(t[e])})));a&&(r(e,a),r.inlineError(e,!0))};return n("owner_document",["user.cpf","cpf"]),n("country_id",["user.country_id","country_id"]),n("street",["user.address_street","address_street"]),n("number",["user.address_number","address_number"]),n("city",["user.address_city","address_city"]),n("zipcode",["user.address_zip_code","address_zip_code"]),n("complement",["user.address_complement","address_complement"]),n("neighbourhood",["user.address_neighbourhood","address_neighbourhood"]),n("state",["user.address_state","address_state"]),n("phonenumber",["user.phone_number","phone_number"]),n("name",["user.name","name"]),n("agency",["user.bank_account.agency","bank_account.agency"]),n("agency_digit",["user.bank_account.agency_digit","bank_account.agency_digit"]),n("account",["user.bank_account.account","bank_account.account"]),n("account_digit",["user.bank_account.account_digit","bank_account.account_digit"]),n("bank_account_type",["user.bank_account.account_type","bank_account.account_type"]),n("bank_id",["user.bank_account.bank","bank_account.bank"]),n("birth_date",["user.birth_date","birth_date"]),n("account_type",["user.account_type","account_type"]),r},ua={fields:ca,mapRailsErrors:da},pa={controller:function(t){var r=ua.mapRailsErrors(t.rails_errors),n=void 0,i=t.user,s=e.prop({}),l={owner_document:e.prop(i.owner_document||""),country_id:e.prop(i.address.country_id||36),street:e.prop(i.address.street||""),number:e.prop(i.address.number||""),city:e.prop(i.address.city||""),zipcode:e.prop(i.address.zipcode||""),complement:e.prop(i.address.complement||""),neighbourhood:e.prop(i.address.neighbourhood||""),state:e.prop(i.address.state||""),phonenumber:e.prop(i.address.phonenumber||""),name:e.prop(i.name||""),agency:e.prop(""),bank_id:e.prop(""),agency_digit:e.prop(""),account:e.prop(""),account_digit:e.prop(""),bank_account_id:e.prop(""),state_inscription:e.prop(""),birth_date:e.prop(i.birth_date?pt.momentify(i.birth_date):""),account_type:e.prop(i.account_type||""),bank_account_type:e.prop("")},d=e.prop(!1),u=t.userId,p=e.prop(""),m=e.prop(),f=e.prop(),w=e.prop(!0),b=pt.toggleProp(!1,!0),g=pt.toggleProp(!1,!0),h=a.loader(c.country.getPageOptions()),_=a.loader(c.state.getPageOptions()),v=o.partial(pt.mask,"(99) 9999-99999"),y=o.partial(pt.mask,"999.999.999-99"),j=o.partial(pt.mask,"99.999.999/9999-99"),k=o.partial(pt.mask,"99999-999"),x=o.partial(pt.mask,"99/99/9999"),z=e.prop(),C=e.prop(-1),E=e.prop(""),S=e.prop("-1"),P=e.prop(),M=a.loader(c.bank.getPageOptions()),A=pt.toggleProp(!1,!0),T=e.prop(!1),D=[{id:"51",code:"001",name:"Banco do Brasil S.A."},{id:"131",code:"341",name:"Itaú Unibanco S.A."},{id:"122",code:"104",name:"Caixa Econômica Federal"},{id:"104",code:"033",name:"Banco Santander  (Brasil)  S.A."},{id:"127",code:"399",name:"HSBC Bank Brasil S.A. - Banco Múltiplo"},{id:"23",code:"237",name:"Banco Bradesco S.A."}],q=function(t){return function(){return C(t),e.redraw(!0),n(),!1}},R=function(e,t){t||(n=function(){return e.submit()})},F=function(n){var a={country_id:l.country_id(),address_street:l.street(),address_number:l.number(),address_city:l.city(),address_zip_code:l.zipcode(),address_complement:l.complement(),address_state:l.state(),address_neighbourhood:l.neighbourhood(),phone_number:l.phonenumber(),cpf:l.owner_document(),name:l.name(),account_type:l.account_type(),birth_date:l.birth_date()};return t.publishingUserSettings&&(a.publishing_user_settings=!0),!t.publishingUserSettings&&o.isEmpty(l.account())&&o.isEmpty(l.account_digit())&&(o.isEmpty(S())||"-1"==S())&&o.isEmpty(l.agency())||(a.bank_account_attributes={owner_name:l.name(),owner_document:l.owner_document(),bank_id:S(),input_bank_number:E(),agency_digit:l.agency_digit(),agency:l.agency(),account:l.account(),account_digit:l.account_digit(),account_type:l.bank_account_type()},l.bank_account_id()&&(a.bank_account_attributes.id=l.bank_account_id().toString())),e.request({method:"PUT",url:"/users/"+n+".json",data:{user:a},config:pt.setCsrfToken}).then(function(){r&&r.resetFieldErrors(),d(!1),b()||b.toggle()})["catch"](function(e){r&&r.resetFieldErrors(),r=ua.mapRailsErrors(e.errors_json),p("Erro ao atualizar informações."),d(!1),b()&&b.toggle(),g()||g.toggle()})},O=function(){return d(!0),F(u),e.redraw(),!1},I=o.compose(l.zipcode,k),N=o.compose(l.birth_date,x),V=o.compose(l.phonenumber,v),B=function(e){"pf"!=l.account_type()?l.owner_document(j(e)):l.owner_document(y(e))},L=function(){p(!0),w(!1),e.redraw()};return Ro.getUserBankAccount(u).then(function(e){o.isEmpty(o.first(e))?l.bank_account_type("conta_corrente"):(s(o.first(e)),l.bank_account_id(s().bank_account_id),l.account(s().account),l.account_digit(s().account_digit),l.agency(s().agency),l.agency_digit(s().agency_digit),l.bank_id(s().bank_id),l.bank_account_type(s().account_type),S(s().bank_id))})["catch"](L),M.load().then(P)["catch"](L),Ro.getUserCreditCards(t.userId).then(z)["catch"](L),h.load().then(function(e){return m(o.sortBy(e,"name_en"))}),_.load().then(f),r.hasError("country_id")&&r.inlineError("country_id",!1),{handleError:L,applyDocumentMask:B,applyZipcodeMask:I,applyPhoneMask:V,countries:m,states:f,fields:l,loader:w,showSuccess:b,showError:g,user:i,onSubmit:O,error:p,creditCards:z,deleteCard:q,toDeleteCard:C,setCardDeletionForm:R,bankAccount:s,bankInput:E,banks:P,showOtherBanks:A,showOtherBanksInput:T,bankCode:S,popularBanks:D,applyBirthDateMask:N,loading:d,parsedErrors:r}},view:function(t,r){var n=t.user,a=t.bankAccount(),i=t.fields,s=n.total_contributed_projects>=1||n.total_published_projects>=1,l=!n.is_admin_role&&(s&&!o.isEmpty(n.name)&&!o.isEmpty(n.owner_document));return e("[id='settings-tab']",[t.showSuccess()?e.component(Pr,{message:"As suas informações foram atualizadas",toggleOpt:t.showSuccess}):"",t.showError()?e.component(Pr,{message:e.trust(t.error()),toggleOpt:t.showError,error:!0}):"",e("form.w-form",{onsubmit:t.onSubmit},[e("div",[e(".w-container",e(".w-col.w-col-10.w-col-push-1",e(".w-form.card.card-terciary",[e(".fontsize-base.fontweight-semibold","Dados financeiros"),e(".fontsize-small.u-marginbottom-20",[e.trust("Essa serão as informações que utilizaremos para transferências bancárias. <strong>Importante:</strong> Nome completo/Razão social e CPF/CNPJ não poderão ser modificados após a publicação de um projeto ou a confirmação de um apoio.")]),e(".divider.u-marginbottom-20"),e(".w-row",[e(".w-col.w-col-6.w-sub-col",e(".input.select.required.user_bank_account_bank_id",[e("select.select.required.w-input.text-field.bank-select.positive"+(l?".text-field-disabled":"")+"[id='user_bank_account_attributes_bank_id']",{name:"user[bank_account_attributes][bank_id]",onchange:e.withAttr("value",i.account_type),disabled:l},[e("option[value='pf']",{selected:"pf"===i.account_type()},"Pessoa Física"),e("option[value='pj']",{selected:"pj"===i.account_type()},"Pessoa Jurídica"),e("option[value='mei']",{selected:"mei"===i.account_type()},"Pessoa Jurídica (Micro Empreendedor Individual - MEI)")])]))]),e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_name']","Nome completo"+("pf"==i.account_type()?"":"/Razão Social")),e("input.string.required.w-input.text-field.positive"+(l?".text-field-disabled":"")+"[id='user_bank_account_attributes_owner_name'][type='text']",{value:i.name(),name:"user[name]","class":!!t.parsedErrors.hasError("name")&&"error",onchange:e.withAttr("value",i.name),disabled:l}),t.parsedErrors.inlineError("name")]),e(".w-col.w-col-6",[e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']",""+("pf"==i.account_type()?"CPF":"CNPJ")),e("input.string.tel.required.w-input.text-field.positive"+(l?".text-field-disabled":"")+"[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:i.owner_document(),"class":!!t.parsedErrors.hasError("owner_document")&&"error",disabled:l,name:"user[cpf]",onchange:e.withAttr("value",t.applyDocumentMask),onkeyup:e.withAttr("value",t.applyDocumentMask)}),t.parsedErrors.inlineError("owner_document")]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6","pf"==i.account_type()?[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']","Data de nascimento"),e("input.string.tel.required.w-input.text-field.positive"+(l&&!o.isEmpty(n.birth_date)?".text-field-disabled":"")+"[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:i.birth_date(),name:"user[birth_date]","class":!!t.parsedErrors.hasError("birth_date")&&"error",disabled:l&&!o.isEmpty(n.birth_date),onchange:e.withAttr("value",t.applyBirthDateMask),onkeyup:e.withAttr("value",t.applyBirthDateMask)}),t.parsedErrors.inlineError("birth_date")]:[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_owner_document']","Inscrição Estadual"),e("input.string.tel.required.w-input.text-field.positive[data-validate-cpf-cnpj='true'][id='user_bank_account_attributes_owner_document'][type='tel'][validation_text='true']",{value:i.state_inscription(),"class":!!t.parsedErrors.hasError("state_inscription")&&"error",name:"user[state_inscription]",onchange:e.withAttr("value",i.state_inscription)}),t.parsedErrors.inlineError("state_inscription")])])])]),e(".w-row",[e(".w-col.w-col-6.w-sub-col"+(t.showOtherBanksInput()?".w-hidden":"")+"[id='bank_select']",e(".input.select.required.user_bank_account_bank_id",[e("label.field-label","Banco"),e("select.select.required.w-input.text-field.bank-select.positive[id='user_bank_account_attributes_bank_id']",{name:"user[bank_account_attributes][bank_id]","class":!!t.parsedErrors.hasError("bank_id")&&"error",onchange:function(o){e.withAttr("value",t.bankCode)(o),t.showOtherBanksInput("0"==t.bankCode())}},[e("option[value='']",{selected:""===i.bank_id()}),o.map(t.popularBanks,function(t){return i.bank_id()!=t.id?e("option[value='"+t.id+"']",{selected:i.bank_id()==t.id},t.code+" . "+t.name):""}),""===i.bank_id()||o.find(t.popularBanks,function(e){return e.id===i.bank_id()})?"":e("option[value='"+i.bank_id()+"']",{selected:!0},a.bank_code+" . "+a.bank_name),e("option[value='0']","Outro")]),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_bank_id']"," Selecione um banco"),t.parsedErrors.inlineError("bank_id")])),t.showOtherBanksInput()?e(".w-col.w-col-6.w-sub-col",e(".w-row.u-marginbottom-20[id='bank_search']",e(".w-col.w-col-12",[e(".input.string.optional.user_bank_account_input_bank_number",[e("label.field-label","Número do banco (3 números)"),e("input.string.optional.w-input.text-field.bank_account_input_bank_number[id='user_bank_account_attributes_input_bank_number'][maxlength='3'][size='3'][type='text']",{name:"user[bank_account_attributes][input_bank_number]",value:t.bankInput(),onchange:e.withAttr("value",t.bankInput)}),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='user_bank_account_attributes_input_bank_number']"," Número do banco inválido")]),e("a.w-hidden-small.w-hidden-tiny.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Busca por nome  ",e.trust("&nbsp;"),e.trust("&gt;")]),e("a.w-hidden-main.w-hidden-medium.alt-link.fontsize-smaller[href='javascript:void(0);'][id='show_bank_list']",{onclick:t.showOtherBanks.toggle},["Busca por nome  ",e.trust("&nbsp;"),e.trust("&gt;")])]))):"",t.showOtherBanks()?e(".w-row[id='bank_search_list']",e(".w-col.w-col-12",e(".select-bank-list[data-ix='height-0-on-load']",{style:{height:"395px"}},e(".card.card-terciary",[e(".fontsize-small.fontweight-semibold.u-marginbottom-10.u-text-center","Selecione o seu banco abaixo"),e(".fontsize-smaller",[e(".w-row.card.card-secondary.fontweight-semibold",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("div","Número")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("div","Nome"))]),o.isEmpty(t.banks())?"":o.map(t.banks(),function(o){return e(".w-row.card.fontsize-smallest",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code)),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("a.link-hidden.bank-resource-link[data-code='"+o.code+"'][data-id='"+o.id+"'][href='javascript:void(0)']",{onclick:function(){t.bankInput(o.code),t.showOtherBanks.toggle()}},o.code+" . "+o.name))])})])])))):"",e(".w-col.w-col-6",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_agency']","Agência"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_agency'][type='text']",{value:i.agency(),"class":!!t.parsedErrors.hasError("agency")&&"error",name:"user[bank_account_attributes][agency]",onchange:e.withAttr("value",i.agency)}),t.parsedErrors.inlineError("agency")]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.text.optional.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_agency_digit']","Dígito agência"),e("input.string.optional.w-input.text-field.positive[id='user_bank_account_attributes_agency_digit'][type='text']",{value:i.agency_digit(),"class":!!t.parsedErrors.hasError("agency_digit")&&"error",name:"user[bank_account_attributes][agency_digit]",onchange:e.withAttr("value",i.agency_digit)}),t.parsedErrors.inlineError("agency_digit")])]))]),e(".w-row",[e(".w-col.w-col-6.w-sub-col",[e("label.field-label.fontweight-semibold","Tipo de conta"),e(".input.select.required.user_bank_account_account_type",[e("select.select.required.w-input.text-field.bank-select.positive[id='user_bank_account_attributes_account_type']",{name:"user[bank_account_attributes][account_type]","class":!!t.parsedErrors.hasError("account_type")&&"error",onchange:e.withAttr("value",i.bank_account_type)},[e("option[value='conta_corrente']",{selected:"conta_corrente"===i.bank_account_type()},"Conta corrente"),e("option[value='conta_poupanca']",{Selected:"conta_poupanca"===i.bank_account_type()},"Conta poupança"),e("option[value='conta_corrente_conjunta']",{selected:"conta_corrente_conjunta"===i.bank_account_type()},"Conta corrente conjunta"),e("option[value='conta_poupanca_conjunta']",{selected:"conta_poupanca_conjunta"===i.bank_account_type()},"Conta poupança conjunta")]),t.parsedErrors.inlineError("account_type")])]),e(".w-col.w-col-6",e(".w-row",[e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_account']","No. da conta"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account'][type='text']",{value:i.account(),"class":!!t.parsedErrors.hasError("account")&&"error",onchange:e.withAttr("value",i.account),name:"user[bank_account_attributes][account]"}),t.parsedErrors.inlineError("account")]),e(".w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.text.required.field-label.field-label.fontweight-semibold.force-text-dark[for='user_bank_account_attributes_account_digit']","Dígito conta"),e("input.string.required.w-input.text-field.positive[id='user_bank_account_attributes_account_digit'][type='text']",{value:i.account_digit(),"class":!!t.parsedErrors.hasError("account_digit")&&"error",onchange:e.withAttr("value",i.account_digit),name:"user[bank_account_attributes][account_digit]"}),t.parsedErrors.inlineError("account_digit")])]))]),a.bank_account_id?e("input[id='user_bank_account_attributes_id'][type='hidden']",{name:"user[bank_account_attributes][id]",value:i.bank_account_id()}):""]),e(".w-form.card.card-terciary.u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","Endereço"),e(".fontsize-small.u-marginbottom-20.u-marginbottom-20",["Os dados abaixo serão utilizados para envio de recompensas e para emissão de Nota Fiscal, caso aplicável."]),e(".w-row",[e(".input.select.optional.user_country.w-col.w-col-6.w-sub-col",[e("label.field-label","País"),e("select.select.optional.w-input.text-field.w-select.positive[id='user_country_id'][name='user[country_id]']",{onchange:e.withAttr("value",i.country_id),"class":!!t.parsedErrors.hasError("country_id")&&"error"},[e("option[value='']"),o.isEmpty(t.countries())?"":o.map(t.countries(),function(t){return e("option"+(t.id==i.country_id()?'[selected="selected"]':""),{value:t.id},t.name_en)})]),t.parsedErrors.inlineError("country_id")]),e(".w-col.w-col-6")]),e(".w-row",[e(".input.string.optional.user_address_street.w-col.w-col-6.w-sub-col",[e("label.field-label","Endereço"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[data-required-in-brazil='true'][id='user_address_street'][name='user[address_street]'][type='text']",{value:i.street(),"class":!!t.parsedErrors.hasError("street")&&"error",onchange:e.withAttr("value",i.street)}),t.parsedErrors.inlineError("street")]),e(".w-col.w-col-6",e(".w-row",[e(".input.tel.optional.user_address_number.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.field-label","Número"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[id='user_address_number'][name='user[address_number]'][type='tel']",{value:i.number(),"class":!!t.parsedErrors.hasError("number")&&"error",onchange:e.withAttr("value",i.number)}),t.parsedErrors.inlineError("number")]),e(".input.string.optional.user_address_complement.w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.field-label","Complemento"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[id='user_address_complement'][name='user[address_complement]'][type='text']",{value:i.complement(),"class":!!t.parsedErrors.hasError("complement")&&"error",onchange:e.withAttr("value",i.complement)}),t.parsedErrors.inlineError("complement")])]))]),e(".w-row",[e(".input.string.optional.user_address_neighbourhood.w-col.w-col-6.w-sub-col",[e("label.field-label","Bairro"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[id='user_address_neighbourhood'][name='user[address_neighbourhood]'][type='text']",{value:i.neighbourhood(),"class":!!t.parsedErrors.hasError("neighbourhood")&&"error",onchange:e.withAttr("value",i.neighbourhood)}),t.parsedErrors.inlineError("neighbourhood")]),e(".input.string.optional.user_address_city.w-col.w-col-6",[e("label.field-label","Cidade"),e("input.string.optional.w-input.text-field.w-input.text-field.positive[data-required-in-brazil='true'][id='user_address_city'][name='user[address_city]'][type='text']",{value:i.city(),"class":!!t.parsedErrors.hasError("city")&&"error",onchange:e.withAttr("value",i.city)}),t.parsedErrors.inlineError("city")])]),e(".w-row",[e(".input.select.optional.user_address_state.w-col.w-col-6.w-sub-col",[e("label.field-label","Estado"),e("select.select.optional.w-input.text-field.w-select.text-field.positive[data-required-in-brazil='true'][id='user_address_state'][name='user[address_state]']",{"class":!!t.parsedErrors.hasError("state")&&"error",onchange:e.withAttr("value",i.state)},[e("option[value='']"),o.isEmpty(t.states())?"":o.map(t.states(),function(t){return e("option[value='"+t.acronym+"']"+(t.acronym==i.state()?'[selected="selected"]':""),{value:t.acronym},t.name)}),e("option[value='outro / other']","Outro / Other")]),t.parsedErrors.inlineError("state")]),e(".w-col.w-col-6",e(".w-row",[e(".input.tel.optional.user_address_zip_code.w-col.w-col-6.w-col-small-6.w-col-tiny-6.w-sub-col-middle",[e("label.field-label","CEP"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[data-fixed-mask='99999-999'][data-required-in-brazil='true'][id='user_address_zip_code'][name='user[address_zip_code]'][type='tel']",{value:i.zipcode(),"class":!!t.parsedErrors.hasError("zipcode")&&"error",onchange:e.withAttr("value",i.zipcode)}),t.parsedErrors.inlineError("zipcode")]),e(".input.tel.optional.user_phone_number.w-col.w-col-6.w-col-small-6.w-col-tiny-6",[e("label.field-label","Telefone"),e("input.string.tel.optional.w-input.text-field.w-input.text-field.positive[data-fixed-mask='(99) 9999-99999'][data-required-in-brazil='true'][id='user_phone_number'][name='user[phone_number]'][type='tel']",{value:i.phonenumber(),onchange:e.withAttr("value",i.phonenumber),"class":!!t.parsedErrors.hasError("phonenumber")&&"error",onkeyup:e.withAttr("value",function(e){return t.applyPhoneMask(e)})}),t.parsedErrors.inlineError("phonenumber")])]))])]),r.hideCreditCards?"":e(".w-form.card.card-terciary.u-marginbottom-20",[e(".fontsize-base.fontweight-semibold","Cartões de crédito"),e(".fontsize-small.u-marginbottom-20",["Caso algum projeto que você tenha apoiado ",e("b","com Cartão de Crédito")," não seja bem-sucedido, nós efetuaremos o reembolso ",e("b","automaticamente")," no cartão utilizado para efetuar o apoio. "]),e(".divider.u-marginbottom-20"),e(".w-row.w-hidden-tiny.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold","Cartão")),e(".w-col.w-col-5.w-col-small-5",e(".fontweight-semibold.fontsize-small","Operadora")),e(".w-col.w-col-2.w-col-small-2")]),o.map(t.creditCards(),function(o){return e(".w-row.card",[e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold",["XXXX XXXX XXXX",e.trust("&nbsp;"),o.last_digits])),e(".w-col.w-col-5.w-col-small-5",e(".fontsize-small.fontweight-semibold.u-marginbottom-10",o.card_brand.toUpperCase())),e(".w-col.w-col-2.w-col-small-2",e("a.btn.btn-terciary.btn-small[rel='nofollow']",{onclick:t.deleteCard(o.id)},"Remover"))])}),e("form.w-hidden",{action:"/pt/users/"+n.id+"/credit_cards/"+t.toDeleteCard(),method:"POST",config:t.setCardDeletionForm},[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='delete']"),e("input[name='authenticity_token'][type='hidden'][value='"+pt.authenticityToken()+"']")])]))),e("div",e(".w-container"+(r.useFloatBtn?".w-section.save-draft-btn-section":""),e(".w-row",[e(".w-col.w-col-4.w-col-push-4",t.loading()?pt.loader():e("input.btn.btn.btn-large[name='commit'][type='submit'][value='Salvar']")),e(".w-col.w-col-4")])))])])])}},ma={controller:function(t){var o=e.prop(),r=e.prop(),n=t.userId,a=pt.toggleProp(!1,!0),i=e.prop(!1);return Ro.getUserProjectReminders(n).then(r)["catch"](function(t){i(!0),e.redraw()}),Ro.getUserContributedProjects(n,null).then(o)["catch"](function(t){i(!0),e.redraw()}),{projects:o,showNotifications:a,projectReminders:r,error:i}},view:function(t,r){var n=r.user,a=t.projectReminders(),i=t.projects();return e("[id='notifications-tab']",t.error()?e.component($n,{message:"Erro ao carregar a página."}):e("form.simple_form.edit_user[accept-charset='UTF-8'][action='/pt/users/"+n.id+"'][method='post'][novalidate='novalidate']",[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='patch']"),e("input[name='authenticity_token'][type='hidden'][value='"+pt.authenticityToken()+"']"),e("input[id='anchor'][name='anchor'][type='hidden'][value='notifications']"),e(".w-container",[e(".w-row",e(".w-col.w-col-10.w-col-push-1",e(".w-form.card.card-terciary",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Newsletters:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[newsletter]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.newsletter?"[checked='checked']":"")+"[id='user_newsletter'][name=user[newsletter]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-base.fontweight-semibold[for='checkbox']"," Newsletter do Catarse (semanal)"),e("div",["Projetos em destaque e posts do nosso Blog",e.trust("&nbsp;")])]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Projetos que você apoiou:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_project_posts]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_project_posts?"[checked='checked']":"")+"[id='user_subscribed_to_project_posts'][name=user[subscribed_to_project_posts]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-base.fontweight-semibold"," Quero receber atualizações dos projetos"),e(".u-marginbottom-20",e("a.alt-link[href='javascript:void(0);']",{onclick:t.showNotifications.toggle}," Gerenciar as notificações de "+n.total_contributed_projects+" projetos")),t.showNotifications()?e("ul.w-list-unstyled.u-radius.card.card-secondary[id='notifications-box']",[o.isEmpty(i)?"":o.map(i,function(t){return e("li",e(".w-checkbox.w-clearfix",[e("input[id='unsubscribes_"+t.project_id+"'][type='hidden'][value='']",{name:"unsubscribes["+t.project_id+"]"}),e("input.w-checkbox-input"+(t.unsubscribed?"":"[checked='checked']")+"[type='checkbox'][value='1'][id='user_unsubscribes_"+t.project_id+"']",{name:"unsubscribes["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)]))})]):""]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Social:")),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_friends_contributions]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_friends_contributions?"[checked='checked']":"")+"[id='user_subscribed_to_friends_contributions'][name=user[subscribed_to_friends_contributions]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","Um amigo apoiou ou lançou um projeto")])),e(".w-col.w-col-8",e(".w-checkbox.w-clearfix",[e("input[name=user[subscribed_to_new_followers]][type='hidden'][value='0']"),e("input.w-checkbox-input"+(n.subscribed_to_new_followers?"[checked='checked']":"")+"[id='user_subscribed_to_new_followers'][name=user[subscribed_to_new_followers]][type='checkbox'][value='1']"),e("label.w-form-label.fontsize-small","Um amigo começou a me seguir")]))]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4",e(".fontweight-semibold.fontsize-small.u-marginbottom-10","Lembretes de projetos:")),e(".w-col.w-col-8",[o.isEmpty(a)?"":o.map(a,function(t){return e(".w-checkbox.w-clearfix",[e("input[id='user_reminders_"+t.project_id+"'][type='hidden'][value='false']",{name:"user[reminders]["+t.project_id+"]"}),e("input.w-checkbox-input[checked='checked'][type='checkbox'][value='1'][id='user_reminders_"+t.project_id+"']",{name:"user[reminders]["+t.project_id+"]"}),e("label.w-form-label.fontsize-small",t.project_name)])})])])]))),e(".u-margintop-30",e(".w-container",e(".w-row",e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn-large[id='save'][name='commit'][type='submit'][value='Salvar']")))))])]))}},fa={controller:function(t){var r=e.prop({}),n=t.user_id.split("-")[0],a=e.prop(window.location.hash),i=function(t){var r={"#projects":e(Xn,{userId:n,showDraft:!0}),"#contributions":e(sa,{userId:n,user:t}),"#about_me":e(na,{userId:n,user:t}),"#settings":e(pa,{userId:n,user:t}),"#notifications":e(ma,{userId:n,user:t})};return a(window.location.hash),o.isEmpty(a())||"#_=_"===a()?(a("#contributions"),r["#contributions"]):r[a()]};return pt.redrawHashChange(),Ro.fetchUser(n,!0,r),{displayTabContent:i,hash:a,userDetails:r}},view:function(t,r){var n=t.userDetails();return e("div",[e(Wn,{user:n,hideDetails:!0}),o.isEmpty(n)?"":[e("nav.dashboard-nav.u-text-center",{style:{"z-index":"10",position:"relative"}},e(".w-container",[e("a.dashboard-nav-link"+("#contributions"===t.hash()?".selected":"")+"[data-target='#dashboard_contributions'][href='#contributions'][id='dashboard_contributions_link']","Apoiados"),e("a.dashboard-nav-link"+("#projects"===t.hash()?".selected":"")+"[data-target='#dashboard_projects'][href='#projects'][id='dashboard_projects_link']","Criados"),e("a.dashboard-nav-link"+("#about_me"===t.hash()?".selected":"")+"[data-target='#dashboard_about_me'][href='#about_me'][id='dashboard_about_me_link']","Perfil Público"),e("a.dashboard-nav-link"+("#settings"===t.hash()?".selected":"")+"[data-target='#dashboard_settings'][href='#settings'][id='dashboard_settings_link']","Dados cadastrais"),e("a.dashboard-nav-link"+("#notifications"===t.hash()?".selected":"")+"[data-target='#dashboard_notifications'][href='#notifications'][id='dashboard_notifications_link']","Notificações"),e("a.dashboard-nav-link.u-right-big-only[href='/pt/users/"+n.id+"']",{
config:e.route,onclick:function(){e.route("/users/"+n.id,{user_id:n.id})}},"Ir para o perfil público")])),e("section.section",e(".w-container",e(".w-row",n.id?t.displayTabContent(n):pt.loader())))]])}},wa=(_.partial(pt.i18nScope,"projects.contributions.edit.errors"),{controller:function(t){var o=t.vm,r=o.getSlipPaymentDate(t.contribution_id),n=e.prop(!1),a=e.prop(!1),i=e.prop(!1),s=function(){return n(!0),e.redraw(),o.paySlip(t.contribution_id,t.project_id,a,n,i),!1};return{buildSlip:s,slipPaymentDate:r,loading:n,completed:i,error:a}},view:function(t,o){return e(".w-row",e(".w-col.w-col-12",e(".u-margintop-30.u-marginbottom-60.u-radius.card-big.card",[e(".fontsize-small.u-marginbottom-20",t.slipPaymentDate()?"Esse boleto bancário vence no dia "+pt.momentify(t.slipPaymentDate().slip_expiration_date)+".":"carregando..."),e(".fontsize-small.u-marginbottom-40","Ao gerar o boleto, o realizador já está contando com o seu apoio. Pague até a data de vencimento pela internet, casas lotéricas, caixas eletrônicos ou agência bancária."),e(".w-row",e(".w-col.w-col-8.w-col-push-2",[t.loading()?pt.loader():t.completed()?"":e("input.btn.btn-large.u-marginbottom-20",{onclick:t.buildSlip,value:"Imprimir Boleto",type:"submit"}),t.error()?e.component($n,{message:t.error()}):"",e(".fontsize-smallest.u-text-center.u-marginbottom-30",["Ao apoiar, você concorda com os ",e("a.alt-link[href='/pt/terms-of-use']","Termos de Uso "),"e ",e("a.alt-link[href='/pt/privacy-policy']","Política de Privacidade")])]))])))}}),ba=/(\d{1,4})/g,ga=[].indexOf||function(e){for(var t=0,o=this.length;t<o;t++)if(t in this&&this[t]===e)return t;return-1},ha=[{type:"elo",patterns:[401178,401179,431274,438935,451416,457393,457631,457632,504175,506699,5067,509,627780,636297,636368,650,6516,6550],format:ba,length:[16],cvvLength:[3],luhn:!0},{type:"maestro",patterns:[5018,502,503,506,56,58,639,6220,67],format:ba,length:[12,13,14,15,16,17,18,19],cvvLength:[3],luhn:!0},{type:"forbrugsforeningen",patterns:[600],format:ba,length:[16],cvvLength:[3],luhn:!0},{type:"dankort",patterns:[5019],format:ba,length:[16],cvvLength:[3],luhn:!0},{type:"visa",patterns:[4],format:ba,length:[13,16],cvvLength:[3],luhn:!0},{type:"mastercard",patterns:[51,52,53,54,55,22,23,24,25,26,27],format:ba,length:[16],cvvLength:[3],luhn:!0},{type:"amex",patterns:[34,37],format:/(\d{1,4})(\d{1,6})?(\d{1,5})?/,length:[15],cvvLength:[3,4],luhn:!0},{type:"dinersclub",patterns:[30,36,38,39],format:/(\d{1,4})(\d{1,6})?(\d{1,4})?/,length:[14],cvvLength:[3],luhn:!0},{type:"discover",patterns:[60,64,65,622],format:ba,length:[16],cvvLength:[3],luhn:!0},{type:"unionpay",patterns:[62,88],format:ba,length:[16,17,18,19],cvvLength:[3],luhn:!1},{type:"jcb",patterns:[35],format:ba,length:[16],cvvLength:[3],luhn:!0}],_a=function(e){var t=void 0;return e?(null!=(t=Sa(e))?t.type:void 0)||null:null},va=function(e){var t=void 0,o=void 0,r=void 0;for(o=0,r=ha.length;o<r;o++)if(t=ha[o],t.type===e)return t},ya=function(e,t){var o=void 0,r=void 0,n=void 0;return o=e.currentTarget,n=o.value,r=_a(n)||"unknown",t(r)},ja=function(e,t){var o=void 0,r=void 0;if(o=e.currentTarget,r=o.value,8===e.which&&(null==o.selectionStart||o.selectionStart===r.length))return/\d\s$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d\s$/,""))})):/\s\d?$/.test(r)?(e.preventDefault(),setTimeout(function(){return o.value=t(r.replace(/\d$/,""))})):void 0},ka=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,l=void 0;for(null==e&&(e=""),r="０１２３４５６７８９",n="0123456789",l="",t=e.split(""),a=0,s=t.length;a<s;a++)o=t[a],i=r.indexOf(o),i>-1&&(o=n[i]),l+=o;return l},xa=function(e,t,o){var r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,l=void 0,c=void 0;try{n=t.selectionStart}catch(s){i=s,n=null}if(l=t.value,t.value=o(e),null!==n&&t===document.activeElement)return n===l.length&&(n=e.length),l!==e&&(c=l.slice(n-1,+n+1||9e9),r=e.slice(n-1,+n+1||9e9),a=e[n],/\d/.test(a)&&c===a+" "&&r===" "+a&&(n+=1)),t.selectionStart=n,t.selectionEnd=n},za=function(e,t){var o=e.currentTarget;return setTimeout(function(){var e=void 0;return e=o.value,e=ka(e),e=Ca(e),xa(e,o,t)})},Ca=function(e){var t=void 0,r=void 0,n=void 0,a=void 0;return e=e.replace(/\D/g,""),(t=Sa(e))?(a=t.length[t.length.length-1],e=e.slice(0,a),t.format.global?null!=(n=e.match(t.format))?n.join(" "):void 0:(r=t.format.exec(e),null!=r?(r.shift(),r=o.filter(r,function(e){return e}),r.join(" ")):void 0)):e},Ea=function(e,t){var o=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,l=void 0;if(n=String.fromCharCode(e.which),/^\d+$/.test(n)&&(o=e.currentTarget,l=o.value,r=Sa(l+n),a=(l.replace(/\D/g,"")+n).length,s=16,r&&(s=r.length[r.length.length-1]),!(a>=s||null!=o.selectionStart&&o.selectionStart!==l.length)))return i=r&&"amex"===r.type?/^(\d{4}|\d{4}\s\d{6})$/:/(?:^|\s)(\d{4})$/,i.test(l)?(e.preventDefault(),setTimeout(function(){return o.value=t(l+" "+n)})):i.test(l+n)?(e.preventDefault(),setTimeout(function(){return o.value=t(l+n+" ")})):void 0},Sa=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,a=void 0,i=void 0,s=void 0,l=void 0;for(e=(""+e).replace(/\D/g,""),o=0,n=ha.length;o<n;o++)for(t=ha[o],l=t.patterns,r=0,a=l.length;r<a;r++)if(s=l[r],i=""+s,e.substr(0,i.length)===i)return t},Pa=function(e){var t=void 0;return null!=e.selectionStart&&e.selectionStart!==e.selectionEnd||!(null==("undefined"!=typeof document&&null!==document&&null!=(t=document.selection)?t.createRange:void 0)||!document.selection.createRange().text)},Ma=function(e){var t=void 0;return!(!e.metaKey&&!e.ctrlKey)||32!==e.which&&(0===e.which||(e.which<33||(t=String.fromCharCode(e.which),!!/[\d\s]/.test(t))))},Aa=function(e){var t=void 0,o=void 0,r=void 0,n=void 0;if(t=e.currentTarget,r=String.fromCharCode(e.which),/^\d+$/.test(r)&&!Pa(t))return n=(t.value+r).replace(/\D/g,""),o=Sa(n),o?n.length<=o.length[o.length.length-1]:n.length<=16},Ta=function(e,t,o){e.onkeypress=function(e){Ma(e),Aa(e),Ea(e,o)},e.oninput=function(e){za(e,o),ya(e,t)},e.onkeydown=function(e){return ja(e,o)},e.onkeyup=function(e){ya(e,t)},e.onpaste=function(e){return za(e,o)},e.onchange=function(e){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:"contribution_cc_edit"}),za(e,o)}},Da=function(e){var t=void 0,o=void 0,r=void 0,n=void 0,a=void 0,i=void 0;for(a=!0,i=0,o=(""+e).split("").reverse(),r=0,n=o.length;r<n;r++)t=o[r],t=parseInt(t,10),(a=!a)&&(t*=2),t>9&&(t-=9),i+=t;return i%10===0},qa=function(e){var t=void 0,o=void 0;return e=(""+e).replace(/\s+|-/g,""),!!/^\d+$/.test(e)&&(t=Sa(e),!!t&&(o=e.length,ga.call(t.length,o)>=0&&(t.luhn===!1||Da(e))))},Ra=function(e,t){var o=void 0,r=void 0,n=void 0;return"object"===("undefined"==typeof e?"undefined":v(e))&&"month"in e&&(n=e,e=n.month,t=n.year),!(!e||!t)&&(e=String(e).trim(),t=String(t).trim(),!!/^\d+$/.test(e)&&(!!/^\d+$/.test(t)&&(e>=1&&e<=12&&(2===t.length&&(t=t<70?"20"+t:"19"+t),4===t.length&&(r=new Date(t,e),o=new Date,r.setMonth(r.getMonth()-1),r.setMonth(r.getMonth()+1,1),r>o)))))},Fa=function(e,t){var o=void 0,r=void 0;return e=String(e).trim(),!!/^\d+$/.test(e)&&(o=va(t),null!=o?(r=e.length,ga.call(o.cvvLength,r)>=0):e.length>=3&&e.length<=4)},Oa={setEvents:Ta,validateCardNumber:qa,validateCardcvv:Fa,validateCardExpiry:Ra},Ia={controller:function(t){var o=t.type||e.prop("unknown"),r=function(e,r){r||Oa.setEvents(e,o,t.value)};return{setCreditCardHandlers:r,cardType:o}},view:function(t,o){return e('input.w-input.text-field[name="'+o.name+'"][required="required"][type="tel"]',{onfocus:o.onfocus,"class":o["class"],config:t.setCreditCardHandlers,onblur:o.onblur})}},Na=o.partial(pt.i18nScope,"projects.contributions.edit"),Va=o.partial(pt.i18nScope,"projects.contributions.edit_international"),Ba={controller:function(r){var n=r.vm,a=e.prop(!0),i=e.prop(!0),s=e.prop({id:-1}),l=e.prop("1"),c=e.prop(!1),d=e.prop("unknown"),u=o.partial(pt.mask,"999.999.999-99"),p=o.partial(pt.mask,"99.999.999/9999-99"),m=function(){return s().id===-1?(b(),w(),g(),_()):n.creditCardFields.errors([]),0===n.creditCardFields.errors().length&&n.sendPayment(s,l,r.contribution_id,r.project_id),!1},f=function(e,t){if(e){var r=o.reject(n.creditCardFields.errors(),function(e){return o.isEqual(e,t)});n.creditCardFields.errors(r)}else n.creditCardFields.errors().push(t)},w=function(){var e=Oa.validateCardcvv(n.creditCardFields.cvv(),d()),o={field:"cvv",message:t.t("errors.inline.creditcard_cvv",S())};f(e,o)},b=function(){var e=Oa.validateCardExpiry(n.creditCardFields.expMonth(),n.creditCardFields.expYear()),o={field:"expiry",message:t.t("errors.inline.creditcard_expiry",S())};f(e,o)},g=function(){var e=Oa.validateCardNumber(n.creditCardFields.number()),o={field:"number",message:t.t("errors.inline.creditcard_number",S())};f(e,o)},h=function(){var e=n.creditCardFields.cardOwnerDocument(),t=String(e).replace(/[\.|\-|\/]*/g,""),o=!1,r="";e.length>14?(o=pt.validateCnpj(e),r="CNPJ inválido."):(o=pt.validateCpf(t),r="CPF inválido."),f(o,{field:"cardOwnerDocument",message:r})},_=function(){var e=n.creditCardFields.name().replace(/ /g,""),r=/^[a-zA-Z]*$/,a={field:"name",message:t.t("errors.inline.creditcard_name",S())},i=!(o.isEmpty(e)||!r.test(e));f(i,a)},v=o.compose(n.creditCardFields.name,pt.noNumbersMask),y=function(e){var t=pt.numbersOnlyMask(e.substr(0,4));return n.creditCardFields.cvv(t)},j=function(e){e.length>14?n.creditCardFields.cardOwnerDocument(p(e)):n.creditCardFields.cardOwnerDocument(u(e))},k=function(t){var r=o.findWhere(n.creditCardFields.errors(),{field:t});return r?e.component($n,{message:r.message}):""},x=function(t){return e.component(rr,{el:".tooltip-wrapper.fa.fa-question-circle.fontcolor-secondary",text:t,width:380})},z=function(e,t){return s()===e},C=function(e,t){if(!t){var o=document.createElement("script");o.src="//assets.pagar.me/js/pagarme.min.js",document.body.appendChild(o),o.onload=function(){n.pagarme(window.PagarMe)}}},E=function(e){s(e),c(e.id===-1?!0:!1)},S=function(e){return n.isInternational()?Va(e):Na(e)};return n.getInstallments(r.contribution_id).then(function(){a(!1),e.redraw()}),n.getSavedCreditCards(r.user_id).then(function(t){i(!1),E(t[0]),e.redraw()}),{vm:n,onSubmit:m,fieldHasError:k,buildTooltip:x,loadingInstallments:a,loadingSavedCreditCards:i,installments:n.installments,selectedInstallment:l,savedCreditCards:n.savedCreditCards,creditCard:n.creditCardFields,creditCardType:d,checkCreditCard:g,checkCreditCardName:_,applyCreditCardNameMask:v,applyCreditCardMask:n.applyCreditCardMask,applyDocumentMask:j,checkCardOwnerDocument:h,applyCvvMask:y,checkcvv:w,selectCreditCard:E,isCreditCardSelected:z,expMonths:n.expMonthOptions(),expYears:n.expYearOptions(),loadPagarme:C,scope:S,showForm:c}},view:function(r,n){var a=r.vm.isInternational();return e(".w-form.u-marginbottom-40",{config:r.loadPagarme},[e('form[name="email-form"]',{onsubmit:r.onSubmit},[!r.loadingSavedCreditCards()&&r.savedCreditCards().length>1?e(".my-credit-cards.w-form.back-payment-form-creditcard.records-choice.u-marginbottom-40",o.map(r.savedCreditCards(),function(n,a){return e("div#credit-card-record-"+a+".w-row.creditcard-records",{style:"cursor:pointer;",onclick:function(){return r.selectCreditCard(n)}},[e(".w-col.w-col-1.w-sub-col",e(".w-radio.w-clearfix.back-payment-credit-card-radio-field",e("input",{checked:r.isCreditCardSelected(n,a),name:"payment_subscription_card",type:"radio",value:n.card_key}))),n.id===-1?e(".w-col.w-col-11",e(".fontsize-small.fontweight-semibold.fontcolor-secondary",t.t("credit_card.use_another",r.scope()))):[e(".w-col.w-col-2.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.text-success",n.card_brand.toUpperCase())),e(".w-col.w-col-5.w-sub-col.w-sub-col-middle",e(".fontsize-small.fontweight-semibold.u-marginbottom-20","XXXX.XXXX.XXXX."+n.last_digits)),e(".w-col.w-col-4",r.loadingInstallments()||r.installments().length<=1?"":e("select.w-select.text-field.text-field-creditcard",{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e('option[value="'+t.number+'"]',t.number+" X R$ "+t.amount)})))]])})):r.loadingSavedCreditCards()?e(".fontsize-small.u-marginbottom-40",t.t("credit_card.loading",r.scope())):"",r.showForm()?e("#credit-card-payment-form.u-marginbottom-40",[e("div#credit-card-name",[e(".w-row",[e(a?".w-col.w-col-12":".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-name"]',t.t("credit_card.name",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.name_tip",r.scope())),e('input.w-input.text-field[name="credit-card-name"][type="text"]',{onfocus:r.vm.resetCreditCardFieldError("name"),"class":r.fieldHasError("name")?"error":"",onblur:r.checkCreditCardName,onkeyup:e.withAttr("value",r.applyCreditCardNameMask),value:r.creditCard.name()}),r.fieldHasError("name")]),a?"":e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",[e('label.field-label.fontweight-semibold[for="credit-card-document"]',t.t("credit_card.document",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.document_tip",r.scope())),e('input.w-input.text-field[name="credit-card-document"]',{onfocus:r.vm.resetCreditCardFieldError("cardOwnerDocument"),"class":r.fieldHasError("cardOwnerDocument")?"error":"",onblur:r.checkCardOwnerDocument,onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.creditCard.cardOwnerDocument()}),r.fieldHasError("cardOwnerDocument")])])]),e("div#credit-card-number",[e('label.field-label.fontweight-semibold[for="credit-card-number"]',t.t("credit_card.number",r.scope())),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.number_tip",r.scope())),e.component(Ia,{onfocus:r.vm.resetCreditCardFieldError("number"),onblur:r.checkCreditCard,"class":r.fieldHasError("number")?"error":"",value:r.creditCard.number,name:"credit-card-number",type:r.creditCardType}),r.fieldHasError("number")]),e("div#credit-card-date",[e('label.field-label.fontweight-semibold[for="expiration-date"]',[t.t("credit_card.expiry",r.scope())]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.expiry_tip",r.scope())),e(".w-row",[e(".w-col.w-col-6.w-col-tiny-6.w-sub-col-middle",e('select.w-select.text-field[name="expiration-date_month"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expMonth),value:r.creditCard.expMonth()},o.map(r.expMonths,function(t){return e("option",{value:t[0]},t[1])}))),e(".w-col.w-col-6.w-col-tiny-6",e('select.w-select.text-field[name="expiration-date_year"]',{onfocus:r.vm.resetCreditCardFieldError("expiry"),"class":r.fieldHasError("expiry")?"error":"",onchange:e.withAttr("value",r.creditCard.expYear),onblur:r.checkExpiry,value:r.creditCard.expYear()},o.map(r.expYears,function(t){return e("option",{value:t},t)}))),e(".w-col.w-col-12",r.fieldHasError("expiry"))])]),e("div#credit-card-cvv",[e('label.field-label.fontweight-semibold[for="credit-card-cvv"]',[t.t("credit_card.cvv",r.scope()),r.buildTooltip(t.t("credit_card.cvv_tooltip",r.scope()))]),e(".fontsize-smallest.fontcolor-terciary.u-marginbottom-10.field-label-tip.u-marginbottom-10",t.t("credit_card.cvv_tip",r.scope())),e(".w-row",[e(".w-col.w-col-8.w-col-tiny-6.w-sub-col-middle",e('input.w-input.text-field[name="credit-card-cvv"][type="tel"]',{onfocus:r.vm.resetCreditCardFieldError("cvv"),"class":r.fieldHasError("cvv")?"error":"",onkeyup:e.withAttr("value",r.applyCvvMask),onblur:r.checkcvv,value:r.creditCard.cvv()}),r.fieldHasError("cvv")),e(".w-col.w-col-4.w-col-tiny-6.u-text-center",e('img[src="https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57298c1c7e99926e77127bdd_cvv-card.jpg"][width="176"]'))])]),r.loadingInstallments()||r.installments().length<=1?"":e(".w-row",[e(".w-col.w-col-6",[e('label.field-label.fontweight-semibold[for="split"]',t.t("credit_card.installments",r.scope())),e('select.w-select.text-field[name="split"]',{onchange:e.withAttr("value",r.selectedInstallment),value:r.selectedInstallment()},o.map(r.installments(),function(t){return e('option[value="'+t.number+'"]',t.number+" X R$ "+t.amount)}))]),e(".w-col.w-col-6")]),e(".w-checkbox.w-clearfix",[e('input#payment_save_card.w-checkbox-input[type="checkbox"][name="payment_save_card"]',{onchange:e.withAttr("checked",r.creditCard.save),checked:r.creditCard.save()}),e('label.w-form-label[for="payment_save_card"]',t.t("credit_card.save_card",r.scope()))])]):"",e(".w-row",[e(".w-col.w-col-8.w-col-push-2",[o.isEmpty(r.vm.submissionError())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",e.trust(r.vm.submissionError()))),r.vm.isLoading()?pt.loader():e('input.btn.btn-large.u-marginbottom-20[type="submit"]',{value:t.t("credit_card.finish_payment",r.scope())}),e(".fontsize-smallest.u-text-center.u-marginbottom-30",e.trust(t.t("credit_card.terms_of_use_agreement",r.scope())))])])])])}},La=o.partial(pt.i18nScope,"projects.contributions.edit"),Ua=o.partial(pt.i18nScope,"projects.contributions.edit_international"),Ya={controller:function(t){var o=e.prop(!1),r=function(){return t.vm.isInternational()?Ua():La()},n=function(e,t){};return{scrollTo:n,isSlip:o,scope:r,vm:t.vm}},view:function(o,r){return e("#catarse_pagarme_form",{config:o.scrollTo},[e(".u-text-center-small-only.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("payment_info",o.scope())),e(".fontsize-smallest.fontcolor-secondary.fontweight-semibold",[e("span.fa.fa-lock"),t.t("safe_payment",o.scope())])]),e(".flex-row.u-marginbottom-40",[e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!1)},"class":o.isSlip()?"":"selected"},[e(".fontsize-base.fontweight-semibold",t.t("credit_card_select",o.scope())),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-20",t.t("debit_card_info",o.scope())),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299bd8f326a24d4828a0fd_credit-cards.png']")]),r.vm.isInternational()?e(".flex-column"):e("a.w-inline-block.btn-select.flex-column.u-marginbottom-20.u-text-center[href='javascript:void(0);']",{onclick:function(){return o.isSlip(!0)},"class":o.isSlip()?"selected":""},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Boleto bancário"),e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/57299c6ef96a6e44489a7a07_boleto.png'][width='48']")])]),o.isSlip()?r.vm.isInternational()?"":e("#boleto-section",[e.component(wa,{vm:r.vm,contribution_id:r.contribution_id,project_id:r.project_id})]):e("#credit-card-section",[e.component(Ba,{vm:r.vm,contribution_id:r.contribution_id,project_id:r.project_id,user_id:r.user_id})])])}},Ha=o.partial(pt.i18nScope,"projects.contributions.edit"),Wa=o.partial(pt.i18nScope,"projects.contributions.edit_international"),$a={controller:function(){var t=Ko.getCurrentProject(),r=t.mode,n=t.user.id,a=Vn(r),i=e.prop(!1),s=h.getCurrentContribution(),l=e.prop(s().reward),c=s().value,d=o.partial(pt.mask,"(99) 9999-99999"),u=o.partial(pt.mask,"999.999.999-99"),p=o.partial(pt.mask,"99.999.999/9999-99"),m=o.partial(pt.mask,"99999-999"),f=e.prop(!1),w=pt.getUserID(),b=Ro.getCurrentUser(),g=function(){return o.findWhere(bo.fees(),{id:s().shipping_fee_id})},_=function(){a.validate()&&(a.similityExecute(s().id),i(!0))},v=function(t){var r=o.findWhere(a.fields.errors(),{field:t});return r?e.component($n,{message:r.message}):""},y=function(e,t){t||a.fields.userState("")},j=function(e){e.length>14?(f(!0),a.fields.ownerDocument(p(e))):(f(!1),a.fields.ownerDocument(u(e)))},k=o.compose(a.fields.zipCode,m),x=o.compose(a.fields.phone,d),z=function(e){return function(t){CatarseAnalytics.oneTimeEvent({cat:"contribution_finish",act:a.isInternational?"contribution_address_br":"contribution_address_int"}),o.isFunction(e)&&e(t)}},C=function(e){return a.isInternational()?Wa(e):Ha(e)};return o.isNull(w)?pt.navigateToDevise():(bo.getFees(l()).then(bo.fees),a.similityExecute(s().id),{addressChange:z,applyDocumentMask:j,applyZipcodeMask:k,applyPhoneMask:x,fieldHasError:v,setStateOther:y,validateForm:_,projectUserId:n,showPaymentForm:i,contribution:s,reward:l,value:c,mode:r,scope:C,isCnpj:f,vm:a,user:b,project:t,shippingFee:g,toggleDescription:pt.toggleProp(!1,!0)})},view:function(r){var n=r.user(),a=r.project;return e("#project-payment.w-section.w-clearfix.section",[e(".w-col",e(".w-clearfix.w-hidden-main.w-hidden-medium.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold",t.t("selected_reward.value",r.scope())),e("a.w-inline-block.arrow-admin.fa.fa-chevron-down.fontcolor-secondary[href='#']"),e(".w-clearfix.u-marginbottom-20",e(".fontsize-larger.text-success.u-left","R$ "+Number(r.value).toFixed())),e(".w-clearfix.back-payment-info-reward",{style:{display:"none"}},[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest",r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:Number(r.value).toFixed()}))))),e('a.fontsize-small.link-hidden.u-right.fontweight-semibold[href="/projects/'+a.project_id+'/contributions/new"]',t.t("selected_reward.edit",r.scope()))])])),e(".w-container",e(".w-row",[e(".w-col.w-col-8",[o.isEmpty(r.vm.fields.errors())?"":e(".card.card-error.u-radius.zindex-10.u-marginbottom-30.fontsize-smaller",e(".u-marginbottom-10.fontweight-bold",[t.t("errors.global",r.scope()),e(".errors",o.map(r.vm.fields.errors(),function(t){return e("p",t.message)}))])),e(".w-form",[e("form.u-marginbottom-40",[e(".u-marginbottom-40.u-text-center-small-only",[e(".fontweight-semibold.lineheight-tight.fontsize-large",t.t("title",r.scope())),e(".fontsize-smaller",t.t("required",r.scope()))]),n.name&&n.owner_document?e(la,{user:n,project:a}):"",e(".w-row.u-marginbottom-30",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='country']",["País / ",e("em","Country")," *"]),e("select.w-select.text-field[id='country']",{onfocus:r.vm.resetFieldError("userCountryId"),"class":!!r.fieldHasError("userCountryId")&&"error",onchange:e.withAttr("value",r.vm.fields.userCountryId),value:r.vm.fields.userCountryId()},o.map(r.vm.fields.countries(),function(t,o){return e("option",{value:t.id,key:o,selected:t.id===r.vm.fields.userCountryId()},t.name_en)})),r.fieldHasError("userCountryId")]),e(".w-col.w-col-5")]),n.name&&n.owner_document?"":e(".w-row",[e(".w-col.w-col-7.w-sub-col",[e("label.field-label.fontweight-semibold[for='complete-name']",t.t("fields.complete_name",r.scope())),e("input.w-input.text-field[id='complete-name'][name='complete-name']",{onfocus:r.vm.resetFieldError("completeName"),"class":!!r.fieldHasError("completeName")&&"error",type:"text",onchange:e.withAttr("value",r.vm.fields.completeName),value:r.vm.fields.completeName(),placeholder:"Nome Completo"}),r.fieldHasError("completeName")]),e(".w-col.w-col-5",r.vm.isInternational()?"":[e("label.field-label.fontweight-semibold[for='document']",t.t("fields.owner_document",r.scope())),e("input.w-input.text-field[id='document']",{onfocus:r.vm.resetFieldError("ownerDocument"),"class":!!r.fieldHasError("ownerDocument")&&"error",type:"tel",onkeyup:e.withAttr("value",r.applyDocumentMask),value:r.vm.fields.ownerDocument()}),r.fieldHasError("ownerDocument")])]),e(".w-checkbox.w-clearfix",[e("input.w-checkbox-input[id='anonymous'][name='anonymous'][type='checkbox']",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_anonymous_change"})},onchange:e.withAttr("value",r.vm.fields.anonymous),checked:r.vm.fields.anonymous()}),e("label.w-form-label.fontsize-smallest[for='anonymous']",t.t("fields.anonymous",r.scope()))]),r.vm.fields.anonymous()?e(".card.card-message.u-radius.zindex-10.fontsize-smallest",e("div",[e("span.fontweight-bold",[t.t("anonymous_confirmation_title",r.scope()),e("br")]),e("br"),t.t("anonymous_confirmation",r.scope())])):""])]),e(".u-marginbottom-40",e(".w-form",[e("label.field-label.fontweight-semibold[for='street']",t.t("fields.street",r.scope())),e("input.w-input.text-field[id='street']",{type:"text",onfocus:r.vm.resetFieldError("street"),"class":!!r.fieldHasError("street")&&"error",onchange:r.addressChange(e.withAttr("value",r.vm.fields.street)),value:r.vm.fields.street(),placeholder:"Rua Da Minha Casa"}),r.fieldHasError("street"),e(".w-row",r.vm.isInternational()?"":[e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='number']",t.t("fields.street_number",r.scope())),e("input.w-input.text-field[id='number']",{onfocus:r.vm.resetFieldError("number"),"class":!!r.fieldHasError("number")&&"error",type:"text",onchange:r.addressChange(e.withAttr("value",r.vm.fields.number)),value:r.vm.fields.number(),placeholder:"421"}),r.fieldHasError("number")]),e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='address-complement']",t.t("fields.street_complement",r.scope())),e("input.w-input.text-field[id='address-complement']",{onfocus:r.vm.resetFieldError("addressComplement"),"class":!!r.fieldHasError("addressComplement")&&"error",type:"text",onchange:r.addressChange(e.withAttr("value",r.vm.fields.addressComplement)),value:r.vm.fields.addressComplement(),placeholder:"Residencial 123"}),r.fieldHasError("addressComplement")]),e(".w-col.w-col-4",r.vm.isInternational()?"":[e("label.field-label.fontweight-semibold[for='neighbourhood']",t.t("fields.neighbourhood",r.scope())),e("input.w-input.text-field[id='neighbourhood']",{onfocus:r.vm.resetFieldError("neighbourhood"),"class":!!r.fieldHasError("neighbourhood")&&"error",type:"text",onchange:r.addressChange(e.withAttr("value",r.vm.fields.neighbourhood)),value:r.vm.fields.neighbourhood(),placeholder:"São José"}),r.fieldHasError("neighbourhood")])]),e(".w-row",[e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='zip-code']",t.t("fields.zipcode",r.scope())),e("input.w-input.text-field[id='zip-code']",{type:"tel",onfocus:r.vm.resetFieldError("zipCode"),"class":!!r.fieldHasError("zipCode")&&"error",onchange:r.addressChange(),onkeyup:e.withAttr("value",function(e){return r.vm.isInternational()?r.vm.fields.zipCode(e):r.applyZipcodeMask(e)}),value:r.vm.fields.zipCode(),placeholder:"42100000"}),r.fieldHasError("zipCode")]),e(".w-col.w-col-4.w-sub-col",[e("label.field-label.fontweight-semibold[for='city']",t.t("fields.city",r.scope())),e("input.w-input.text-field[id='city']",{onfocus:r.vm.resetFieldError("city"),"class":!!r.fieldHasError("city")&&"error",type:"text",onchange:r.addressChange(e.withAttr("value",r.vm.fields.city)),value:r.vm.fields.city(),placeholder:"Cidade"}),r.fieldHasError("city")]),e(".w-col.w-col-4",[e("label.field-label.fontweight-semibold[for='state']",t.t("fields.state",r.scope())),r.vm.isInternational()?e("input.w-input.text-field[id='address-state']",{onchange:r.addressChange(e.withAttr("value",r.vm.fields.userState)),"class":!!r.fieldHasError("userState")&&"error",value:r.vm.fields.userState()}):e("select.w-select.text-field[id='address-state']",{onfocus:r.vm.resetFieldError("userState"),"class":!!r.fieldHasError("userState")&&"error",onchange:r.addressChange(e.withAttr("value",r.vm.fields.userState)),value:r.vm.fields.userState()},o.map(r.vm.fields.states(),function(t,o){return e("option",{value:t.acronym,selected:t.acronym===r.vm.fields.userState()},t.name)})),r.fieldHasError("userState")])]),r.vm.isInternational()?"":e(".w-row",[e(".w-col.w-col-6",[e("label.field-label.fontweight-semibold[for='phone']",t.t("fields.phone",r.scope())),e("input.w-input.text-field[id='phone']",{onfocus:r.vm.resetFieldError("phone"),"class":!!r.fieldHasError("phone")&&"error",type:"tel",onkeyup:e.withAttr("value",r.applyPhoneMask),value:r.vm.fields.phone()}),r.fieldHasError("phone")])])])),e(".w-row.u-marginbottom-40",r.showPaymentForm()?"":e(".w-col.w-col-push-3.w-col-6",e("button.btn.btn-large",{onclick:function(){return CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_next_click"},r.validateForm)}},t.t("next_step",r.scope())))),r.showPaymentForm()?e.component(Ya,{vm:r.vm,contribution_id:r.contribution().id,project_id:Ko.currentProject().project_id,user_id:n.id}):""]),e(".w-col.w-col-4",[e(".w-hidden-small.w-hidden-tiny.card.u-radius.u-marginbottom-20",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-20",t.t("selected_reward.value",r.scope())),e(".w-clearfix.u-marginbottom-20",[e(".fontsize-larger.text-success.u-left","R$ "+Number(r.value).toFixed()),e('a.fontsize-small.link-hidden.u-right.fontweight-semibold[href="/projects/'+Ko.currentProject().project_id+"/contributions/new"+(r.reward().id?"?reward_id="+r.reward().id:"")+'"]',t.t("selected_reward.edit",r.scope()))]),e(".back-payment-info-reward",[e(".fontsize-smaller.fontweight-semibold.u-marginbottom-10",t.t("selected_reward.reward",r.scope())),e(".fontsize-smallest.reward-description.opened",{"class":r.toggleDescription()?"extended":""},r.reward().description?r.reward().description:e.trust(t.t("selected_reward.review_without_reward_html",r.scope(o.extend({value:Number(r.value).toFixed()}))))),e('a[href="javascript:void(0);"].link-hidden.link-more.u-marginbottom-20',{onclick:r.toggleDescription.toggle},[r.toggleDescription()?"menos ":"mais ",e("span.fa.fa-angle-down",{"class":r.toggleDescription()?"reversed":""})])]),o.isEmpty(r.reward().deliver_at)?"":[e(".fontcolor-secondary.fontsize-smallest.u-margintop-10",[e("span.fontweight-semibold","Entrega prevista: "),pt.momentify(r.reward().deliver_at,"MMM/YYYY")])],r.reward()&&r.shippingFee()?[e(".fontcolor-secondary.fontsize-smallest",[e("span.fontweight-semibold","Envio: "),t.t("shipping_options."+r.reward().shipping_options,{scope:"projects.contributions"})])]:""]),e.component(Yn,{mode:r.mode,vm:r.vm,faq:r.vm.faq(),projectUserId:r.projectUserId})])]))])}},Ja={controller:function(r){var n=bo,a=n.selectedReward,i=n.selectReward,s=n.rewards(),l=Ko.currentProject().mode,c=t.translations[t.currentLocale()].projects.faq[l],d=function(){var t=pt.monetaryToFloat(n.contributionValue);if(t<n.selectedReward().minimum_value)n.error("O valor de apoio para essa recompensa deve ser de no mínimo R$"+n.selectedReward().minimum_value);else{if(!pt.getUser())return pt.storeObject(storeKey,{value:t,reward:n.selectedReward()}),pt.navigateToDevise("/"+Ko.currentProject().permalink);n.error(""),n.contributionValue(t),e.route("/projects/"+Ko.currentproject().project_id+"/payment",{project_user_id:Ko.currentProject().user_id})}return!1},u=function(e){return e.id===a().id};return o.first(s).id!==n.noReward.id&&s.unshift(n.noReward),{rewards:s,project:Ko.currentProject,contributionValue:n.contributionValue,submitContribution:d,applyMask:n.applyMask,error:n.error,isSelected:u,selectedReward:a,selectReward:i,faq:c}},view:function(t,r){var n=t.project;return e("#project-rewards",[e(".w-section.page-header.u-text-center",[e(".w-container",[e('h1.fontsize-larger.fontweight-semibold.project-name[itemprop="name"]',pt.selfOrEmpty(n().name||n().project_name)),e('h2.fontsize-base.lineheight-looser[itemprop="author"]',["por ",n().user?n().user.name:n().owner_name?n().owner_name:""])])]),e(".w-section.header-cont-new",e(".w-container",e(".fontweight-semibold.lineheight-tight.text-success.fontsize-large.u-text-center-small-only","Escolha a recompensa e em seguida o valor do apoio"))),e(".section[id='new-contribution']",e(".w-container",e(".w-row",[e(".w-col.w-col-8",e(".w-form.back-reward-form",e("form.simple_form.new_contribution",{onsubmit:t.submitContribution},o.map(t.rewards,function(o,r){var n=t.isSelected(o),a=pt.applyMonetaryMask(o.minimum_value);return e("span.radio.w-radio.w-clearfix.back-reward-radio-reward",{"class":n?"selected":"",onclick:t.selectReward(o),key:r},e("label[for='contribution_reward_id_"+o.id+"']",[e("input.radio_buttons.optional.w-input.text-field.w-radio-input.back-reward-radio-button[id='contribution_reward_id_"+o.id+"'][name='contribution[reward_id]'][type='radio'][value='"+o.id+"']",{
checked:!!n}),e("label.w-form-label.fontsize-base.fontweight-semibold.u-marginbottom-10[for='contribution_reward_"+o.id+"']",o.id===-1?"Não quero recompensa":"R$ "+o.minimum_value+" ou mais"),n?e(".w-row.back-reward-money",[e(".w-col.w-col-8.w-col-small-8.w-col-tiny-8.w-sub-col-middle.w-clearfix",[e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3",e(".back-reward-input-reward.placeholder","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.user-reward-value.back-reward-input-reward[autocomplete='off'][type='tel']",{"class":t.error()?"error":"",min:a,placeholder:a,onkeyup:e.withAttr("value",t.applyMask),value:t.contributionValue()}))]),t.error().length>0?e(".text-error",[e("br"),e("span.fa.fa-exclamation-triangle")," "+t.error()]):""]),e(".submit-form.w-col.w-col-4.w-col-small-4.w-col-tiny-4",e("button.btn.btn-large",["Continuar  ",e("span.fa.fa-chevron-right")]))]):"",e(".back-reward-reward-description",[e(".fontsize-smaller.u-marginbottom-10",o.description),o.deliver_at?e(".fontsize-smallest.fontcolor-secondary","Estimativa de entrega: "+pt.momentify(o.deliver_at,"MMM/YYYY")):""])]))})))),e(".w-col.w-col-4",e.component(Yn,{mode:t.project().mode,faq:t.faq}))])))])}},Xa=o.partial(pt.i18nScope,"projects.publish"),Ka={controller:function(t){var n=a.filtersVM({project_id:"eq"}),i=e.prop([]),s=e.prop([]),l=e.prop([!0,!0,!0,!0,!0,!0,!0,!0,!0]),d=e.prop([!0,!0,!0,!0,!0,!0,!0,!0,!0]),u=function(e,t){var o=t();if(o[e]){o[e]=!1,t(o);var r=document.getElementsByClassName("w-hidden publish-rules");void 0!==r[0]&&r[0].classList.remove("w-hidden")}e===o.length-1&&document.getElementsByClassName("publish-btn-section")[0].classList.remove("w-hidden")},p=a.loaderWithToken;n.project_id(t.root.getAttribute("data-id"));var m=p(c.projectDetail.getRowOptions(n.parameters())),f=p(c.projectAccount.getRowOptions(n.parameters()));m.load().then(s),f.load().then(i);var w=function(){var e=o.first(s());return r().add(e.online_days,"days")};return{l:m,accountL:f,expiresAt:w,filtersVM:n,acceptTerm:l,flexAcceptTerm:d,showNextTerm:u,projectAccount:i,projectDetails:s}},view:function(r,n){var a=o.first(r.projectDetails()),i=o.first(r.projectAccount()),s=function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9")," ",e("span.fontweight-semibold","O que pode e não pode alterar na página do projeto a partir da publicação?")]),e("div",[e("span.fontweight-semibold","Você não poderá alterar"),": a identidade do responsável pelo projeto (Nome / CPF ou Razão Social / CNPJ), a Modalidade de financiamento, o título do projeto, a URL (link) do projeto, a categoria do projeto, a meta de arrecadação,  o prazo (caso já tenha definido), e as recompensas onde existirem apoios já efetuados.",e("br"),e("br"),e("span.fontweight-semibold","Você poderá alterar"),": o vídeo principal da campanha, o conteúdo da descrição, a imagem do projeto, a frase de efeito, as recompensas onde não existirem apoios efetuados, além de adicionar novas recompensas durante a arrecadação"])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9")," ",e("span.fontweight-semibold","Regras da modalidade FLEX")]),e("div","Você escolheu a campanha flexível. Dessa maneira, você irá receber todos os recursos arrecadados junto aos apoiadores ao final do prazo da campanha (descontando a taxa do Catarse) e deverá cumprir com a execução do projeto e com a entrega das recompensas oferecidas independente do quanto arrecadar.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9")," ",e("span.fontweight-semibold","Meta de arrecadação")]),e("div","A meta não poderá ser alterada após o publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9")," ",e("span.fontweight-semibold","Taxas")]),e("div",["Ao final da campanha, cobraremos 13% sobre o ",e("span.fontweight-semibold","valor total arrecadado.")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9")," ",e("span.fontweight-semibold","Prazo da campanha")]),e("div","Uma vez definido, o prazo de encerramento não poderá ser alterado. Caso você tenha iniciado a campanha com o prazo em aberto, deverá defini-lo durante a campanha, podendo deixar a campanha aberta por no máximo 12 meses.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9")," ",e("span.fontweight-semibold","Prazo para repasse")]),e("div",e.trust("Quando o prazo do seu projeto chegar ao fim, você deverá confirmar seus dados bancários. Você poderá alterar o Banco, Conta e a Agência <strong>somente se a nova conta cadastrada for de sua titularidade</strong>. Após a confirmação, o Catarse depositará na sua conta corrente em até 10 dias úteis. O valor depositado já estará considerando o desconto de 13% da taxa."))]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9")," ",e("span.fontweight-semibold","Responsabilidade do Catarse")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","O Catarse é responsável:")," pelo desenvolvimento tecnológico da plataforma, atendimento de dúvidas e problemas (tanto de apoiadores quanto de realizadores), por hospedar o projeto na plataforma e por garantir a segurança das transações financeiras. ",e("br"),e("br"),e("span.fontweight-semibold","O Catarse não é responsável:")," pelo financiamento, divulgação e execução, nem pela entrega de recompensas dos projetos inscritos."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9")," ",e("span.fontweight-semibold","Suas responsabilidades")]),e("div","É sua responsabilidade o recebimento do dinheiro da campanha e tudo aquilo que diz respeito a formatação do projeto, planejamento e divulgação da campanha de arrecadação, mobilização de apoiadores, execução do projeto, comunicação com apoiadores e produção e entrega de recompensas dentro do prazo estimado.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9")," ",e("span",{style:{"font-weight":" 600"}},"Retiradas de projetos no ar")]),e("div",[e("span.fontweight-semibold"),"O CATARSE reserva-se o direito de, a seu exclusivo critério e uma vez notificado a respeito, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem nossas ",e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos'][target='_blank']","Regras do Jogo")," e ",e("a.alt-link[href='http://www.catarse.me/terms-of-use'][target='_blank']","Termos de Uso"),"."])])]},l=function(t){return[e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","1/9")," ",e("span",{style:{"font-weight":" 600"}},"O que pode e não pode alterar na página do projeto a partir da publicação?")]),e("div",[e("span.fontweight-semibold","Você não poderá alterar"),": a identidade do responsável pelo projeto (Nome / CPF ou Razão Social / CNPJ), a Modalidade de financiamento, o título do projeto, a URL (link) do projeto, a categoria do projeto, a meta de arrecadação, prazo escolhido e as recompensas onde existirem apoios já efetuados. ",e("br"),e("br"),e("span.fontweight-semibold","Você poderá alterar"),": o vídeo principal da campanha, o conteúdo da descrição, a imagem do projeto, a frase de efeito, as recompensas onde não existirem apoios efetuados, além de adicionar novas recompensas durante a arrecadação"])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","2/9")," ",e("span.fontweight-semibold","Regras da modalidade Tudo-ou-nada")]),e("div",["Você escolheu a campanha tudo-ou-nada. Dessa maneira, você só irá receber os recursos arrecadados ",e("span.fontweight-semibold","caso atinja ou supere a meta de arrecadação"),". Caso contrário, todos seus apoiadores serão reembolsados. Você será responsável pela entrega das recompensas oferecidas se seu projeto alcançar a meta de arrecadação."])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","3/9")," ",e("span",{style:{"font-weight":" 600"}},"Meta de arrecadação")]),e("div","A meta não poderá ser alterada após o publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","4/9")," ",e("span",{style:{"font-weight":" 600"}},"Taxas")]),e("div",["Cobramos 13% sobre o ",e("span.fontweight-semibold","valor total arrecadado")," pelo seu projeto caso ele atinja ou supere a meta dentro do prazo da campanha. Se o projeto não atingir a meta, nenhuma taxa será cobrada.",e("span.fontweight-semibold")])]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","5/9")," ",e("span",{style:{"font-weight":" 600"}},"Prazo da campanha")]),e("div","Seu projeto estará em arrecadação no Catarse até o dia "+pt.momentify(r.expiresAt())+" às 23h59min59s. Este prazo não poderá ser alterado após a publicação do projeto.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","6/9")," ",e("span",{style:{"font-weight":" 600"}},"Regras do repasse e reembolso"),e("div",[e.trust('Quando o prazo do seu projeto chegar ao fim, você deverá confirmar seus dados bancários. Você poderá alterar o Banco, Conta e a Agência <strong>somente se a nova conta cadastrada for de sua titularidade</strong>. Após essa confirmação, o Catarse depositará o valor arrecadado, já descontada a taxa, na sua conta em 10 dias úteis. Caso o projeto não atinja 100% da meta dentro do prazo, o Catarse irá reembolsar os apoiadores. <a href="http://suporte.catarse.me/hc/pt-br/articles/202365507" target="blank">Saiba mais sobre o processo de reembolso</a>')])]),e("div","")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","7/9")," ",e("span",{style:{"font-weight":" 600"}},"Responsabilidade do Catarse")]),[e("div",[e("span.fontweight-semibold"),e("span.fontweight-semibold","O Catarse é responsável:")," pelo desenvolvimento tecnológico da plataforma, atendimento de dúvidas e problemas (tanto de apoiadores quanto de realizadores), por hospedar o projeto na plataforma e por garantir a segurança das transações financeiras. ",e("br"),e("br"),e("span.fontweight-semibold","O Catarse não é responsável:")," pelo financiamento, divulgação e execução, nem pela entrega de recompensas dos projetos inscritos."])]]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","8/9")," ",e("span",{style:{"font-weight":" 600"}},"Suas responsabilidades")]),e("div","É sua responsabilidade o recebimento do dinheiro da campanha e tudo aquilo que diz respeito a formatação do projeto, planejamento e divulgação da campanha de arrecadação, mobilização de apoiadores, execução do projeto, comunicação com apoiadores e produção e entrega de recompensas dentro do prazo estimado.")]),e(".w-col.w-col-11",[e("div",[e("span.fontsize-smallest.fontcolor-secondary","9/9")," ",e("span",{style:{"font-weight":" 600"}},"Retiradas de projetos no ar")]),e("div",[e("span.fontweight-semibold"),"O CATARSE reserva-se o direito de, a seu exclusivo critério e uma vez notificado a respeito, cancelar projetos e encerrar as contas de CRIADORES DE PROJETOS que violem nossas ",e("a.alt-link[href='http://suporte.catarse.me/hc/pt-br/articles/202387638-Diretrizes-para-cria%C3%A7%C3%A3o-de-projetos'][target='_blank']","Regras do Jogo")," e ",e("a.alt-link[href='http://www.catarse.me/terms-of-use'][target='_blank']","Termos de Uso"),"."])])]};return[r.l()||r.accountL()?pt.loader():[a.is_owner_or_admin?e.component(ir,{project:e.prop(a),hidePublish:!0}):"",e(".w-section.section-product."+a.mode),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[e(".u-text-center",[e("img.u-marginbottom-20[src='/assets/catarse_bootstrap/launch-icon.png'][width='94']"),e(".fontsize-large.fontweight-semibold.u-marginbottom-20","Pronto para lançar sua campanha?"),e(".fontsize-base.u-marginbottom-30","Preparamos uma lista com informações importantes para você checar antes de colocar seu projeto no ar!")])]),e(".w-col.w-col-3")])])]),e(".divider"),e(".w-section.section-one-column.bg-gray.section.before-footer",[e(".w-container",[e(".card.medium.u-marginbottom-60.card-terciary",[e(".w-row",[e(".w-col.w-col-6.w-clearfix",[e("img.card-project-thumb.u-right[src="+a.large_image+"]")]),e(".w-col.w-col-6",[e(".u-marginbottom-30.fontsize-base",[e("div",[e("span.fontweight-semibold","Título: "),a.name]),e("div",[e("span.fontweight-semibold","Link: "),"www.catarse.me/"+a.permalink]),e("div",[e("span.fontweight-semibold","Modalidade de financiamento: "),t.t(a.mode,Xa())]),e("div",[e("span.fontweight-semibold","Meta de arrecadação: "),"R$ "+pt.formatNumber(a.goal,2,3)]),null!==a.online_days?e("div",[e("span.fontweight-semibold","Prazo: "+a.online_days+" "+(a.online_days>1?"dias":"dia"))]):"",e("div",[e("span.fontweight-semibold","Responsável: "),i.owner_name]),e("div",[e("span.fontweight-semibold","CPF/CNPJ: "),i.owner_document])])])]),e(".u-text-center",[e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",[e(".divider.u-marginbottom-10"),e(".fontsize-small.fontcolor-secondary","Os dados acima não podem ser alterados após o projeto entrar no ar. Se você precisa fazer mudanças, navegue na barra lateral e volte aqui quando estiver tudo pronto!")]),e(".w-col.w-col-1")])])]),e(".card.medium.u-radius.u-marginbottom-60",[e(".u-text-center.u-marginbottom-60",[e(".fontsize-large.fontweight-semibold","Relembre nossas regras"),e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-small",["Antes de publicar, clique nos círculos abaixo e confirme que você está ciente de como funciona o Catarse. Qualquer dúvida, ",e('a.alt-link[href="http://suporte.catarse.me/hc/pt-br/requests/new"][target="_blank"]',"entre em contato"),"!"])]),e(".w-col.w-col-2")])]),o.map("flex"===a.mode?s(a):l(a),function(t,o){return e(".u-marginbottom-30.fontsize-base"+(0===o?"":".w-hidden.publish-rules"),[e(".w-row[id='rule-"+o+"']",[e(".w-col.w-col-1.u-text-center",[e("div",[e(("flex"===a.mode?r.flexAcceptTerm():r.acceptTerm())[o]?"a.w-inline-block.checkbox-big[href='#rule-"+(o+1)+"']":"a.w-inline-block.checkbox-big.checkbox--selected.fa.fa-check.fa-lg[href='#rule-"+(o+1)+"']",{onclick:function(){return r.showNextTerm(o,"flex"===a.mode?r.flexAcceptTerm:r.acceptTerm)}})])]),t])])})]),e(".w-row.publish-btn-section.w-hidden",[e(".w-col.w-col-4"),e(".w-col.w-col-4",[e("a.btn.btn-large.u-marginbottom-20[href=/"+("flex"===a.mode?"flexible_projects":"projects")+"/"+a.project_id+"/push_to_online]","Publicar agora!"),e(".u-text-center.fontsize-smaller",["Ao publicar o seu projeto, você está aceitando os ",e("a.alt-link[href='/terms-of-use'][target='_blank']","Termos de Uso")," e ",e("a.alt-link[href='/privacy-policy'][target='_blank']","Politica de Privacidade")])]),e(".w-col.w-col-4")])])]),"    "]]}},Ga=function(e){var t=e.translations[e.currentLocale()].pages.start,r=t.testimonials,n=t.categoryProjects,a=t.panes,i=t.qa;return{testimonials:o.map(r,function(e){return{thumbUrl:e.thumb,content:e.content,name:e.name,totals:e.totals}}),panes:o.map(a,function(e){return{label:e.label,src:e.src}}),questions:{col_1:o.map(i.col_1,function(e){return{question:e.question,answer:e.answer}}),col_2:o.map(i.col_2,function(e){return{question:e.question,answer:e.answer}})},categoryProjects:o.map(n,function(e){return{categoryId:e.category_id,sampleProjects:[e.sample_project_ids.primary,e.sample_project_ids.secondary]}})}},Qa={controller:function(e){var t=void 0,o=pt.toggleProp(!1,!0),r=function(e,t){if(!t){var o=document.createElement("script"),r=document.getElementsByTagName("script")[0];o.src="https://www.youtube.com/iframe_api",r.parentNode.insertBefore(o,r),window.onYouTubeIframeAPIReady=a}},n=function(){return _.isUndefined(t)||t.pauseVideo(),o.toggle(),!1},a=function(){t=new YT.Player("ytvideo",{height:"528",width:"940",videoId:e.src,playerVars:{showInfo:0,modestBranding:0},events:{onStateChange:function(e){return 0===e.data&&n()}}})};return{showLightbox:o,setYoutube:r,closeVideo:n}},view:function(t,o){return e("#youtube-lightbox",[e("a#youtube-play.w-lightbox.w-inline-block.fa.fa-play-circle.fontcolor-negative.fa-5x[href='javascript:void(0);']",{onclick:function(){t.showLightbox.toggle(),o.onclick&&o.onclick()}}),e('#lightbox.w-lightbox-backdrop[style="display:'+(t.showLightbox()?"block":"none")+'"]',[e(".w-lightbox-container",[e(".w-lightbox-content",[e(".w-lightbox-view",[e(".w-lightbox-frame",[e("figure.w-lightbox-figure",[e("img.w-lightbox-img.w-lightbox-image[src='data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns=%22http://www.w3.org/2000/svg%22%20width=%22940%22%20height=%22528%22/%3E']"),e("#ytvideo.embedly-embed.w-lightbox-embed",{config:t.setYoutube})])])]),e(".w-lightbox-spinner.w-lightbox-hide"),e(".w-lightbox-control.w-lightbox-left.w-lightbox-inactive"),e(".w-lightbox-control.w-lightbox-right.w-lightbox-inactive"),e("#youtube-close.w-lightbox-control.w-lightbox-close",{onclick:t.closeVideo})]),e(".w-lightbox-strip")])])])}},Za=o.partial(pt.i18nScope,"pages.start"),ei={controller:function(){pt.analytics.windowScroll({cat:"project_start",act:"start_page_scroll"});var r=e.prop([]),n=e.prop([]),i=e.prop(0),s=e.prop([]),l=e.prop([]),d=e.prop(-1),u=Ga(t),p=a.filtersVM,m=u.panes,f=p({category_id:"eq"}),w=p({project_id:"eq"}),b=p({id:"eq"}),g=a.loader,h=g(c.statistic.getRowOptions()),_=function(){return c.category.getPage(p({}).order({name:"asc"}).parameters()).then(n)},v=function(e){return function(){i(e)}},y=function(){return g(c.categoryTotals.getRowOptions(f.parameters()))},j=function(){return g(c.projectDetail.getRowOptions(w.parameters()))},k=function(){return g(c.userDetail.getRowOptions(b.parameters()))},x=function(e){var r=t.translations[t.currentLocale()].projects.index.explore_categories;return o.isUndefined(r[e.id])?null:r[e.id].link+"?ref=ctrse_start"},z=function(e){s(e);var t=o.findWhere(u.categoryProjects,{categoryId:o.first(e).category_id});l([]),o.isUndefined(t)||o.map(t.sampleProjects,function(e,t){o.isUndefined(e)||(w.project_id(e),j().load().then(function(e){return S(e,t)}))})},C=function(t){return function(){var o=x(t);return o?void(window.location=o):(d(t.id),f.category_id(t.id),s([t]),e.redraw(),void y().load().then(z))}},E=function(e,t){l()[t]=o.extend({},l()[t],{userThumb:o.first(e).profile_img_thumbnail})},S=function(e,t){l()[t]=o.first(e),b.id(o.first(e).user.id),k().load().then(function(e){return E(e,t)})},P=e.prop("-1"),M=e.prop(""),A=e.prop(!1),T=e.prop(!1),D=function(){return T(P()==-1),A(""===M().trim()),!T()&&!A()};return h.load().then(r),_(),{stats:r,categories:n,paneImages:m,selectCategory:C,selectedCategory:s,selectedCategoryIdx:d,selectPane:v,selectedPane:i,featuredProjects:l,linkToExternal:x,testimonials:u.testimonials,questions:u.questions,projectCategory:P,projectName:M,projectNameError:A,projectCategoryError:T,validateProjectForm:D}},view:function(r,n){var a=o.first(r.stats()),i=function(){return o.map(r.testimonials,function(t){var o=e(".card.u-radius.card-big.card-terciary",[e(".u-text-center.u-marginbottom-20",[e('img.thumb-testimonial.u-round.u-marginbottom-20[src="'+t.thumbUrl+'"]')]),e("p.fontsize-large.u-marginbottom-30",'"'+t.content+'"'),e(".u-text-center",[e(".fontsize-large.fontweight-semibold",t.name),e(".fontsize-base",t.totals)])]);return{content:o}})};return e("#start",{config:pt.setPageTitle(t.t("header_html",Za()))},[e(".w-section.hero-full.hero-start",[e(".w-container.u-text-center",[e(".fontsize-megajumbo.fontweight-semibold.u-marginbottom-40",t.t("slogan",Za())),e(".w-row.u-marginbottom-40",[e(".w-col.w-col-4.w-col-push-4",[e('a.btn.btn-large.u-marginbottom-10[href="#start-form"]',{config:pt.scrollTo(),onclick:pt.analytics.event({cat:"project_start",act:"start_btnstart_click"})},t.t("submit",Za()))])]),e(".w-row",o.isEmpty(a)?"":[e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",pt.formatNumber(a.total_contributors,0,3)),e("p.fontsize-small.start-stats",t.t("header.people",Za()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",a.total_contributed.toString().slice(0,2)+" milhões"),e("p.fontsize-small.start-stats",t.t("header.money",Za()))]),e(".w-col.w-col-4",[e(".fontsize-largest.lineheight-loose",pt.formatNumber(a.total_projects_success,0,3)),e("p.fontsize-small.start-stats",t.t("header.success",Za()))])])])]),e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1.u-text-center",[e(".fontsize-larger.u-marginbottom-10.fontweight-semibold",t.t("page-title",Za())),e(".fontsize-small",t.t("page-subtitle",Za()))])]),e(".w-clearfix.how-row",[e(".w-hidden-small.w-hidden-tiny.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Za())),e(".fontsize-base",t.t("banner.2",Za()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Za())),e(".fontsize-base",t.t("banner.4",Za()))])]),e(".how-col-02"),e(".how-col-03",[e(".fontweight-semibold.fontsize-large",t.t("banner.5",Za())),e(".fontsize-base",t.t("banner.6",Za())),e(".fontweight-semibold.fontsize-large.u-margintop-30",t.t("banner.7",Za())),e(".fontsize-base",t.t("banner.8",Za()))]),e(".w-hidden-main.w-hidden-medium.how-col-01",[e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.1",Za())),e(".fontsize-base",t.t("banner.2",Za()))]),e(".info-howworks-backers",[e(".fontweight-semibold.fontsize-large",t.t("banner.3",Za())),e(".fontsize-base",t.t("banner.4",Za()))])])])])]),e(".w-section.divider"),e(".w-section.section-large",[e(".w-container.u-text-center.u-marginbottom-60",[e("div",[e("span.fontsize-largest.fontweight-semibold",t.t("features.title",Za()))]),e(".w-hidden-small.w-hidden-tiny.fontsize-large.u-marginbottom-20",t.t("features.subtitle",Za())),e(".w-hidden-main.w-hidden-medium.u-margintop-30",[e(".fontsize-large.u-marginbottom-30",t.t("features.feature_1",Za())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_2",Za())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_3",Za())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_4",Za())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_5",Za())),e(".fontsize-large.u-marginbottom-30",t.t("features.feature_6",Za()))])]),e(".w-container",[e(".w-tabs.w-hidden-small.w-hidden-tiny",[e(".w-tab-menu.w-col.w-col-4",o.map(r.paneImages,function(t,o){return e("btn.w-tab-link.w-inline-block.tab-list-item"+(o===r.selectedPane()?".selected":""),{onclick:pt.analytics.event({cat:"project_start",act:"start_solution_click",lbl:t.label},r.selectPane(o))},t.label)})),e(".w-tab-content.w-col.w-col-8",o.map(r.paneImages,function(t,o){return e(".w-tab-pane",[e('img[src="'+t.src+'"].pane-image'+(o===r.selectedPane()?".selected":""))])}))])])]),e(".w-section.section-large.card-terciary",e(".w-container",[e(".u-text-center.u-marginbottom-40",[e("div",e("span.fontsize-largest.fontweight-semibold",t.t("mode.title",Za()))),e(".w-row",[e(".w-col.w-col-1"),e(".w-col.w-col-10",e(".fontsize-large.u-marginbottom-20",t.t("mode.subtitle",Za()))),e(".w-col.w-col-1")])]),e("div",e(".flex-row.u-marginbottom-40",[e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/5632f334ec8a367d341b4bba_badge-aon.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",[t.t("mode.aon.info",Za()),e.trust("&nbsp;")]),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.aon.info_2",Za()))]),e(".flex-column.card.u-radius.u-marginbottom-30",[e(".u-text-center.u-marginbottom-30",e("img[src='https://daks2k3a4ib2z.cloudfront.net/54b440b85608e3f4389db387/5632ebacd092957f34eaea9c_badge-flex.png']")),e(".fontsize-large.flex-column.u-marginbottom-20",t.t("mode.flex.info",Za())),e(".fontsize-base.flex-column.fontcolor-secondary",t.t("mode.flex.info_2",Za()))])])),e(".u-text-center.u-marginbottom-30",[e(".fontsize-large.fontweight-semibold",t.t("mode.tax_info",Za())),e(".fontsize-smallest.fontcolor-secondary",[t.t("mode.failed_info",Za()),e.trust(t.t("mode.more_link",Za()))])])])),e(".w-section.section-large.bg-blue-one",[e(".w-container.u-text-center",[e(".fontsize-larger.lineheight-tight.fontcolor-negative.u-marginbottom-20",[t.t("video.title",Za()),e("br"),t.t("video.subtitle",Za())]),e.component(Qa,{src:t.t("video.src",Za()),onclick:pt.analytics.event({cat:"project_start",act:"start_video_play"})})])]),e(".w-hidden-small.w-hidden-tiny.section-categories",[e(".w-container",[e(".u-text-center",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".fontsize-large.u-marginbottom-40.fontcolor-negative",t.t("categories.title",Za()))])])]),e(".w-tabs",[e(".w-tab-menu.u-text-center",o.map(r.categories(),function(t){return e("a.w-tab-link.w-inline-block.btn-category.small.btn-inline"+(r.selectedCategoryIdx()===t.id?".w--current":""),{onclick:pt.analytics.event({cat:"project_start",act:"start_category_click",lbl:t.name},r.selectCategory(t))},[e("div",t.name)])})),e(".w-tab-content.u-margintop-40",[e(".w-tab-pane.w--tab-active",[e(".w-row",r.selectedCategoryIdx()!==-1?o.map(r.selectedCategory(),function(n){return[e(".w-col.w-col-5",[e(".fontsize-jumbo.u-marginbottom-20",n.name),e('a.w-button.btn.btn-medium.btn-inline.btn-dark[href="#start-form"]',{config:pt.scrollTo()},t.t("submit",Za()))]),e(".w-col.w-col-7",[e(".fontsize-megajumbo.fontcolor-negative","R$ "+(n.total_successful_value?pt.formatNumber(n.total_successful_value,2,3):"...")),e(".fontsize-large.u-marginbottom-20","Doados para projetos"),e(".fontsize-megajumbo.fontcolor-negative",n.successful_projects?n.successful_projects:"..."),e(".fontsize-large.u-marginbottom-30","Projetos financiados"),o.isEmpty(r.featuredProjects())?"":o.map(r.featuredProjects(),function(r){return o.isUndefined(r)?e(".fontsize-base",t.t("categories.loading_featured",Za())):e(".w-row.u-marginbottom-10",[e(".w-col.w-col-1",[e('img.user-avatar[src="'+pt.useAvatarOrDefault(r.userThumb)+'"]')]),e(".w-col.w-col-11",[e(".fontsize-base.fontweight-semibold",r.user.name),e(".fontsize-smallest",[t.t("categories.pledged",Za({pledged:pt.formatNumber(r.pledged),contributors:r.total_contributors})),e('a.link-hidden[href="/'+r.permalink+'"]',r.name)])])])})])]}):"")])])])])]),e.component(an,{slides:i(),title:t.t("testimonials_title",Za()),slideClass:"slide-testimonials-content",wrapperClass:"slide-testimonials",onchange:pt.analytics.event({cat:"project_start",act:"start_testimonials_change"})}),e(".w-section.divider.u-margintop-30"),e(".w-container",[e(".fontsize-larger.u-text-center.u-marginbottom-60.u-margintop-40",t.t("qa_title",Za())),e(".w-row.u-marginbottom-60",[e(".w-col.w-col-6",o.map(r.questions.col_1,function(t){return e.component(tr,{question:t.question,answer:t.answer,onclick:pt.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})})),e(".w-col.w-col-6",o.map(r.questions.col_2,function(t){return e.component(tr,{question:t.question,answer:t.answer,onclick:pt.analytics.event({cat:"project_start",act:"start_qa_click",lbl:t.question})})}))])]),e("#start-form.w-section.section-large.u-text-center.bg-purple.before-footer",[e(".w-container",[e(".fontsize-jumbo.fontcolor-negative.u-marginbottom-60","Crie o seu rascunho gratuitamente!"),e('form[action="/projects/fallback_create"][method="GET"].w-row.w-form',{onsubmit:function(e){return pt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_submit"})(e),r.validateProjectForm()}},[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-larger.fontcolor-negative.u-marginbottom-10",t.t("form.title",Za())),e('input[name="utf8"][type="hidden"][value="✓"]'),e('input[name="authenticity_token"][type="hidden"][value="'+pt.authenticityToken()+'"]'),e('input.w-input.text-field.medium.u-marginbottom-30[type="text"]',{name:"project[name]","class":r.projectNameError()?"error":"",onfocus:function(){return r.projectNameError(!1)},onchange:function(t){pt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"name"})(t),e.withAttr("value",r.projectName)(t)}}),e(".fontsize-larger.fontcolor-negative.u-marginbottom-10","na categoria"),e("select.w-select.text-field.medium.u-marginbottom-40",{name:"project[category_id]","class":r.projectCategoryError()?"error":"",onfocus:function(){return r.projectCategoryError(!1)},onchange:function(t){pt.analytics.oneTimeEvent({cat:"project_create",act:"create_form_change",lbl:"category"})(t),e.withAttr("value",r.projectCategory)(t)}},[e('option[value="-1"]',t.t("form.select_default",Za())),o.map(r.categories(),function(t){return e('option[value="'+t.id+'"]',{selected:r.projectCategory()===t.id},t.name)})])]),e(".w-col.w-col-2"),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-4.w-col-push-4.u-margintop-40",[e('input[type="submit"][value="'+t.t("form.submit",Za())+'"].w-button.btn.btn-large')])]),e(".w-row.u-marginbottom-80",r.projectNameError()||r.projectCategoryError()?e.component($n,{message:"Por favor, verifique novamente os campos acima!"}):"")])])])])}},ti={controller:function(){var t={collection:e.prop([])};return c.teamTotal.getRow().then(function(e){t.collection(e)}),{vm:t}},view:function(t,o){return e("#team-total-static.w-section.section-one-column.section.u-margintop-40.u-text-center.u-marginbottom-20",[t.vm.collection().map(function(t){return e(".w-container",[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".fontsize-base.u-marginbottom-30","Hoje somos "+t.member_count+" pessoas espalhadas por "+t.total_cities+" cidades em "+t.countries.length+" países ("+t.countries.toString()+")! O Catarse é independente, sem investidores, de código aberto e construído com amor. Nossa paixão é construir um ambiente onde cada vez mais projetos possam ganhar vida."),e(".fontsize-larger.lineheight-tight.text-success","Nossa equipe, junta, já apoiou R$"+pt.formatNumber(t.total_amount)+" para "+t.total_contributed_projects+" projetos!")]),e(".w-col.w-col-2")])])})])}},oi={controller:function(){var t={collection:e.prop([])},r=function(e,t){return o.map(o.range(Math.ceil(e.length/t)),function(o){return e.slice(o*t,(o+1)*t)})};return c.teamMember.getPage().then(function(e){t.collection(r(e,4))}),{vm:t}},view:function(t){return e("#team-members-static.w-section.section",[e(".w-container",[o.map(t.vm.collection(),function(t){return e(".w-row.u-text-center",[o.map(t,function(t){return e(".team-member.w-col.w-col-3.w-col-small-3.w-col-tiny-6.u-marginbottom-40",[e('a.alt-link[href="/users/'+t.id+'"]',[e('img.thumb.big.u-round.u-marginbottom-10[src="'+t.img+'"]'),e(".fontweight-semibold.fontsize-base",t.name)]),e(".fontsize-smallest.fontcolor-secondary","Apoiou "+t.total_contributed_projects+" projetos")])})])})])])}},ri={view:function(){return e("#static-team-app",[e.component(ti),e.component(oi)])}},ni=o.partial(pt.i18nScope,"users.balance"),ai={controller:function(e){var t=(postgrest.filtersVM({user_id:"eq"}),e.balance),o=c.balanceTransfer.postOptions({user_id:t.user_id}),r=postgrest.loaderWithToken(o),n=pt.toggleProp(!1,!0),a=function(){r.load().then(function(t){e.balanceManager.load(),e.balanceTransactionManager.load(),n.toggle()})};return e.bankAccountManager.load(),{requestLoader:r,requestFund:a,bankAccounts:e.bankAccountManager.collection,displayDone:n,loadBankA:e.bankAccountManager.loader}},view:function(r,n){var a=n.balance;return r.loadBankA()?pt.loader():e("div",o.map(r.bankAccounts(),function(o){return[e(".modal-dialog-header",[e(".fontsize-large.u-text-center",t.t("withdraw",ni()))]),r.displayDone()?e(".modal-dialog-content.u-text-center",[e(".fa.fa-check-circle.fa-5x.text-success.u-marginbottom-40"),e("p.fontsize-large",t.t("sucess_message",ni()))]):e(".modal-dialog-content",[e(".fontsize-base.u-marginbottom-20",[e("span.fontweight-semibold","Valor:"),e.trust("&nbsp;"),e("span.text-success","R$ "+pt.formatNumber(a.amount,2,3))]),e(".fontsize-base.u-marginbottom-10",[e("span",{style:{"font-weight":" 600"}},t.t("bank.account",ni()))]),e(".fontsize-small.u-marginbottom-10",[e("div",[e("span.fontcolor-secondary",t.t("bank.name",ni())),e.trust("&nbsp;"),o.owner_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.cpf_cnpj",ni())),e.trust("&nbsp;"),o.owner_document]),e("div",[e("span.fontcolor-secondary",t.t("bank.bank_name",ni())),e.trust("&nbsp;"),o.bank_name]),e("div",[e("span.fontcolor-secondary",t.t("bank.agency",ni())),e.trust("&nbsp;"),o.agency+"-"+o.agency_digit]),e("div",[e("span.fontcolor-secondary",t.t("bank.account",ni())),e.trust("&nbsp;"),o.account+"-"+o.account_digit])])]),r.displayDone()?"":e(".modal-dialog-nav-bottom",[e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-6",[r.requestLoader()?pt.loader():e('a.btn.btn-large.btn-request-fund[href="js:void(0);"]',{
onclick:r.requestFund},"Solicitar saque")]),e(".w-col.w-col-3")])])]}))}},ii=o.partial(pt.i18nScope,"users.balance"),si={controller:function(e){return e.balanceManager.load(),{userBalances:e.balanceManager.collection,displayModal:pt.toggleProp(!1,!0)}},view:function(t,r){var n=o.first(t.userBalances()),a=[ai,o.extend({},{balance:n},r)];return e(".w-section.section.user-balance-section",[t.displayModal()?e.component(sr,{displayModal:t.displayModal,content:a}):"",e(".w-container",[e(".w-row",[e(".w-col.w-col-8.u-text-center-small-only.u-marginbottom-20",[e(".fontsize-larger",[I18n.t("totals",ii()),e("span.text-success","R$ "+pt.formatNumber(n.amount,2,3))])]),e(".w-col.w-col-4",[e('a[class="r-fund-btn w-button btn btn-medium u-marginbottom-10 '+(n.amount<=0?"btn-inactive":"")+'"][href="js:void(0);"]',{onclick:n.amount>0?t.displayModal.toggle:"js:void(0);"},I18n.t("withdraw_cta",ii()))])])])])}},li=_.partial(pt.i18nScope,"users.balance"),ci={controller:function(e){var t=pt.toggleProp(!1,!0);return 0==e.index&&t.toggle(),{expanded:t}},view:function(t,o){var r=o.item,n=pt.momentFromString(r.created_at,"YYYY-MM-DD");return e("div[class='balance-card "+(t.expanded()?"card-detailed-open":"")+"']",e(".w-clearfix.card.card-clickable",[e(".w-row",[e(".w-col.w-col-2.w-col-tiny-2",[e(".fontsize-small.lineheight-tightest",n.format("D MMM")),e(".fontsize-smallest.fontcolor-terciary",n.format("YYYY"))]),e(".w-col.w-col-10.w-col-tiny-10",[e(".w-row",[e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("debit",li())),e.trust("&nbsp;"),e("span.fontsize-base.text-error","R$ "+pt.formatNumber(Math.abs(r.debit),2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("credit",li())),e.trust("&nbsp;"),e("span.fontsize-base.text-success","R$ "+pt.formatNumber(r.credit,2,3))])]),e(".w-col.w-col-4",[e("div",[e("span.fontsize-smaller.fontcolor-secondary",I18n.t("totals",li())),e.trust("&nbsp;"),e("span.fontsize-base","R$ "+pt.formatNumber(r.total_amount,2,3))])])])])]),e("a.w-inline-block.arrow-admin."+(t.expanded()?"arrow-admin-opened":"")+'.fa.fa-chevron-down.fontcolor-secondary[href="js:(void(0));"]',{onclick:t.expanded.toggle})]),t.expanded()?e(".card",_.map(r.source,function(t){var o=t.amount>=0;return e("div",[e(".w-row.fontsize-small.u-marginbottom-10",[e(".w-col.w-col-2",[e(".text-"+(o?"success":"error"),(o?"+":"-")+" R$ "+pt.formatNumber(Math.abs(t.amount),2,3))]),e(".w-col.w-col-10",[e("div",t.event_name+" "+t.origin_object.name)])]),e(".divider.u-marginbottom-10")])})):"")}},di={controller:function(e){return e.balanceTransactionManager.load(),{list:e.balanceTransactionManager.list}},view:function(t,r){var n=t.list;return e(".w-section.section.card-terciary.before-footer.balance-transactions-area",[e(".w-container",o.map(n.collection(),function(t,o){return e.component(ci,{item:t,index:o})})),e(".container",[e(".w-row.u-margintop-40",[e(".w-col.w-col-2.w-col-push-5",[n.isLoading()?pt.loader():n.isLastPage()?"":e("button#load-more.btn.btn-medium.btn-terciary",{onclick:n.nextPage},"Carregar mais")])])])])}},ui={controller:function(t){var o=a.filtersVM({user_id:"eq"});o.user_id(t.user_id);var r=function(){var r=e.prop([{amount:0,user_id:t.user_id}]),n=function(){c.balance.getRowWithToken(o.parameters()).then(r)};return{collection:r,load:n}}(),n=function(){var e=a.paginationVM(c.balanceTransaction,"created_at.desc"),t=function(){e.firstPage(o.parameters())};return{load:t,list:e}}(),i=function(){var t=e.prop([]),r=function(){return a.loaderWithToken(c.bankAccount.getRowOptions(o.parameters()))}(),n=function(){r.load().then(t)};return{collection:t,load:n,loader:r}}();return{bankAccountManager:i,balanceManager:r,balanceTransactionManager:n}},view:function(t,r){var n=o.extend({},r,t);return e("#balance-area",[e.component(si,n),e(".divider"),e.component(di,n),e(".u-marginbottom-40"),e(".w-section.section.card-terciary.before-footer")])}},pi={view:function(t,o){return e("span#menu-search",[e(".w-form.w-hidden-small.w-hidden-tiny.header-search[id='discover-form-wrapper']",[e("form.discover-form[accept-charset='UTF-8'][action='/pt/explore?ref=ctrse_header'][id='search-form'][method='get']",[e("div",{style:{display:"none"}},e("input[name='utf8'][type='hidden'][value='✓']")),e("input.w-input.text-field.prefix.search-input[autocomplete='off'][id='pg_search'][name='pg_search'][placeholder='Busque projetos'][type='text']")]),e(".search-pre-result.w-hidden[data-searchpath='/pt/auto_complete_projects']",[e(".result",e(".u-text-center",e("img[alt='Loader'][src='/assets/catarse_bootstrap/loader.gif']"))),e("a.btn.btn-small.btn-terciary.see-more-projects[href='javascript:void(0);']"," ver todos")])]),e("a.w-inline-block.w-hidden-small.w-hidden-tiny.btn.btn-dark.btn-attached.postfix[href='#'][id='pg_search_submit']",e("img.header-lupa[alt='Lupa'][data-pin-nopin='true'][src='/assets/catarse_bootstrap/lupa.png']"))])}},mi={controller:function(t){var r=e.prop(),n=e.prop([]),a=e.prop({}),i=t.user.user_id,s=function(){var e=Ro.displayName(a());return e&&!o.isEmpty(e)?o.first(e.split(" ")):""};return Ro.fetchUser(i,!0,a),{contributedProjects:r,latestProjects:n,userDetails:a,userName:s,toggleMenu:pt.toggleProp(!1,!0)}},view:function(t,o){var r=t.userDetails();return e(".w-dropdown.user-profile",[e("a.w-dropdown-toggle.dropdown-toggle[href='javascript:void()'][id='user-menu']",{onclick:t.toggleMenu.toggle},[e(".user-name-menu",t.userName()),e("img.user-avatar[alt='Thumbnail - "+r.name+"'][height='40'][src='"+pt.useAvatarOrDefault(r.profile_img_thumbnail)+"'][width='40']")]),t.toggleMenu()?e("nav.w-dropdown-list.dropdown-list.user-menu.w--open[id='user-menu-dropdown']",{style:"display:block;"},[e(".w-row",[e(".w-col.w-col-12",[e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Meu histórico"),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#contributions']","Histórico de apoio")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#projects']","Projetos criados")),e("li.w-hidden-main.w-hidden-medium.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#projects']","Projetos criados"))]),e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Configurações"),e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/connect-facebook/']","Encontre amigos"),e.trust("&nbsp;"),e("span.badge.badge-success","Novidade")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#about_me']","Perfil público")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#notifications']","Notificações")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/users/"+r.id+"/edit#settings']","Dados cadastrais"))]),e(".divider.u-marginbottom-20"),o.user.is_admin_role?e(".fontweight-semibold.fontsize-smaller.u-marginbottom-10","Admin"):"",o.user.is_admin_role?e("ul.w-list-unstyled.u-marginbottom-20",[e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin#/users']","Usuários")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/new-admin']","Apoios")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/admin/financials']","Rel. Financeiros")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/admin/projects']","Admin projetos")),e("li.lineheight-looser",e("a.alt-link.fontsize-smaller[href='/pt/dbhero']","Dataclips"))]):"",e(".fontsize-mini","Seu e-mail de cadastro é: "),e(".fontsize-smallest.u-marginbottom-20",[e("span.fontweight-semibold",r.email+" "),e("a.alt-link[href='/pt/users/"+r.id+"/edit#about_me']","alterar e-mail")]),e(".divider.u-marginbottom-20"),e("a.alt-link[href='/pt/logout']","Sair")])])]):""])}},fi={controller:function(t){var o=pt.getUser(),r=function(){return(t.menuTransparency?"overlayer":"")+" "+(t.withAlert||t.withFixedAlert?"with-global-alert":"")},n=function(){return t.absoluteHome?{href:pt.rootUrl()}:{config:e.route}};return{user:o,menuCss:r,homeAttrs:n}},view:function(t,o){return e("header.main-header",{"class":t.menuCss()},[e(".w-row",[e(".w-clearfix.w-col.w-col-8.w-col-small-8.w-col-tiny-8",[e("a.header-logo.w-inline-block[href='/?ref=ctrse_header'][title='Catarse']",t.homeAttrs(),e("img[alt='Logo big'][src='/assets/catarse_bootstrap/logo_big.png']")),o.menuShort?"":e("div#menu-components",[e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='/start?ref=ctrse_header']",{config:e.route},"Comece seu projeto"),e("a.w-hidden-small.w-hidden-tiny.header-link.w-nav-link[href='/explore?ref=ctrse_header']",{config:e.route},"Explore"),e.component(pi)])]),e(".text-align-right.w-col.w-col-4.w-col-small-4.w-col-tiny-4",[t.user?e.component(mi,{user:t.user}):e("a.w-nav-link.header-link.w-nav-link.btn-edit.u-right[href='/pt/login?ref=ctrse_header']","Login")])]),o.menuShort?"":e(".header-controls-mobile.w-hidden-main.w-hidden-medium",[e("a.header-link.w-nav-link[href='/pt/start?ref=ctrse_header']",{onclick:function(){return e.route("/start")}},"Comece seu projeto"),e("a.header-link.w-nav-link[href='/pt/explore?ref=ctrse_header']",{onclick:function(){return e.route("/explore")}},"Explore")])])}},wi={view:function(){return e("footer.main-footer.main-footer-neg",[e("section.w-container",e(".w-row",[e(".w-col.w-col-9",e(".w-row",[e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.w-hidden-tiny",[e(".footer-full-signature-text.fontsize-small","Bem-vindo"),e("a.link-footer[href='http://ano.catarse.me/2016?ref=ctrse_footer']",["Retrospectiva 2016",e.trust("&nbsp;"),e("span.badge.badge-success","Novidade‍")]),e("a.link-footer[href='http://crowdfunding.catarse.me/paratodos?ref=ctrse_footer']"," Como funciona"),e("a.link-footer[href='https://www.catarse.me/pt/flex?ref=ctrse_footer']"," Catarse flex"),e("a.link-footer[href='https://www.catarse.me/pt/team?ref=ctrse_footer']",[" Nosso time ",e.trust("&lt;"),"3"]),e("a.link-footer[href='http://facebook.com/catarse.me']"," Facebook"),e("a.link-footer[href='http://twitter.com/catarse']"," Twitter"),e("a.link-footer[href='http://instagram.com/catarse']"," Instagram"),e("a.link-footer[href='http://github.com/catarse/catarse']"," Github"),e("a.link-footer[href='http://blog.catarse.me']"," Blog"),e("a.link-footer[href='https://www.catarse.me/pt/jobs']"," Trabalhe conosco")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-firstcolumn",[e(".footer-full-signature-text.fontsize-small","Ajuda"),e("a.link-footer[href='http://suporte.catarse.me/hc/pt-br/requests/new'][target=\"_BLANK\"]"," Contato"),e("a.link-footer[href='http://crowdfunding.catarse.me/nossa-taxa?ref=ctrse_footer']"," Nossa Taxa"),e("a.link-footer[href='https://www.catarse.me/pt/press?ref=ctrse_footer']"," Imprensa"),e("a.link-footer[href='http://suporte.catarse.me?ref=ctrse_footer/']"," Central de Suporte"),e("a.link-footer[href='https://www.catarse.me/pt/guides?ref=ctrse_footer']"," Guia dos Realizadores"),e("a.link-footer[href='http://pesquisa.catarse.me/']"," Retrato FC Brasil 2013/2014"),e("a.link-footer[href='/pt/terms-of-use']"," Termos de uso"),e("a.link-footer[href='/pt/privacy-policy']"," Política de privacidade")]),e(".w-col.w-col-4.w-col-small-4.w-col-tiny-4.footer-full-lastcolumn",[e(".footer-full-signature-text.fontsize-small","Faça uma campanha"),e("a.w-hidden-small.w-hidden-tiny.link-footer[href='/pt/start?ref=ctrse_footer']"," Comece seu projeto"),e("a.link-footer[href='http://crowdfunding.catarse.me/financiamento-coletivo-musica-independente?ref=ctrse_footer']",["Música no Catarse",e.trust("&nbsp;"),e("span.badge.badge-success","Novidade")]),e("a.u-marginbottom-30.link-footer[href='https://crowdfunding.catarse.me/publicacoes-independentes-financiamento-coletivo?ref=ctrse_footer']",["Publicações Independentes",e.trust("&nbsp;"),e("span.badge.badge-success","Novidade")]),e(".footer-full-signature-text.fontsize-small","Apoie projetos no Catarse"),e("a.link-footer[href='/pt/explore?ref=ctrse_footer']"," Explore projetos"),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='http://blog.catarse.me?ref=ctrse_footer']"," Blog"),e("a.w-hidden-main.w-hidden-medium.w-hidden-small.link-footer[href='http://suporte.catarse.me/hc/pt-br/requests/new']"," Contato"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=score&ref=ctrse_footer']"," Populares"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=online&ref=ctrse_footer']"," No ar"),e("a.w-hidden-tiny.link-footer[href='/pt/explore?filter=finished&ref=ctrse_footer']"," Finalizados")])])),e(".w-col.w-col-3.column-social-media-footer",[e(".footer-full-signature-text.fontsize-small","Assine nossa news"),e(".w-form",e("form[accept-charset='UTF-8'][action='"+pt.getMailchimpUrl()+"'][id='mailee-form'][method='post']",[e(".w-form.footer-newsletter",e("input.w-input.text-field.prefix[id='EMAIL'][label='email'][name='EMAIL'][placeholder='Digite seu email'][type='email']")),e('button.w-inline-block.btn.btn-edit.postfix.btn-attached[style="padding:0;"]',e("img.footer-news-icon[alt='Icon newsletter'][src='/assets/catarse_bootstrap/icon-newsletter.png']"))])),e(".footer-full-signature-text.fontsize-small","Change language"),e("[id='google_translate_element']")])])),e(".w-container",e(".footer-full-copyleft",[e("img.u-marginbottom-20[alt='Logo footer'][src='/assets/logo-footer.png']"),e(".lineheight-loose",e("a.link-footer-inline[href='http://github.com/catarse/catarse']"," Feito com amor | "+(new Date).getFullYear()+" | Open source"))]))])}},bi={controller:function(t){var o=e.prop(t.friend);return{friend:o}},view:function(t,r){var n=t.friend(),a=o.isEmpty(n.avatar)?"/assets/catarse_bootstrap/user.jpg":n.avatar;return e(".w-col.w-col-4",e(".card.card-backer.u-marginbottom-20.u-radius.u-text-center",[e("img.thumb.u-marginbottom-10.u-round[src='"+a+"']"),e(".fontsize-base.fontweight-semibold.lineheight-tight",e("a.link-hidden",{href:"/users/"+n.friend_id},Ro.displayName(n))),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-10",o.isNull(n.city)?"":e(".fontsize-smaller.fontcolor-secondary.u-marginbottom-10",n.city+", "+n.state)),e(".fontsize-smaller",[e("span.fontweight-semibold",n.total_contributed_projects)," apoiados ",e.trust("&nbsp;"),"| ",e.trust("&nbsp;"),e("span.fontweight-semibold",n.total_published_projects)," criados"]),e(".btn-bottom-card.w-row",[e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3"),e(".w-col.w-col-6.w-col-small-4.w-col-tiny-6",e.component(hn,{following:n.following,follow_id:n.friend_id})),e(".w-col.w-col-3.w-col-small-4.w-col-tiny-3")])]))}},gi={controller:function(t){c.userFriend.pageSize(9);var o=a.filtersVM({user_id:"eq"}),r=t.user,n=a.paginationVM(c.userFriend,"following.asc,total_contributed_projects.desc",{Prefer:"count=exact"}),i=e.prop(!1),s=function(){i(!0);var e=a.loaderWithToken(c.followAllFriends.postOptions({}));e.load().then(function(){n.firstPage(o.parameters()),i(!1)})};return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{friendListVM:n,followAll:s,allLoading:i}},view:function(t,r){var n=t.friendListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row.u-marginbottom-40.card.u-radius.card-terciary",[e(".w-col.w-col-7.w-col-small-6.w-col-tiny-6",[e(".fontsize-small","Comece agora! Siga todos os seus amigos ou somente alguns deles para descobrir projetos juntos!")]),e(".w-col.w-col-5.w-col-small-6.w-col-tiny-6",[t.allLoading()?pt.loader():e("a.w-button.btn.btn-medium",{onclick:t.followAll},"Siga todos os seus "+(n.total()?n.total():"")+" amigos")])]),e(".w-row",[o.map(n.collection(),function(t){return e.component(bi,{friend:t})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Jn,{collection:n}),e(".w-col.w-col-5")])])])])])}},hi={controller:function(t){c.userFollow.pageSize(9);var o=a.filtersVM({user_id:"eq"}),r=t.user,n=(e.prop(window.location.hash),a.paginationVM(c.userFollow,"created_at.desc",{Prefer:"count=exact"}));return o.user_id(r.user_id),n.collection().length||n.firstPage(o.parameters()),{followsListVM:n}},view:function(t,r){var n=t.followsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(bi,{friend:o.extend({},{following:!0,friend_id:t.follow_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Jn,{collection:n}),e(".w-col.w-col-5")])])])])])}},_i={controller:function(e){c.userFollower.pageSize(9);var t=a.paginationVM(c.userFollower,"following.asc,created_at.desc",{Prefer:"count=exact"}),o=e.user,r=a.filtersVM({follow_id:"eq"});return r.follow_id(o.user_id),t.collection().length||t.firstPage(r.parameters()),{followersListVM:t}},view:function(t,r){var n=t.followersListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(bi,{friend:o.extend({},{friend_id:t.user_id},t.source)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Jn,{collection:n}),e(".w-col.w-col-5")])])])])])}},vi={controller:function(e){c.creatorSuggestion.pageSize(9);var t=a.paginationVM(c.creatorSuggestion,"following.asc, total_published_projects.desc, total_contributed_projects.desc",{Prefer:"count=exact"});return t.collection().length||t.firstPage(),{creatorsListVM:t}},view:function(t,r){var n=t.creatorsListVM;return e(".w-section.bg-gray.before-footer.section",[e(".w-container",[e(".w-row",[o.map(n.collection(),function(t){return e.component(bi,{friend:o.extend({},{friend_id:t.user_id},t)})})]),e(".w-section.section.bg-gray",[e(".w-container",[e(".w-row.u-marginbottom-60",[e(".w-col.w-col-5",[e(".u-marginright-20")]),e.component(Jn,{collection:n}),e(".w-col.w-col-5")])])])])])}},yi={controller:function(t){var r=pt.getUser(),n=e.prop(window.location.hash),a=function(){var t={user:r},a={"#creators":e.component(vi,t),"#friends":e.component(gi,t),"#follows":e.component(hi,t),"#followers":e.component(_i,t)};return n(window.location.hash),o.isEmpty(n())||"#_=_"===n()?a["#friends"]:a[n()]};return pt.redrawHashChange(),{user:r,displayTabContent:a}},view:function(t,o){return e("div",[e(".w-section.dashboard-header",[e(".w-container",[e(".w-row.u-margintop-20.u-marginbottom-20",[e(".w-col.w-col-1"),e(".w-col.w-col-10.u-text-center",[e(".fontsize-larger.fontweight-semibold.u-marginbottom-10","Descubra projetos com seus amigos"),e(".fontsize-small","Siga os seus amigos e nós iremos te notificar sempre que eles lançarem ou apoiarem algum projeto")]),e(".w-col.w-col-1")])])]),e(".divider.u-margintop-30"),e(".project-nav",e(".u-text-center.w-container",[e('a[id="creators-link"][class="dashboard-nav-link '+(pt.hashMatch("#creators")?"selected":"")+'"] [href="#creators"]',"Encontre realizadores"),e('a[id="friends-link"][class="dashboard-nav-link '+(pt.hashMatch("#friends")||pt.hashMatch("")?"selected":"")+'"] [href="#friends"]',"Encontre amigos"),e('a[id="follows-link"][class="dashboard-nav-link '+(pt.hashMatch("#follows")?"selected":"")+'"] [href="#follows"]',["Seguindo",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.follows_count)]),e('a[id="followers-link"][class="dashboard-nav-link '+(pt.hashMatch("#followers")?"selected":"")+'"] [href="#followers"]',["Seguidores",e.trust("&nbsp;"),e("span.w-hidden-small.w-hidden-tiny.badge",t.user.followers_count)])])),t.displayTabContent()])}},ji=o.partial(pt.i18nScope,"projects.contributions"),ki={controller:function(e){var t=Ro.getUserRecommendedProjects(),r=!o.isEmpty(e.contribution.slip_url),n=function(t,o){o||(CatarseAnalytics.event({cat:"contribution_finish",act:"contribution_finished",lbl:r?"slip":"creditcard",val:e.contribution.value,extraData:{contribution_id:e.contribution.contribution_id}}),CatarseAnalytics.checkout(""+e.contribution.contribution_id,"["+e.contribution.project.permalink+"] "+e.contribution.reward.minimum_value+" ["+(r?"slip":"creditcard")+"]",""+e.contribution.reward.reward_id,""+e.contribution.project.category,""+e.contribution.value,""+e.contribution.value*e.contribution.project.service_fee))};return{setEvents:n,displayShareBox:pt.toggleProp(!1,!0),isSlip:r,recommendedProjects:t}},view:function(o,r){return e("#thank-you",{config:o.setEvents},[e(".page-header.u-marginbottom-30",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-20.u-text-center",e("img.big.thumb.u-round[src='"+r.contribution.project.user_thumb+"']")),e("#thank-you.u-text-center",o.isSlip?[e("#slip-thank-you.fontsize-largest.text-success.u-marginbottom-20",t.t("thank_you_slip.thank_you",ji())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you_slip.thank_you_text_html",ji({email:r.contribution.contribution_email,link_email:"/pt/users/"+pt.getUser().user_id+"/edit#about_me"}))))]:[e("#creditcard-thank-you.fontsize-larger.text-success.u-marginbottom-20",t.t("thank_you.thank_you",ji())),e(".fontsize-base.u-marginbottom-40",e.trust(t.t("thank_you.thank_you_text_html",ji({total:r.contribution.project.total_contributions,email:r.contribution.contribution_email,link2:"/pt/users/"+pt.getUser().user_id+"/edit#contributions",link_email:"/pt/users/"+pt.getUser().user_id+"/edit#about_me"})))),e(".fontsize-base.fontweight-semibold.u-marginbottom-20","Compartilhe com seus amigos e ajude esse projeto a bater a meta!")]),o.isSlip?"":e(".w-row",[e(".w-hidden-small.w-hidden-tiny",[e(".w-sub-col.w-col.w-col-4",e.component(Sr,{url:"https://www.catarse.me/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=social&utm_campaign=project_share",big:!0})),e(".w-sub-col.w-col.w-col-4",e.component(Sr,{messenger:!0,big:!0,url:"https://www.catarse.me/"+r.contribution.project.permalink+"?ref=ctrse_thankyou&utm_source=facebook.com&utm_medium=messenger&utm_campaign=thanks_share"})),e(".w-col.w-col-4",e('a.btn.btn-large.btn-tweet.u-marginbottom-20[href="https://twitter.com/intent/tweet?text=Acabei%20de%20apoiar%20o%20projeto%20'+r.contribution.project.name+"%20https://www.catarse.me/"+r.contribution.project.permalink+'%3Fref%3Dtwitter%26utm_source%3Dtwitter.com%26utm_medium%3Dsocial%26utm_campaign%3Dproject_share"][target="_blank"]',[e("span.fa.fa-twitter")," Twitter"]))]),e(".w-hidden-main.w-hidden-medium",[e(".u-marginbottom-30.u-text-center-small-only",e("button.btn.btn-large.btn-terciary.u-marginbottom-40",{onclick:o.displayShareBox.toggle},"Compartilhe")),o.displayShareBox()?e(un,{project:e.prop({permalink:r.contribution.project.permalink,name:r.contribution.project.name}),displayShareBox:o.displayShareBox}):""])])])))),e(".section.u-marginbottom-40",e(".w-container",o.isSlip?e(".w-row",e(".w-col.w-col-8.w-col-offset-2",e("iframe.slip",{src:r.contribution.slip_url,width:"100%",height:"905px",frameborder:"0",style:"overflow: hidden;"}))):[e(".fontsize-large.fontweight-semibold.u-marginbottom-30.u-text-center",t.t("thank_you.project_recommendations",ji())),e.component(er,{collection:o.recommendedProjects,ref:"ctrse_thankyou_r"})]))])}},xi=o.partial(pt.i18nScope,"users.edit.email_confirmation"),zi={controller:function(t){var o=pt.getUserID(),r=Ro.fetchUser(o),n=e.prop(!1),a=e.prop(!1);return{confirmedEmail:n,hideAlert:a,user:r,checkEmail:function(){return e.request({method:"PUT",url:"/users/"+o+".json",data:{user:{confirmed_email_at:!0}},config:pt.setCsrfToken}).then(function(t){n(!0),window.setTimeout(function(){a(!0),e.redraw(!0)},4e3)})}}},view:function(n,a){var i=n.user();if(i){var s=r().isBefore(r(i.created_at).add(2,"days"));return!i||s||i.email_active||n.hideAlert()?e("div"):e(".card-alert.section.u-text-center",{style:a.menuTransparency?{"padding-top":"100px"}:{}},[e(".w-container",n.confirmedEmail()?[e(".fontsize-large.fontweight-semibold",t.t("confirmed_title",xi())),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("confirmed_sub",xi()))]:[e(".fontsize-large.fontweight-semibold",o.isNull(i.name)?"Olá":t.t("hello",xi({name:i.name}))),e(".fontsize-large.fontweight-semibold.u-marginbottom-20",t.t("hello_sub",xi())),e(".fontsize-base.u-marginbottom-10",t.t("hello_email",xi({email:i.email}))),e(".w-row",[e(".w-col.w-col-3"),e(".w-col.w-col-3",[e("button.btn.btn-medium.btn-terciary.w-button",{onclick:n.checkEmail},"Sim!")]),e(".w-col.w-col-3",[e('a.btn.btn-medium.w-button[href="/users/'+i.id+'/edit#about_me"]',"Editar o email")]),e(".w-col.w-col-3")])])])}return e("div")}},Ci={controller:function(e){return{user:Ro.fetchUser(e.user_id)}},view:function(t,o){return t.user()?e(na,{user:t.user(),userId:o.user_id,useFloatBtn:!0,hideDisableAcc:!0,hideCoverImg:!0,hidePasswordChange:!0,rails_errors:o.rails_errors,publishingUserAbout:!0}):e("div",pt.loader())}},Ei={controller:function(t){var r=t.states,n=t.fee,a=t.fees,i=t.feeIndex,s=pt.toggleProp(!1,!0),l=e.prop(n.value||0),c=e.prop(n.destination),d=t.index,u=function(e){return e.acronym!==c()&&o.contains(o.pluck(a(),"destination"),e.acronym)},p=function(){var e=o.indexOf(a(),n);n.destination=c(),a()[e]=n};return{fee:n,fees:a,deleted:s,feeValue:l,stateInUse:u,feeDestination:c,updateFees:p,feeIndex:i,index:d,states:r}},view:function(t){var r=t.feeIndex,n=t.index,a=t.deleted,i=o.filter(t.fees(),function(e){return"others"!==e.destination&&"international"!==e.destination}).length,s=t.states;return e("div"+(a()?".w-hidden":""),[e(".u-marginbottom-10.w-row",[e(".w-col.w-col-6","others"===t.feeDestination()?[e("input[type='hidden']",{name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][destination]",value:"others"}),e("label.field-label.fontsize-smallest",i>0?"Resto do Brasil":"Todos os estados do Brasil")]:"international"===t.feeDestination()?[e("input[type='hidden']",{name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][destination]",value:"international"}),e("label.field-label.fontsize-smallest","Internacional")]:e("select.fontsize-smallest.text-field-light.w-select[id='project_rewards_shipping_fees_attributes_"+n+"_destination']",{name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][destination]",value:t.feeDestination(),onchange:function(e){t.feeDestination(e.target.value),t.updateFees()}},[o.map(s(),function(o){return e("option[value='"+o.acronym+"']",{disabled:t.stateInUse(o)},o.name)})])),e(".w-col.w-col-1"),e(".w-col.w-col-4",e(".w-row",[e(".no-hover.positive.prefix.text-field.w-col.w-col-3",e(".fontcolor-secondary.fontsize-mini.u-text-center","R$")),e(".w-col.w-col-9",e("input.positive.postfix.text-field.w-input[type='text']",{value:t.feeValue(),name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][value]",oninput:e.withAttr("value",t.feeValue)}))])),e(".w-col.w-col-1",[e("input[id='project_rewards_shipping_fees_attributes_"+n+"__destroy'][type='hidden']",{value:t.deleted(),name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][_destroy]"}),"others"===t.feeDestination()||"international"===t.feeDestination()?"":e("a.btn.btn-no-border.btn-small.btn-terciary.fa.fa-1.fa-trash",{onclick:function(){return t.deleted.toggle()}})]),e("input[type='hidden'][id='project_rewards_shipping_fees_attributes_"+r+"_id']",{name:"project[rewards_attributes]["+n+"][shipping_fees_attributes]["+r+"][id]",value:t.fee.id||null})]),e(".divider.u-marginbottom-10")])}},Si={controller:function(t){var r=e.prop(t.reward.shipping_options),n=t.reward,a=e.prop(t.reward.minimum_value),i=e.prop(t.reward.maximum_contributions),s=t.index,l=pt.toggleProp(!1,!0),c=e.prop([]),d=e.prop([]),u=bo.statesLoader,p=function(){"national"!==r()&&"international"!==r()||o.contains(o.pluck(d(),"destination"),"others")||d().push({value:0,destination:"others"}),"national"===r()?d(o.reject(d(),function(e){return"international"===e.destination})):"international"!==r()||o.contains(o.pluck(d(),"destination"),"international")||d().push({value:0,destination:"international"})};return u.load().then(function(e){c(e),c().unshift({acronym:null,name:"Estado"}),t.reward.newReward||bo.getFees(t.reward).then(function(e){d(e),p()})}),{minimumValue:a,maximumContributions:i,updateOptions:p,showTips:l,shipping_options:r,states:c,reward:n,index:s,fees:d}},view:function(t){var n=t.reward,a=t.index,i={value:null,destination:null},s=t.fees();return e(".w-row.card.card-terciary.u-marginbottom-20.card-edition.medium",[e(".w-col.w-col-5.w-sub-col",[e(".fontweight-semibold.fontsize-smallest.u-marginbottom-10",["Editar recompensa",e.trust("&nbsp;"),e("a.link-edit.fa.fa-question-circle",{onclick:function(){return t.showTips.toggle()}})]),t.showTips()?e(".fontsize-smallest.fontcolor-secondary.reward-explanation.u-marginbottom-20","Descreva o valor da recompensa e coloque uma previsão de data de entrega real para os apoiadores. Você também pode limitar uma recompensa e quando o limite é atingido ela aparece como ESGOTADA. Se quiser mudar a ordem que as recompensas aparecem em seu projeto, basta fazer isso arrastando-as para cima ou para baixo."):""]),e(".w-col.w-col-7",e(".card",e(".w-form",[e(".w-row.u-marginbottom-20",[e(".w-col.w-col-5",e("label.fontsize-smaller","Valor mínimo:")),e(".w-col.w-col-7",[e(".w-row",[e(".w-col.w-col-3.w-col-small-3.w-col-tiny-3.text-field.positive.prefix.no-hover",e(".fontsize-smallest.fontcolor-secondary.u-text-center","R$")),e(".w-col.w-col-9.w-col-small-9.w-col-tiny-9",e("input.string.tel.required.w-input.text-field.project-edit-reward.positive.postfix[aria-required='true'][autocomplete='off'][required='required'][type='tel'][id='project_rewards_attributes_"+a+"_minimum_value']",{name:"project[rewards_attributes]["+a+"][minimum_value]",value:t.minimumValue(),onchange:e.withAttr("value",t.minimumValue)}))]),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_minimum_value']","Informe um valor mínimo maior ou igual a 10")])]),e(".w-row",[e(".w-col.w-col-5",e("label.fontsize-smaller","Previsão de entrega:")),e(".w-col.w-col-7",e(".w-row",e(".w-col.w-col-12",e(".w-row",[e("input[id='project_rewards_attributes_"+a+"_deliver_at_3i'][type='hidden'][value='1']",{name:"project[rewards_attributes]["+a+"][deliver_at(3i)]"}),e("select.date.required.w-input.text-field.w-col-6.positive[aria-required='true'][discard_day='true'][required='required'][use_short_month='true'][id='project_rewards_attributes_"+a+"_deliver_at_2i']",{name:"project[rewards_attributes]["+a+"][deliver_at(2i)]"},[o.map(r.monthsShort(),function(t,o){var a=n.deliver_at?r(n.deliver_at).format("MMM"):r().format("MMM");return e("option[value='"+(o+1)+"']"+(a===t?"[selected='selected']":""),pt.capitalize(t))})]),e("select.date.required.w-input.text-field.w-col-6.positive[aria-required='true'][discard_day='true'][required='required'][use_short_month='true'][id='project_rewards_attributes_"+a+"_deliver_at_1i']",{name:"project[rewards_attributes]["+a+"][deliver_at(1i)]"},[o.map(o.range(r().year(),r().year()+6),function(t){return e("option[value='"+t+"']"+(r(n.deliver_at).format("YYYY")===String(t)?"[selected='selected']":""),t)})])]))))]),e(".w-row",e("label.fontsize-smaller","Descrição:")),e(".w-row",[e("textarea.text.required.w-input.text-field.positive.height-medium[aria-required='true'][placeholder='Descreva sua recompensa'][required='required'][id='project_rewards_attributes_"+a+"_description']",{name:"project[rewards_attributes]["+a+"][description]"},n.description),e(".fontsize-smaller.text-error.u-marginbottom-20.fa.fa-exclamation-triangle.w-hidden[data-error-for='reward_description']","Informe uma descrição para a recompensa")]),e(".u-marginbottom-30.w-row",[e(".w-col.w-col-3",e("label.fontsize-smaller[for='field-2']","Tipo de entrega")),e(".w-col.w-col-9",[e("select.positive.text-field.w-select[id='project_rewards_attributes_"+a+"_shipping_options']",{
name:"project[rewards_attributes]["+a+"][shipping_options]",value:t.shipping_options()||"free",onchange:function(e){t.shipping_options(e.target.value),t.updateOptions()}},[e("option[value='international']","Frete Nacional e Internacional"),e("option[value='national']","Frete Nacional"),e("option[value='free']","Sem frete envolvido"),e("option[value='presential']","Retirada presencial")]),"national"===t.shipping_options()||"international"===t.shipping_options()?e(".card.card-terciary",[o.map(s,function(o,r){return[e(Ei,{fee:o,fees:t.fees,index:a,feeIndex:r,states:t.states})]}),e(".u-margintop-20",e("a.alt-link[href='#']",{onclick:function(){return t.fees().push(i),!1}},"Adicionar destino"))]):""])]),e(".w-row.u-marginbottom-20",[e(".w-col.w-col-5",e(".w-checkbox",[e(".w-checkbox-input",e("input.limit_reward[type='checkbox'][id='limit_reward']",{checked:n.limited(),onclick:function(){n.limited.toggle()}})),e("label.w-form-label","Limitar recompensa")])),n.limited()?e(".w-col.w-col-7.reward_maximum_contributions",e("input.string.tel.optional.w-input.text-field.u-marginbottom-30.positive[placeholder='Quantidade disponível'][type='tel'][id='project_rewards_attributes_"+a+"_maximum_contributions']",{name:"project[rewards_attributes]["+a+"][maximum_contributions]",value:t.maximumContributions(),onchange:e.withAttr("value",t.maximumContributions)})):""]),e(".w-row.u-margintop-30",[n.newReward?"":e(".w-col.w-col-5.w-col-small-5.w-col-tiny-5.w-sub-col-middle",e("input.w-button.btn-terciary.btn.btn-small.reward-close-button[type='submit'][value='Fechar']",{onclick:function(){n.edit.toggle()}})),e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",[e("input[id='project_rewards_attributes_"+a+"__destroy'][type='hidden'][value='false']",{name:"project[rewards_attributes]["+a+"][_destroy]"}),e("a.remove_fields.existing[data-confirm='Tem certeza?'][href='#']",e(".btn.btn-small.btn-terciary.fa.fa-lg.fa-trash.btn-no-border"))])])])))])}},Pi=o.partial(pt.i18nScope,"projects.reward_fields"),Mi={controller:function(){var e=function(e){return e.maximum_contributions-e.paid_count};return{availableCount:e}},view:function(o,r){var n=r.reward;return e(".w-row.card-persisted.card.card-terciary.u-marginbottom-20.medium.sortable",[e(".w-sub-col.w-col.w-col-5",[e("span.fontcolor-secondary.fontsize-smallest","Link para apoio direto"),e(".u-marginbottom-20.w-row",e(".w-col.w-col-12",e(".mithril-copy-link",e(".clipboard.w-row",[e(".w-col.w-col-10.w-col-small-10.w-col-tiny-10",e("textarea.copy-textarea.text-field.w-input",{style:{"margin-bottom":"0"}},"https://www.catarse.me/pt/projects/"+r.project_id+"/contributions/new?reward_id="+n.id)),e(".w-col.w-col-2.w-col-small-2.w-col-tiny-2",e("button.btn.btn-medium.btn-no-border.btn-terciary.fa.fa-clipboard.w-button"))])))),e(".fontcolor-secondary.fontsize-smallest.u-marginbottom-20","O link acima leva para a página de contribuição com essa recompensa já selecionada.")]),e(".w-col.w-col-7",e(".card",[e(".w-row",[e(".w-col.w-col-11.w-col-small-11.w-col-tiny-11",e(".fontsize-base.fontweight-semibold","Para R$ "+n.minimum_value+" ou mais")),bo.canEdit(n,r.project_state,r.user)?e(".w-col.w-col-1.w-col-small-1.w-col-tiny-1",e("a.show_reward_form[href='javascript:void(0);']",{onclick:function(){n.edit.toggle()}},e(".btn.btn-small.btn-terciary.fa.fa-lg.fa-edit.btn-no-border"))):""]),e(".fontsize-smaller.u-marginbottom-20.fontweight-semibold",n.paid_count+" apoiadores"),e.trust(pt.simpleFormat(pt.strip(n.description))),n.limited()?o.availableCount(n)<=0?e(".u-margintop-10",e("span.badge.badge-gone.fontsize-smaller","Esgotada")):e(".u-margintop-10",e("span.badge.badge-attention.fontsize-smaller",[e("span.fontweight-bold","Limitada ")," ("+o.availableCount(n)+" de "+n.maximum_contributions+" disponíveis)"])):"",n.deliver_at?e(".fontsize-smallest",[e("b","Estimativa de entrega: "),pt.momentify(n.deliver_at,"MMM/YYYY")]):"",e(".fontsize-smallest",e("b","Envio: "),t.t("shipping_options."+n.shipping_options,Pi()))]))])}},Ai={controller:function(t){var r=e.prop([]),n=function(e){return e.maximum_contributions-e.paid_count},a={id:null,minimum_value:null,deliver_at:null,description:null,paid_count:0,edit:e.prop(!0),limited:pt.toggleProp(!1,!0),maximum_contributions:null,newReward:!0,row_order:999999999+20*r().length},i=function(o,r){return e.request({method:"POST",url:"/pt/projects/"+t.project_id+"/rewards/"+o+"/sort?reward[row_order_position]="+r,config:function(e){pt.authenticityToken()&&(e.setRequestHeader("X-CSRF-Token",pt.authenticityToken()),e.setRequestHeader("Content-type","application/x-www-form-urlencoded"))}})},s=function(e,t){!t&&window.$&&window.$(e).sortable({update:function(e,t){var o=t.item[0].id;i(o,t.item.index())}})};return bo.fetchRewards(t.project_id).then(function(){o.map(bo.rewards(),function(e){var t=null!==e.maximum_contributions;o.extend(e,{edit:pt.toggleProp(!1,!0),limited:pt.toggleProp(t,!t)}),r().push(e)}),0===bo.rewards().length&&r().push(a)}),{rewards:r,user:Ro.fetchUser(t.user_id),availableCount:n,newReward:a,setSorting:s}},view:function(t,r){return e("[id='dashboard-rewards-tab']",e(".w-section.section",e(".w-container",e(".w-row",e(".w-col.w-col-10.w-col-push-1",e("form.simple_form.project-form.w-form[action='/pt/projects/"+r.project_id+"'][method='post'][novalidate='novalidate'][id='edit_project_"+r.project_id+"']",[e("input[name='utf8'][type='hidden'][value='✓']"),e("input[name='_method'][type='hidden'][value='patch']"),e('input[name="authenticity_token"][type="hidden"][value='+pt.authenticityToken()+"]"),e("input[id='project_id'][name='project_id'][type='hidden'][value='"+r.project_id+"']"),e("input[id='anchor'][name='anchor'][type='hidden'][value='reward']"),e("[id='dashboard-rewards']",[0===t.rewards().length?"":e(".ui-sortable[id='rewards']",{config:t.setSorting},[o.map(o.sortBy(t.rewards(),function(e){return Number(e.row_order)}),function(o,n){return e("div[id="+o.id+"]",[e(".nested-fields",e(".reward-card",[o.edit()?e(Si,{reward:o,index:n}):e(Mi,{reward:o,user:t.user(),project_id:r.project_id,project_state:r.project_state})])),e("input.ui-sortable-handle[id='project_rewards_attributes_"+n+"_id'][type='hidden']",{name:"project[rewards_attributes]["+n+"][id]",value:o.id})])})]),bo.canAdd(r.project_state)?[e("a.btn.btn-large.btn-message.show_reward_form.new_reward_button.add_fields[href='#']",{onclick:function(){return t.rewards().push(t.newReward)}},"+ Adicionar recompensa"),e(".w-section.save-draft-btn-section",e(".w-container",e(".w-row",e(".w-col.w-col-4.w-col-push-4",e("input.btn.btn.btn-medium[name='commit'][type='submit'][value='Salvar']")))))]:""])]))))))}},Ti={controller:function(e){return{user:Ro.fetchUser(e.user_id)}},view:function(t,o){return t.user()?e(pa,{user:t.user(),userId:o.user_id,hideCreditCards:!0,useFloatBtn:!0,rails_errors:o.rails_errors,publishingUserSettings:!0}):e("div",pt.loader())}},Di=function(e,t,r){var n=void 0;try{n=JSON.parse(e)}catch(a){n={}}var i=function(e,t){var a=o.first(o.compact(o.map(t,function(e){return o.first(n[e])})));a&&(r(e,a),r.inlineError(e,!0))};o.each(t,function(e,t){i(e[0],e[1])})},qi={mapRailsErrors:Di},Ri=ea(),Fi={tracker_snippet_html:e.prop(""),user_id:e.prop(""),public_tags:e.prop(""),admin_tags:e.prop(""),service_fee:e.prop(""),name:e.prop(""),permalink:e.prop(""),category_id:e.prop(""),city_id:e.prop(""),city_name:e.prop("")},Oi=function(e){Fi.tracker_snippet_html(e.tracker_snippet_html||""),Fi.user_id(e.user_id),Fi.admin_tags(e.admin_tag_list||""),Fi.public_tags(e.tag_list||""),Fi.service_fee(e.service_fee),Fi.name(e.name),Fi.permalink(e.permalink),Fi.category_id(e.category_id),Fi.city_id(e.city_id||""),e.address.city&&Fi.city_name(e.address.city+" - "+e.address.state)},Ii=function(e){var t={tracker_snippet_html:Fi.tracker_snippet_html(),user_id:Fi.user_id(),all_tags:Fi.admin_tags(),all_public_tags:Fi.public_tags(),service_fee:Fi.service_fee(),name:Fi.name(),permalink:Fi.permalink(),category_id:Fi.category_id(),city_id:Fi.city_id};return Ko.updateProject(e,t)},Ni=function(t,r){var n=a.filtersVM;c.category.getPage(n({}).order({name:"asc"}).parameters()).then(function(n){var a=o.map(n,function(t,o){return e("option[value='"+t.id+"']",{selected:r==t.id},t.name)});t(a)})},Vi=function(t){var r=a.filtersVM({search_index:"@@"}).order({name:"asc"}),n=function(e,t){return function(){Fi.city_name(e.name+" - "+e.acronym),Fi.city_id(e.id),t("")}};return function(a){var i=a.currentTarget.value;r.search_index(s(i)),Fi.city_name(i),c.city.getPage(r.parameters()).then(function(r){var a=o.map(r,function(o){return e(".table-row.fontsize-smallest.fontcolor-secondary",[e(".city-select.fontsize-smallest.link-hidden-light",{onclick:n(o,t)},o.name+" - "+o.acronym)])});t(e(".table-outer.search-pre-result",a))})["catch"](function(e){t("")})}},Bi={fields:Fi,fillFields:Oi,updateProject:Ii,loadCategoriesOptionsTo:Ni,e:Ri,generateSearchCity:Vi},Li={view:function(t,o){var r=o.cardClass||".w-row.u-marginbottom-30.card.card-terciary";return e(r,[e(".w-col.w-col-5.w-sub-col",[e("label.field-label.fontweight-semibold",o.label),o.label_hint?e("label.hint.fontsize-smallest.fontcolor-secondary",o.label_hint):""]),e(".w-col.w-col-7.w-sub-col",o.children)])}},Ui={view:function(t,o){return e(".w-section.save-draft-btn-section",[e(".w-row",[e(".w-col.w-col-4.w-col-push-4",o.loading()?pt.loader():[e('input[id="anchor"][name="anchor"][type="hidden"][value="about_me"]'),e('input.btn.btn.btn-large[name="commit"][type="submit"][value="Salvar"]',{onclick:o.onSubmit})]),e(".w-col.w-col-4")])])}},Yi=o.partial(pt.i18nScope,"projects.dashboard_basics"),Hi={controller:function(t){var o=Bi,r=[["name",["name"]],["permalink",["permalink"]],["category_id",["category"]],["city_id",["city"]]],n=e.prop(!1),a=e.prop(),i=e.prop([]),s=pt.toggleProp(!1,!0),l=pt.toggleProp(!1,!0),c=function(a){return n(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){n(!1),o.e.resetFieldErrors(),s()||s.toggle(),l()&&l.toggle()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),n(!1),s()&&s.toggle(),l()||l.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,r,o.e),o.fillFields(t.project),o.loadCategoriesOptionsTo(i,o.fields.category_id()),{vm:o,onSubmit:c,loading:n,categories:i,cities:a,showSuccess:s,showError:l}},view:function(o,r){var n,a=o.vm;return e("#basics-tab",[o.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[r.user.is_admin?e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(Li,{label:t.t("tracker_snippet_html",Yi()),children:[e("textarea.text.optional.w-input.text-field.positive.medium",{value:a.fields.tracker_snippet_html(),onchange:e.withAttr("value",a.fields.tracker_snippet_html)})]}),e(Li,{label:t.t("user_id",Yi()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{value:a.fields.user_id(),onchange:e.withAttr("value",a.fields.user_id)})]}),e(Li,(n={label:"Admin Tags"},y(n,"label",t.t("admin_tags",Yi())),y(n,"label_hint",t.t("admin_tags_hint",Yi())),y(n,"children",[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{value:a.fields.admin_tags(),onchange:e.withAttr("value",a.fields.admin_tags)})]),n)),e(Li,{label:t.t("service_fee",Yi()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="number"]',{value:a.fields.service_fee(),onchange:e.withAttr("value",a.fields.service_fee)})]})])]):"",e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(Li,{label:t.t("name",Yi()),label_hint:t.t("name_hint",Yi()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"][maxlength="50"]',{value:a.fields.name(),"class":a.e.hasError("name")?"error":"",onchange:e.withAttr("value",a.fields.name)}),a.e.inlineError("name")]}),e(Li,{label:t.t("tags",Yi()),label_hint:t.t("tags_hint",Yi()),children:[e('input.string.optional.w-input.text-field.positive.medium[type="text"]',{value:a.fields.public_tags(),"class":a.e.hasError("public_tags")?"error":"",onchange:e.withAttr("value",a.fields.public_tags)}),a.e.inlineError("public_tags")]}),e(Li,{label:t.t("permalink",Yi()),label_hint:t.t("permalink_hint",Yi()),children:[e(".w-row",[e(".w-col.w-col-4.w-col-small-6.w-col-tiny6.text-field.prefix.no-hover.medium.prefix-permalink",{"class":a.e.hasError("permalink")?"error":""},e(".fontcolor-secondary.u-text-center.fontcolor-secondary.u-text-center.fontsize-smallest","www.catarse.me/")),e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6",[e('input.string.required.w-input.text-field.postfix.positive.medium[type="text"]',{value:a.fields.permalink(),"class":a.e.hasError("permalink")?"error":"",onchange:e.withAttr("value",a.fields.permalink)})])]),e(".w-row",a.e.inlineError("permalink"))]}),e(Li,{label:t.t("category",Yi()),label_hint:t.t("category_hint",Yi()),children:[e("select.required.w-input.text-field.w-select.positive.medium",{value:a.fields.category_id(),"class":a.e.hasError("category_id")?"error":"",onchange:e.withAttr("value",a.fields.category_id)},o.categories()),a.e.inlineError("category_id")]}),e(Li,{label:t.t("city",Yi()),label_hint:t.t("city_hint",Yi()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"]',{value:a.fields.city_name(),"class":a.e.hasError("city_id")?"error":"",onkeyup:a.generateSearchCity(o.cities)}),a.e.inlineError("city_id"),o.cities()]})])])]),e(Ui,{loading:o.loading,onSubmit:o.onSubmit})])])}},Wi={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(Hi,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},$i=ea(),Ji={about_html:e.prop("")},Xi=function(e){Ji.about_html(e.about_html||"")},Ki=function(e){var t={about_html:Ji.about_html()};return Ko.updateProject(e,t)},Gi={fields:Ji,fillFields:Xi,updateProject:Ki,e:$i},Qi={view:function(t,o){var r=o.cardClass||".w-row.u-marginbottom-30.card.card-terciary.padding-redactor-description.text.optional.project_about_html.field_with_hint";return e(r,{style:o.cardStyle||{}},[e("div",[e("label.field-label.fontweight-semibold.fontsize-base",o.label),o.label_hint?e("label.hint.fontsize-smallest.fontcolor-secondary",o.label_hint):""]),e("div",o.children)])}},Zi=o.partial(pt.i18nScope,"projects.dashboard_description"),es={controller:function(t){var o=Gi,r=[["about_html",["about_html"]]],n=pt.toggleProp(!1,!0),a=pt.toggleProp(!1,!0),i=e.prop(!1),s=function(s){return i(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){i(!1),o.e.resetFieldErrors(),n()||n.toggle(),a()&&a.toggle()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),i(!1),n()&&n.toggle(),a()||a.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:a,vm:o,loading:i}},view:function(o,r){var n=o.vm;return e("#description-tab",[o.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("description_alert",Zi()))])]),e(Qi,{label:t.t("description_label",Zi()),label_hint:t.t("description_hint",Zi()),children:[e(".preview-container",{"class":!!n.e.hasError("about_html")&&"error"},pt.redactor("project[about_html]",n.fields.about_html)),n.e.inlineError("about_html")]})])])]),e(Ui,{loading:o.loading,onSubmit:o.onSubmit})])])}},ts={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(es,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},os=ea(),rs={budget:e.prop("")},ns=function(e){rs.budget(e.budget||"")},as=function(e){var t={budget:rs.budget()};return Ko.updateProject(e,t)},is={fields:rs,fillFields:ns,updateProject:as,e:os},ss=o.partial(pt.i18nScope,"projects.dashboard_budget"),ls={controller:function(t){var o=is,r=[["budget",["budget"]]],n=pt.toggleProp(!1,!0),a=pt.toggleProp(!1,!0),i=e.prop(!1),s=function(s){return i(!0),e.redraw(),o.updateProject(t.projectId).then(function(e){i(!1),o.e.resetFieldErrors(),n()||n.toggle(),a()&&a.toggle()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),i(!1),n()&&n.toggle(),a()||a.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:a,vm:o,loading:i}},view:function(o,r){var n=o.vm;return e("#budget-tab",[o.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("budget_alert",ss()))])]),e(Qi,{cardStyle:{display:"block"},label:t.t("budget_label",ss()),children:[e(".preview-container",{"class":!!n.e.hasError("budget")&&"error"},pt.redactor("project[budget]",n.fields.budget)),n.e.inlineError("budget")]})])])]),e(Ui,{loading:o.loading,onSubmit:o.onSubmit})])])}},cs={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(ls,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},ds=ea(),us={video_url:e.prop("")},ps=function(e){us.video_url(e.video_url||"")},ms=function(e){var t={video_url:us.video_url()};return Ko.updateProject(e,t)},fs={fields:us,fillFields:ps,updateProject:ms,e:ds},ws=o.partial(pt.i18nScope,"projects.dashboard_video"),bs={controller:function(t){var o=fs,r=[["video_url",["video_url"]]],n=pt.toggleProp(!1,!0),a=pt.toggleProp(!1,!0),i=e.prop(!1),s=function(e){return i(!0),o.updateProject(t.projectId).then(function(e){i(!1),o.e.resetFieldErrors(),n()||n.toggle(),a()&&a.toggle()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),i(!1),n()&&n.toggle(),a()||a.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:a,vm:o,loading:i}},view:function(o,r){var n=o.vm;return e("#video-tab",[o.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(".u-marginbottom-60.u-text-center",[e(".w-inline-block.card.fontsize-small.u-radius",[e.trust(t.t("video_alert",ws()))])]),e(Li,{label:t.t("video_label",ws()),label_hint:t.t("video_hint",ws()),children:[e('input.string.required.w-input.text-field.positive.medium[type="text"]',{value:n.fields.video_url(),"class":n.e.hasError("video_url")?"error":"",onchange:e.withAttr("value",n.fields.video_url)}),n.e.inlineError("video_url")]})])])]),e(Ui,{loading:o.loading,onSubmit:o.onSubmit})])])}},gs={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(bs,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},hs=ea(),_s={mode:e.prop(""),online_days:e.prop(""),goal:e.prop("")},vs=function(e){_s.mode(e.mode||"aon"),_s.online_days(e.online_days||""),_s.goal(e.goal)},ys=function(e){var t={mode:_s.mode(),online_days:_s.online_days(),goal:_s.goal()};return Ko.updateProject(e,t)},js=function(e){return function(){_s.mode(e),_s.online_days(""),"flex"==e&&hs.inlineError("online_days",!1)}},ks={fields:_s,fillFields:vs,updateProject:ys,e:hs,genClickChangeMode:js},xs={view:function(t,o){var r=".card.medium.card-terciary.u-marginbottom-30";return e(r,[e("div.u-marginbottom-30",[e("label.fontweight-semibold.fontsize-base",o.label),o.label_hint?e(".fontsize-small",o.label_hint):""]),e("div",o.children)])}},zs=o.partial(pt.i18nScope,"projects.dashboard_goal"),Cs={controller:function(t){var r=ks,n=[["mode",["mode"]],["goal",["goal"]],["online_days",["online_days"]]],a=pt.toggleProp(!1,!0),i=pt.toggleProp(!1,!0),s=pt.toggleProp(!1,!0),l=pt.toggleProp(!1,!0),c=o.compose(r.fields.goal,pt.applyMonetaryMask),d=e.prop(!1),u=function(o){return d(!0),e.redraw(),r.updateProject(t.projectId).then(function(e){d(!1),r.e.resetFieldErrors(),a()||a.toggle(),i()&&i.toggle()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,n,r.e),d(!1),a()&&a.toggle(),i()||i.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,n,r.e),r.fillFields(t.project),{onSubmit:u,showSuccess:a,showError:i,showModeDiff:s,showTaxesDiff:l,vm:r,applyGoalMask:c,loading:d}},view:function(r,n){var a=r.vm;return e("#goal-tab",[r.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:r.showSuccess}):"",r.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:r.showError,error:!0}):"",e("form.w-form",{onsubmit:r.onSubmit},[e(".w-container",[e(".w-row",[e(".w-col.w-col-10.w-col-push-1",[e(xs,{label:t.t("mode_label",zs()),label_hint:t.t("mode_hint",zs()),children:[e(".flex-row.u-marginbottom-30",[e('a.choose-mode.choose-aon.w-inline-block.btn-select.flex-column.u-text-center[data-mode="aon"][href="javascript:void(0);"]',{onclick:a.genClickChangeMode("aon"),"class":"aon"==a.fields.mode()&&"selected"},[e('img[alt="Badge aon"][src="/assets/catarse_bootstrap/badge-aon.png"]')]),e('a.choose-mode.choose-flex.w-inline-block.btn-select.flex-column.u-text-center[data-mode="flex"][href="javascript:void(0);"]',{onclick:a.genClickChangeMode("flex"),"class":"flex"==a.fields.mode()&&"selected"},[e('img[alt="Badge flex"][src="/assets/catarse_bootstrap/badge-flex.png"]')])]),e(".u-text-center.fontsize-smaller",[e('a.mode-diff-toggle.link-hidden-light.fontweight-semibold[href="javscript:void(0);"]',{onclick:r.showModeDiff.toggle},["Veja a diferença entre os modelos ",e("span.fa.fa-chevron-down")])]),r.showModeDiff()?e(".mode-diff.u-margintop-30",[e(".flex-row",[e(".w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column",e.trust(t.t("aon_diff_html",zs()))),e(".w-hidden-small.w-hidden-tiny.fontsize-smaller.flex-column",e.trust(t.t("flex_diff_html",zs())))]),e(".u-text-center.u-margintop-30",[e(".divider.u-marginbottom-20"),e(".fontsize-base",t.t("want_more",zs())),e.trust(t.t("mode_diff_ebook",zs()))])]):""]}),e(xs,{label:t.t("goal_label",zs()),label_hint:t.t("goal_hint",zs()),children:[e(".w-row.u-marginbottom-30",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-4.w-col-small-6.w-col-tiny-6.text-field.prefix.no-hover.medium.prefix-permalink",[e(".fontcolor-secondary.u-text-center.fontsize-base.lineheight-tightest","R$")]),e(".w-col.w-col-8.w-col-small-6.w-col-tiny-6.label-hide",[e(".input.tel.optional.project_goal",[e("label.field-label"),e('input.string.optional.w-input.text-field.postfix.positive.medium[autocomplete="off"][id="project-goal-input"][name="project[goal]"][type="tel"]',{"class":!!a.e.hasError("goal")&&"error",value:a.fields.goal(),maxlength:14,onkeyup:e.withAttr("value",r.applyGoalMask)})])])]),e(".u-text-center",a.e.inlineError("goal"))]),e(".w-col.w-col-2")]),e(".u-text-center.fontsize-smaller.fontweight-semibold",[e('a.fee-toggle.link-hidden-light[href="javascript:void(0)"]',{onclick:r.showTaxesDiff.toggle},[t.t("goal_taxes_link",zs()),e("span.fa.fa-chevron-down")])]),r.showTaxesDiff()?e(".fee-explanation.u-margintop-30",[e(".u-marginbottom-30",[e(".fontsize-small.fontweight-semibold",t.t("goal_taxes_label",zs())),e(".fontsize-smaller",t.t("goal_"+a.fields.mode()+"_taxes_hint",zs()))]),e(".u-text-center.u-margintop-30",[e(".divider.u-marginbottom-20"),e(".fontsize-base",t.t("want_more",zs())),e.trust(t.t("goal_taxes_watch_video_html",zs()))])]):""]}),e(xs,{label:t.t("online_days_label",zs()),label_hint:e.trust(t.t("online_days_"+a.fields.mode()+"_hint",zs())),children:"aon"==a.fields.mode()?[e(".w-row",[e(".w-col.w-col-2"),e(".w-col.w-col-8",[e(".w-row",[e(".w-col.w-col-8.label-hide",[e(".input.integer.optional.disabled.project_online_days",[e("label.field-label"),e('input.numeric.integer.optional.disabled.w-input.text-field.postfix.positive.medium[id="project_online_days"][name="project[online_days]"][type="number"]',{onchange:e.withAttr("value",a.fields.online_days),"class":!!a.e.hasError("online_days")&&"error"})])]),e(".w-col.w-col-4",[e(".text-field.medium.prefix-permalink.u-text-center",[e("","dias")])])]),a.e.inlineError("online_days")])])]:[e(".flex-row",[e("a.choose-time.choose-unlimited.w-inline-block.btn-select.flex-column.u-text-center",{"class":o.isEmpty(a.fields.online_days().toString())?"selected":"",onclick:function(){a.fields.online_days("")}},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20",t.t("online_days_open",zs())),e(".w-hidden-tiny",t.t("online_days_open_hint",zs()))]),e("a.choose-time.choose-limited.w-inline-block.btn-select.flex-column.u-text-center",{"class":o.isEmpty(a.fields.online_days().toString())?"":"selected",onclick:function(){a.fields.online_days(1)}},[e(".fontsize-base.fontweight-semibold.u-marginbottom-20",t.t("online_days_closed",zs())),e(".w-hidden-tiny.u-marginbottom-30",t.t("online_days_closed_hint",zs())),e(".w-row",[e(".w-col.w-col-6.label-hide",[e(".input.integer.optional.project_online_days",[e("label.field-label"),e('input.numeric.integer.optional.w-input.text-field.field.w-input.text-field.medium.prefix[id="project_online_days"][name="project[online_days]"][type="number"]',{onchange:e.withAttr("value",a.fields.online_days),value:a.fields.online_days(),"class":!!a.e.hasError("online_days")&&"error"})])]),e(".w-col.w-col-6",[e(".text-field.medium.prefix-permalink",{"class":!!a.e.hasError("online_days")&&"error"},[e("","dias")])])]),e(".w-row",a.e.inlineError("online_days"))])])]})])])]),e(Ui,{loading:r.loading,onSubmit:r.onSubmit})])])}},Es={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(Cs,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},Ss=ea(),Ps=e.prop({}),Ms={headline:e.prop(""),uploaded_image:e.prop(""),upload_files:e.prop(void 0)},As=function(e){Ms.headline(e.headline||""),Ps(e)},Ts=function(){Ps().id&&Ko.fetchProject(Ps().id,!1).then(function(t){Ps(_.first(t)),e.redraw()})},Ds=function(e){var t=new FormData;e.target.files[0]&&t.append("uploaded_image",e.target.files[0]),Ms.upload_files(t)},qs=function(t){if(_.isUndefined(Ms.upload_files)){var o=e.deferred();return o.resolve({}),o.promise}return e.request({method:"POST",url:"/projects/"+t+"/upload_image.json",data:Ms.upload_files(),config:pt.setCsrfToken,serialize:function(e){return e}})},Rs=function(e){var t={headline:Ms.headline()};return Ko.updateProject(e,t)},Fs={fields:Ms,fillFields:As,updateProject:Rs,e:Ss,prepareForUpload:Ds,uploadImage:qs,currentProject:Ps,reloadCurrentProject:Ts},Os=o.partial(pt.i18nScope,"projects.dashboard_card"),Is={controller:function(t){var o=Fs,r=[["uploaded_image",["uploaded_image"]],["headline",["headline"]]],n=pt.toggleProp(!1,!0),a=pt.toggleProp(!1,!0),i=e.prop(!1),s=function(s){return i(!0),e.redraw(),o.uploadImage(t.projectId).then(function(e){o.updateProject(t.projectId).then(function(e){i(!1),o.e.resetFieldErrors(),n()||n.toggle(),a()&&a.toggle(),o.reloadCurrentProject()})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),i(!1),n()&&n.toggle(),a()||a.toggle()})})["catch"](function(e){e.errors_json&&qi.mapRailsErrors(e.errors_json,r,o.e),i(!1),n()&&n.toggle(),a()||a.toggle()}),!1};return t.rails_errors&&qi.mapRailsErrors(t.rails_errors,r,o.e),o.fillFields(t.project),{onSubmit:s,showSuccess:n,showError:a,vm:o,loading:i}},view:function(o,r){var n=o.vm;return e("#card-tab",[o.showSuccess()?e.component(Pr,{message:t.t("shared.successful_update"),toggleOpt:o.showSuccess}):"",o.showError()?e.component(Pr,{message:t.t("shared.failed_update"),toggleOpt:o.showError,error:!0}):"",e("form.w-form",{onsubmit:o.onSubmit},[e(".w-section.section",[e(".w-container",[e(".w-row",[e(".w-col.w-col-8",[e(Li,{label:t.t("uploaded_image_label",Os()),label_hint:t.t("uploaded_image_hint",Os()),children:[e('input.file.optional.w-input.text-field[id="project_uploaded_image"][name="project[uploaded_image]"][type="file"]',{"class":!!n.e.hasError("uploaded_image")&&"error",onchange:n.prepareForUpload}),n.e.inlineError("uploaded_image")]}),e(Li,{label:t.t("headline_label",Os()),label_hint:t.t("headline_label_hint",Os()),children:[e('textarea.text.optional.w-input.text-field.positive[id="project_headline"][maxlength="100"][name="project[headline]"][rows="3"]',{onchange:e.withAttr("value",n.fields.headline),"class":!!n.e.hasError("headline")&&"error"},n.fields.headline()),n.e.inlineError("headline")]})]),e(Zo,{project:n.currentProject(),type:"small"})])])]),e(Ui,{loading:o.loading,onSubmit:o.onSubmit})])])}},Ns={controller:function(e){return{user:Ro.fetchUser(e.user_id),project:Ko.fetchProject(e.project_id)}},view:function(t,o){return t.user()&&t.project()?e(Is,{user:t.user(),userId:o.user_id,projectId:o.project_id,project:t.project(),rails_errors:o.rails_errors}):e("div",pt.loader())}},Vs={root:{AdminUsers:St,AdminContributions:Wt,ClipboardCopy:Mr,Flex:or,Insights:Dr,Posts:Rr,Jobs:Or,LiveStatistics:Ir,ProjectsContributionReport:Gr,ProjectsDashboard:Qr,ProjectsExplore:rn,ProjectsHome:dn,ProjectsShow:On,UsersShow:Zn,UsersEdit:fa,ProjectsContribution:Hn,ProjectsPayment:$a,ProjectsReward:Ja,ThankYou:ki,Publish:Ka,Start:ei,Team:ri,UsersBalance:ui,Menu:fi,Footer:wi,FollowFoundFriends:yi,CheckEmail:zi,projectEditUserAbout:Ci,projectEditUserSettings:Ti,projectEditReward:Ai,projectEditBasic:Wi,projectEditDescription:ts,projectEditBudget:cs,projectEditVideo:gs,projectEditGoal:Es,projectEditCard:Ns}};return Vs}(m,I18n,_,moment,$,postgrest,CatarseAnalytics,replaceDiacritics,Chart);